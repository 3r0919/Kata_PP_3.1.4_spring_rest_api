2025-02-16 00:00:56.917 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 00:00:56.934 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=0F09EE22F930223EBCF7757BA43D63BB], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:00:56.934 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 00:00:56.934 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 00:00:56.934 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 00:00:56.940 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='admin1@example.com', firstName='Admin', lastName='Admin', age=32}]
2025-02-16 00:00:57.005 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 00:00:57.047 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 00:00:57.057 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:00:57.058 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=3, email='admin1@example.com', firstName='Admin', lastName='Admin', age=32}]
2025-02-16 00:00:57.059 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 00:01:20.588 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users
2025-02-16 00:01:20.594 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=0F09EE22F930223EBCF7757BA43D63BB], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:01:20.594 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users
2025-02-16 00:01:20.594 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users", parameters={}
2025-02-16 00:01:20.596 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:01:20.597 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:01:20.597 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@758be4d9]
2025-02-16 00:01:20.598 [http-nio-8081-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'PUT' is not supported]
2025-02-16 00:01:20.599 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:02:43.469 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/3
2025-02-16 00:02:43.470 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/3
2025-02-16 00:02:43.471 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/3", parameters={}
2025-02-16 00:02:43.471 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 00:02:43.480 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}]
2025-02-16 00:02:43.493 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 00:02:43.516 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 00:02:43.528 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.model.User */update user 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=? 
    where
        id=?
2025-02-16 00:02:43.545 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:02:43.546 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=3, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}]
2025-02-16 00:02:43.548 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:02:43.549 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=0F09EE22F930223EBCF7757BA43D63BB], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:03:15.169 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 00:03:15.174 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=0F09EE22F930223EBCF7757BA43D63BB], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:03:15.175 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 00:03:15.175 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 00:03:15.175 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 00:03:15.193 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:03:15.201 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:03:15.204 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:03:15.207 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:03:15.208 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=3, emai (truncated)...]
2025-02-16 00:03:15.209 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:03:38.674 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 00:03:38.676 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 00:03:38.676 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 00:03:38.676 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 00:03:38.699 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 00:03:38.700 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 00:03:38.700 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=0F09EE22F930223EBCF7757BA43D63BB], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:03:38.707 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 00:03:39.060 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:03:48.173 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:03:48.337 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:03:48.422 [http-nio-8081-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:03:48.446 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 6061358C2665A2B3F1454C527802166D
2025-02-16 00:03:48.447 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=3, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6061358C2665A2B3F1454C527802166D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@45033c9d]
2025-02-16 00:03:48.447 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=3, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6061358C2665A2B3F1454C527802166D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 00:03:48.455 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-16 00:03:48.455 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-16 00:03:48.455 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-16 00:03:48.456 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:03:48.461 [http-nio-8081-exec-8] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:03:48.462 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:03:48.462 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:03:48.464 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@6d618ed3]
2025-02-16 00:03:48.465 [http-nio-8081-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin.]
2025-02-16 00:03:48.465 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:03:48.465 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=3, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6061358C2665A2B3F1454C527802166D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:03:54.725 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 00:03:54.728 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=3, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6061358C2665A2B3F1454C527802166D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:03:54.728 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 00:03:54.735 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 00:03:54.736 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 00:03:54.749 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:03:54.752 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:03:54.754 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:03:54.758 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:03:54.759 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=3, emai (truncated)...]
2025-02-16 00:03:54.761 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:23:06.429 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 00:23:06.432 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 00:23:06.433 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 00:23:06.434 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 00:23:06.481 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 00:23:06.522 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:23:06.522 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 00:23:06.528 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:23:06.529 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=3, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6061358C2665A2B3F1454C527802166D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:27:44.775 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 00:27:44.785 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 00:27:44.817 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:27:44.834 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 00:27:44.839 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 00:27:47.258 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78152 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 00:27:47.258 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 00:27:47.259 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 00:27:47.307 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 00:27:47.307 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 00:27:47.777 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 00:27:47.815 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 2 JPA repository interfaces.
2025-02-16 00:27:48.165 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 00:27:48.176 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 00:27:48.176 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 00:27:48.203 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 00:27:48.204 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 896 ms
2025-02-16 00:27:48.357 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 00:27:48.395 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 00:27:48.439 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 00:27:48.582 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 00:27:48.603 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 00:27:48.705 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@f7afb1
2025-02-16 00:27:48.706 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 00:27:48.785 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 00:27:49.306 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 00:27:49.384 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:27:49.565 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 00:27:50.082 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 00:27:50.100 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 00:27:50.102 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:27:50.108 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:27:50.112 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:27:50.115 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 00:27:50.163 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 00:27:50.244 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 00:27:50.294 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 00:27:50.352 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 00:27:50.401 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 00:27:50.444 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 00:27:50.492 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 00:27:50.519 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 00:27:50.527 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.791 seconds (process running for 4.377)
2025-02-16 00:28:02.176 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 00:28:02.177 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 00:28:02.177 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 00:28:02.177 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 00:28:02.177 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 00:28:02.180 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@eb9d873
2025-02-16 00:28:02.181 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5f6a50dc
2025-02-16 00:28:02.182 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 00:28:02.182 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-02-16 00:28:02.197 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/гыукы
2025-02-16 00:28:02.203 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/гыукы
2025-02-16 00:28:02.204 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/%D0%B3%D1%8B%D1%83%D0%BA%D1%8B", parameters={}
2025-02-16 00:28:02.206 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:28:02.211 [http-nio-8081-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:28:02.215 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:28:02.242 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:28:02.243 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@2f8e58ae]
2025-02-16 00:28:02.251 [http-nio-8081-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/%D0%B3%D1%8B%D1%83%D0%BA%D1%8B.]
2025-02-16 00:28:02.252 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:28:02.253 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=3, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6061358C2665A2B3F1454C527802166D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:28:05.972 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 00:28:05.976 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=3, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6061358C2665A2B3F1454C527802166D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:28:05.977 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 00:28:05.977 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 00:28:05.978 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 00:28:06.027 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:28:06.030 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:28:06.031 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:28:06.039 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:28:06.041 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=3, emai (truncated)...]
2025-02-16 00:28:06.055 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:28:10.416 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 00:28:10.420 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 00:28:10.421 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 00:28:10.422 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 00:28:10.447 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 00:28:10.450 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 00:28:10.451 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=3, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=6061358C2665A2B3F1454C527802166D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:28:10.464 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 00:28:10.483 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:28:20.339 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:28:20.486 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:28:20.607 [http-nio-8081-exec-8] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:28:20.631 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 4782E2AF29419E0EE21D829956F44332
2025-02-16 00:28:20.632 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4782E2AF29419E0EE21D829956F44332], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4f03ee14]
2025-02-16 00:28:20.633 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4782E2AF29419E0EE21D829956F44332], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 00:28:20.641 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-16 00:28:20.641 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-16 00:28:20.641 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-16 00:28:20.642 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:28:20.644 [http-nio-8081-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:28:20.646 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:28:20.646 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:28:20.647 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@432ae7a0]
2025-02-16 00:28:20.647 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin.]
2025-02-16 00:28:20.648 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:28:20.648 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4782E2AF29419E0EE21D829956F44332], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:28:26.301 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/1
2025-02-16 00:28:26.312 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/1
2025-02-16 00:28:26.313 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/1", parameters={}
2025-02-16 00:28:26.314 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getUserById(Long)
2025-02-16 00:28:26.371 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 00:28:26.377 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(NoSuchUserException)
2025-02-16 00:28:26.378 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:28:26.378 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@6f70506b]
2025-02-16 00:28:26.379 [http-nio-8081-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [ru.kata.spring.boot_security.demo.exception_handling.NoSuchUserException: User with id 1 not found]
2025-02-16 00:28:26.379 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-16 00:28:26.379 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4782E2AF29419E0EE21D829956F44332], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:28:26.667 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 00:28:26.668 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4782E2AF29419E0EE21D829956F44332], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:28:26.668 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 00:28:26.668 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 00:28:26.669 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 00:28:26.672 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:28:26.676 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:28:26.678 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:28:26.683 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:28:26.683 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=3, emai (truncated)...]
2025-02-16 00:28:26.684 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:29:17.416 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 00:29:17.423 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 00:29:17.423 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 00:29:17.424 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 00:29:17.427 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 00:29:17.428 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 00:29:17.428 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=4782E2AF29419E0EE21D829956F44332], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:29:17.435 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 00:29:17.464 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:29:23.942 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:29:23.981 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:29:24.083 [http-nio-8081-exec-9] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user@example.com'
2025-02-16 00:29:24.091 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 00:29:24.095 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 00:29:24.127 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:29:32.058 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:29:32.075 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:29:32.186 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user@example.com'
2025-02-16 00:29:32.187 [http-nio-8081-exec-3] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 00:29:32.190 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 00:29:32.213 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:30:01.192 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 00:30:01.199 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 00:30:01.205 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:30:01.213 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 00:30:01.224 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 00:30:03.508 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78208 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 00:30:03.509 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 00:30:03.509 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 00:30:03.537 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 00:30:03.537 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 00:30:03.974 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 00:30:04.004 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 00:30:04.317 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 00:30:04.324 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 00:30:04.324 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 00:30:04.344 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 00:30:04.344 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 807 ms
2025-02-16 00:30:04.455 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 00:30:04.484 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 00:30:04.499 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 00:30:04.645 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 00:30:04.659 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 00:30:04.746 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@14f49918
2025-02-16 00:30:04.746 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 00:30:04.804 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 00:30:05.240 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 00:30:05.246 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 00:30:05.312 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 00:30:05.318 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 00:30:05.325 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 00:30:05.329 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 00:30:05.335 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 00:30:05.342 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 00:30:05.346 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 00:30:05.350 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 00:30:05.358 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 00:30:05.363 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 00:30:05.377 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 00:30:05.395 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:30:05.577 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 00:30:05.971 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 00:30:05.993 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 00:30:06.005 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 00:30:06.007 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 00:30:06.008 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:30:06.131 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 00:30:06.137 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 00:30:06.142 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 00:30:06.145 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 00:30:06.225 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 00:30:06.228 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 00:30:06.229 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 00:30:06.231 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 00:30:06.276 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 00:30:06.345 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 00:30:06.384 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 00:30:06.408 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 00:30:06.440 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 00:30:06.490 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 00:30:06.541 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 00:30:06.556 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 00:30:06.562 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.396 seconds (process running for 3.735)
2025-02-16 00:30:17.563 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 00:30:17.569 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 00:30:17.574 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 00:30:17.575 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 00:30:17.576 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 00:30:17.581 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@722db074
2025-02-16 00:30:17.583 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@905914e
2025-02-16 00:30:17.584 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 00:30:17.584 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 14 ms
2025-02-16 00:30:17.598 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:30:17.702 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:30:17.789 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:30:17.801 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from C76AEE65B751C4A458B974D82B48459E
2025-02-16 00:30:17.803 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C76AEE65B751C4A458B974D82B48459E], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@411c5a20]
2025-02-16 00:30:17.803 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C76AEE65B751C4A458B974D82B48459E], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 00:30:17.838 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /user
2025-02-16 00:30:17.842 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C76AEE65B751C4A458B974D82B48459E], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:30:17.843 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /user
2025-02-16 00:30:17.846 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/user", parameters={}
2025-02-16 00:30:17.848 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:30:17.853 [http-nio-8081-exec-2] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:30:17.857 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:30:17.888 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:30:17.890 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@2ca075ac]
2025-02-16 00:30:17.896 [http-nio-8081-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource user.]
2025-02-16 00:30:17.896 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:30:36.370 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:30:36.372 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:30:36.372 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:30:36.373 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:30:36.398 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C76AEE65B751C4A458B974D82B48459E], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:30:36.414 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:30:36.634 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:30:36.656 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 00:30:36.657 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 00:30:36.657 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 00:30:36.658 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 00:30:36.658 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 00:30:36.658 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 00:30:36.659 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:30:36.659 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:30:36.662 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:30:36.663 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C76AEE65B751C4A458B974D82B48459E], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:30:36.664 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:30:36.664 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C76AEE65B751C4A458B974D82B48459E], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:30:36.670 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 00:30:36.670 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 00:30:36.671 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 00:30:36.671 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 00:30:36.671 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 00:30:36.671 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 00:30:36.672 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:30:36.673 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:30:36.674 [http-nio-8081-exec-8] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:30:36.674 [http-nio-8081-exec-7] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:30:36.676 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:30:36.677 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:30:36.678 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:30:36.677 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@19a9b83f]
2025-02-16 00:30:36.678 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:30:36.678 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@189f0f8f]
2025-02-16 00:30:36.679 [http-nio-8081-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:30:36.679 [http-nio-8081-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 00:30:36.680 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:30:36.680 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C76AEE65B751C4A458B974D82B48459E], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:30:36.680 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:30:36.681 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C76AEE65B751C4A458B974D82B48459E], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:31:55.689 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 00:31:55.696 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C76AEE65B751C4A458B974D82B48459E], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:31:55.697 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C76AEE65B751C4A458B974D82B48459E], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:31:55.703 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session D64A0F1B245E469137695A80226034CD
2025-02-16 00:31:55.711 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 00:31:55.719 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 00:31:55.758 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:32:02.440 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:32:02.459 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:32:02.580 [http-nio-8081-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:32:02.581 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@491b9820]
2025-02-16 00:32:02.581 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 00:32:02.585 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin
2025-02-16 00:32:02.585 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin
2025-02-16 00:32:02.585 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin", parameters={}
2025-02-16 00:32:02.586 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:32:02.587 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:32:02.587 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:32:02.588 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:32:02.588 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@2f073e88]
2025-02-16 00:32:02.589 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin.]
2025-02-16 00:32:02.589 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:32:02.589 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:32:05.831 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:32:05.832 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:32:05.833 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:32:05.834 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:32:05.835 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:32:05.843 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:32:05.902 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:32:05.920 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 00:32:05.920 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 00:32:05.920 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 00:32:05.920 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 00:32:05.921 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 00:32:05.921 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 00:32:05.921 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:32:05.921 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:32:05.922 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:32:05.924 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:32:05.922 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:32:05.925 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:32:05.931 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 00:32:05.931 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 00:32:05.931 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 00:32:05.931 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 00:32:05.932 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 00:32:05.932 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 00:32:05.934 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:32:05.934 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:32:05.938 [http-nio-8081-exec-8] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:32:05.938 [http-nio-8081-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:32:05.938 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:32:05.938 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:32:05.938 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:32:05.938 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:32:05.938 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@331e3fdc]
2025-02-16 00:32:05.938 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@4e650c54]
2025-02-16 00:32:05.939 [http-nio-8081-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 00:32:05.939 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:32:05.939 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:32:05.939 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:32:05.940 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:32:05.940 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:32:13.311 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users/
2025-02-16 00:32:13.322 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users/
2025-02-16 00:32:13.323 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users/", parameters={}
2025-02-16 00:32:13.325 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:32:13.343 [http-nio-8081-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:32:13.345 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:32:13.346 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:32:13.347 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@793a0ee1]
2025-02-16 00:32:13.349 [http-nio-8081-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:32:13.350 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:32:13.350 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:32:13.391 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 00:32:13.392 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 00:32:13.392 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 00:32:13.393 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:32:13.394 [http-nio-8081-exec-3] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:32:13.395 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:32:13.395 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:32:13.395 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@52ccb6e2]
2025-02-16 00:32:13.396 [http-nio-8081-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:32:13.397 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:32:13.398 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:33:23.551 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 00:33:23.558 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 00:33:23.563 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:33:23.565 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 00:33:23.588 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 00:33:23.597 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 00:33:23.607 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 00:33:23.610 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 00:33:23.621 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 00:33:23.632 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 00:33:25.666 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78231 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 00:33:25.667 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 00:33:25.667 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 00:33:25.755 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 00:33:25.755 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 00:33:26.223 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 00:33:26.254 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-02-16 00:33:26.533 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 00:33:26.540 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 00:33:26.540 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 00:33:26.566 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 00:33:26.566 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 810 ms
2025-02-16 00:33:26.675 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 00:33:26.698 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 00:33:26.712 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 00:33:26.845 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 00:33:26.861 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 00:33:26.940 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@61663b95
2025-02-16 00:33:26.941 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 00:33:26.990 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 00:33:27.424 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 00:33:27.467 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 00:33:27.479 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        id bigint not null auto_increment,
        age integer,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 00:33:27.483 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role_id integer not null,
        primary key (user_id, role_id)
    ) engine=InnoDB
2025-02-16 00:33:27.487 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       drop index UK8sewwnpamngi6b1dwaa88askk
2025-02-16 00:33:27.880 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 00:33:27.899 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       drop index UKob8kqyqqgmefl0aco34akdtpe
2025-02-16 00:33:27.901 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 00:33:27.907 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 00:33:27.916 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 00:33:27.930 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:33:28.060 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 00:33:28.479 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 00:33:28.500 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 00:33:28.511 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 00:33:28.513 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 00:33:28.515 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:33:28.645 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 00:33:28.649 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 00:33:28.655 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 00:33:28.658 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 00:33:28.745 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 00:33:28.748 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 00:33:28.751 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 00:33:28.754 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 00:33:28.810 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 00:33:28.873 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 00:33:28.911 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 00:33:28.936 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 00:33:28.971 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 00:33:29.009 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 00:33:29.050 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 00:33:29.067 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 00:33:29.073 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 4.056 seconds (process running for 4.437)
2025-02-16 00:33:35.691 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 00:33:35.692 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 00:33:35.692 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 00:33:35.692 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 00:33:35.692 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 00:33:35.695 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@19716627
2025-02-16 00:33:35.695 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@69199278
2025-02-16 00:33:35.696 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 00:33:35.696 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 00:33:35.711 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 00:33:35.719 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:33:35.720 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 00:33:35.722 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 00:33:35.724 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 00:33:35.739 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:33:35.757 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:33:35.761 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:33:35.778 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:33:35.780 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 00:33:35.809 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:36:16.470 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 00:36:16.472 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:36:16.472 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 00:36:16.473 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 00:36:16.473 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 00:36:16.486 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:36:16.489 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:36:16.492 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:36:16.508 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:36:16.508 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 00:36:16.511 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:36:21.848 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 00:36:21.850 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:36:21.851 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 00:36:21.851 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 00:36:21.851 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 00:36:21.866 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:36:21.875 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:36:21.877 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:36:21.882 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:36:21.882 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 00:36:21.883 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:37:42.867 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 00:37:42.904 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 00:37:42.913 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:37:42.923 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 00:37:42.938 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 00:37:45.068 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78340 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 00:37:45.068 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 00:37:45.069 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 00:37:45.104 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 00:37:45.104 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 00:37:45.502 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 00:37:45.530 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 00:37:45.860 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 00:37:45.867 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 00:37:45.867 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 00:37:45.887 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 00:37:45.888 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 783 ms
2025-02-16 00:37:45.992 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 00:37:46.019 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 00:37:46.034 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 00:37:46.178 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 00:37:46.192 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 00:37:46.293 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@24ae3ccc
2025-02-16 00:37:46.294 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 00:37:46.345 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 00:37:46.779 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 00:37:46.842 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:37:46.961 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 00:37:47.392 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 00:37:47.404 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 00:37:47.406 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:37:47.410 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:37:47.415 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:37:47.417 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 00:37:47.453 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 00:37:47.518 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 00:37:47.522 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/users] in 'viewControllerHandlerMapping'
2025-02-16 00:37:47.558 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 00:37:47.581 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 00:37:47.623 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 00:37:47.671 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 00:37:47.718 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 00:37:47.734 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 00:37:47.740 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.01 seconds (process running for 3.373)
2025-02-16 00:37:55.058 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 00:37:55.058 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 00:37:55.058 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 00:37:55.058 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 00:37:55.058 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 00:37:55.066 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3ea709d0
2025-02-16 00:37:55.066 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@582826a0
2025-02-16 00:37:55.067 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 00:37:55.067 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2025-02-16 00:37:55.079 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:37:55.086 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:37:55.088 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:37:55.091 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:37:55.101 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:37:55.115 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:37:55.351 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:37:55.613 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 00:37:55.613 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 00:37:55.614 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 00:37:55.615 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 00:37:55.615 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 00:37:55.615 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 00:37:55.615 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:37:55.615 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:37:55.624 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:37:55.624 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:37:55.625 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:37:55.625 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:37:55.703 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 00:37:55.703 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 00:37:55.704 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 00:37:55.704 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 00:37:55.704 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 00:37:55.704 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 00:37:55.705 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:37:55.705 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:37:55.708 [http-nio-8081-exec-6] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:37:55.708 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:37:55.715 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:37:55.715 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:37:55.742 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:37:55.742 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:37:55.744 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@7e6eba92]
2025-02-16 00:37:55.744 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@68436dcb]
2025-02-16 00:37:55.754 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:37:55.754 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:37:55.754 [http-nio-8081-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 00:37:55.755 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:37:55.755 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:37:55.755 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:38:00.146 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 00:38:00.148 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 00:38:00.149 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 00:38:00.149 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 00:38:00.163 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 00:38:00.165 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 00:38:00.165 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:38:00.173 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 00:38:00.205 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:38:05.362 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:38:05.526 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:38:05.618 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:38:05.627 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from BB70301A7880B3398BA574E02323BAB5
2025-02-16 00:38:05.628 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BB70301A7880B3398BA574E02323BAB5], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@56981b1]
2025-02-16 00:38:05.629 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BB70301A7880B3398BA574E02323BAB5], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 00:38:05.634 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /user
2025-02-16 00:38:05.635 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BB70301A7880B3398BA574E02323BAB5], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:38:05.635 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /user
2025-02-16 00:38:05.635 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/user", parameters={}
2025-02-16 00:38:05.636 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:38:05.636 [http-nio-8081-exec-3] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:38:05.637 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:38:05.637 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:38:05.638 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@74735372]
2025-02-16 00:38:05.639 [http-nio-8081-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource user.]
2025-02-16 00:38:05.639 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:38:56.558 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 00:38:56.563 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 00:38:56.568 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:38:56.577 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 00:38:56.587 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 00:38:58.820 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78359 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 00:38:58.821 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 00:38:58.821 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 00:38:58.858 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 00:38:58.858 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 00:38:59.224 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 00:38:59.252 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 00:38:59.536 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 00:38:59.543 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 00:38:59.544 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 00:38:59.563 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 00:38:59.563 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 704 ms
2025-02-16 00:38:59.673 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 00:38:59.701 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 00:38:59.717 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 00:38:59.859 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 00:38:59.882 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 00:38:59.979 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@142c7c91
2025-02-16 00:38:59.980 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 00:39:00.035 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 00:39:00.470 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 00:39:00.539 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:39:00.660 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 00:39:01.057 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 00:39:01.070 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 00:39:01.071 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:39:01.076 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:39:01.079 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:39:01.081 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 00:39:01.115 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 00:39:01.177 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 00:39:01.216 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 00:39:01.238 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 00:39:01.268 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 00:39:01.307 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 00:39:01.351 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 00:39:01.369 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 00:39:01.375 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.916 seconds (process running for 3.211)
2025-02-16 00:39:06.208 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 00:39:06.208 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 00:39:06.209 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 00:39:06.209 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 00:39:06.209 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 00:39:06.216 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@78bd7550
2025-02-16 00:39:06.216 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@49c91262
2025-02-16 00:39:06.216 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 00:39:06.216 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-02-16 00:39:06.228 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 00:39:06.233 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 00:39:06.235 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 00:39:06.236 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 00:39:06.266 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 00:39:06.267 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 00:39:06.267 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BB70301A7880B3398BA574E02323BAB5], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:39:06.274 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 00:39:06.290 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:39:12.370 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:39:12.525 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:39:12.690 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:39:12.704 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 1785779EED1A338AB60C4DFD913C5C2A
2025-02-16 00:39:12.705 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1785779EED1A338AB60C4DFD913C5C2A], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6a3ad2e4]
2025-02-16 00:39:12.705 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1785779EED1A338AB60C4DFD913C5C2A], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 00:39:12.712 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:39:12.713 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:39:12.713 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:39:12.714 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:39:12.722 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1785779EED1A338AB60C4DFD913C5C2A], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:39:12.729 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:39:12.934 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:39:12.946 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 00:39:12.946 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 00:39:12.947 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 00:39:12.947 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 00:39:12.947 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 00:39:12.947 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 00:39:12.947 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:39:12.947 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:39:12.958 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:39:12.959 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1785779EED1A338AB60C4DFD913C5C2A], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:39:12.959 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:39:12.959 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1785779EED1A338AB60C4DFD913C5C2A], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:39:12.963 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 00:39:12.963 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 00:39:12.963 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 00:39:12.963 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 00:39:12.963 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 00:39:12.963 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 00:39:12.964 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:39:12.964 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:39:12.964 [http-nio-8081-exec-9] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:39:12.964 [http-nio-8081-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:39:12.966 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:39:12.966 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:39:13.015 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:39:13.015 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:39:13.016 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@6f927e41]
2025-02-16 00:39:13.016 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@3d94f28c]
2025-02-16 00:39:13.025 [http-nio-8081-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 00:39:13.025 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:39:13.025 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:39:13.025 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:39:13.025 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1785779EED1A338AB60C4DFD913C5C2A], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:39:13.025 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=1785779EED1A338AB60C4DFD913C5C2A], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 00:39:31.926 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:39:31.959 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:39:32.064 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:39:32.065 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 28FBD57EA919A9CBB5F3A82C13A13537
2025-02-16 00:39:32.065 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28FBD57EA919A9CBB5F3A82C13A13537], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6a3ad2e4]
2025-02-16 00:39:32.065 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28FBD57EA919A9CBB5F3A82C13A13537], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 00:39:32.071 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 00:39:32.071 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28FBD57EA919A9CBB5F3A82C13A13537], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:39:32.072 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 00:39:32.072 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 00:39:32.072 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 00:39:32.082 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:39:32.084 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:39:32.085 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:39:32.090 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 00:39:32.092 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 00:39:32.112 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:40:50.862 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 00:40:50.873 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 00:40:50.894 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:40:50.909 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 00:40:50.920 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 00:40:53.280 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78386 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 00:40:53.281 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 00:40:53.281 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 00:40:53.353 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 00:40:53.354 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 00:40:53.727 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 00:40:53.756 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 00:40:54.056 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 00:40:54.064 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 00:40:54.064 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 00:40:54.090 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 00:40:54.091 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 737 ms
2025-02-16 00:40:54.202 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 00:40:54.228 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 00:40:54.250 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 00:40:54.434 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 00:40:54.449 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 00:40:54.529 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@e6cb61b
2025-02-16 00:40:54.529 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 00:40:54.572 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 00:40:55.012 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 00:40:55.069 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:40:55.209 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 00:40:55.577 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 00:40:55.593 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 00:40:55.594 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:40:55.599 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:40:55.601 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:40:55.603 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 00:40:55.638 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 00:40:55.699 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 00:40:55.740 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 00:40:55.763 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 00:40:55.802 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 00:40:55.847 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 00:40:55.892 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 00:40:55.909 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 00:40:55.917 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.419 seconds (process running for 3.872)
2025-02-16 00:41:01.561 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 00:41:01.562 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 00:41:01.562 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 00:41:01.562 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 00:41:01.562 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 00:41:01.565 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4ebe8bc5
2025-02-16 00:41:01.565 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@288dfa55
2025-02-16 00:41:01.565 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 00:41:01.566 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 00:41:01.579 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 00:41:01.584 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 00:41:01.587 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 00:41:01.589 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 00:41:01.602 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 00:41:01.605 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 00:41:01.606 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28FBD57EA919A9CBB5F3A82C13A13537], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:41:01.613 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 00:41:02.002 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:41:08.673 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:41:08.826 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:41:08.913 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:41:08.934 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from EB0798FED8104D7895E17C7E563EF379
2025-02-16 00:41:08.936 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5f2c0665]
2025-02-16 00:41:08.937 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 00:41:08.943 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:41:08.944 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:41:08.944 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:41:08.944 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:41:08.949 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:41:08.958 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:41:09.113 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:41:09.142 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 00:41:09.142 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 00:41:09.142 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 00:41:09.143 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 00:41:09.144 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 00:41:09.144 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 00:41:09.145 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:41:09.145 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:41:09.155 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:41:09.155 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:41:09.155 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:41:09.156 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:41:09.163 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 00:41:09.163 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 00:41:09.163 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 00:41:09.163 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 00:41:09.163 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:41:09.163 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 00:41:09.164 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 00:41:09.165 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:41:09.165 [http-nio-8081-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:41:09.166 [http-nio-8081-exec-9] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:41:09.171 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:41:09.171 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:41:09.203 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:41:09.203 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:41:09.204 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@3eb58b14]
2025-02-16 00:41:09.204 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@4db01a1a]
2025-02-16 00:41:09.213 [http-nio-8081-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:41:09.213 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 00:41:09.214 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:41:09.214 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:41:09.214 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:41:09.214 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:44:02.421 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 00:44:02.425 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 00:44:02.434 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:44:02.449 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 00:44:02.503 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 00:44:05.087 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78422 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 00:44:05.088 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 00:44:05.088 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 00:44:05.127 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 00:44:05.127 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 00:44:05.538 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 00:44:05.574 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 2 JPA repository interfaces.
2025-02-16 00:44:05.887 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 00:44:05.896 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 00:44:05.896 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 00:44:05.919 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 00:44:05.919 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 792 ms
2025-02-16 00:44:06.033 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 00:44:06.058 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 00:44:06.072 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 00:44:06.209 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 00:44:06.229 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 00:44:06.309 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51f13e5d
2025-02-16 00:44:06.310 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 00:44:06.354 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 00:44:06.789 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 00:44:06.845 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:44:06.971 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 00:44:07.392 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 00:44:07.406 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 00:44:07.407 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:44:07.412 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:44:07.416 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:44:07.418 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 00:44:07.458 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 00:44:07.522 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 00:44:07.559 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 00:44:07.586 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 00:44:07.627 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 00:44:07.665 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 00:44:07.706 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 00:44:07.729 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 00:44:07.735 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.021 seconds (process running for 3.344)
2025-02-16 00:44:28.822 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 00:44:28.823 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 00:44:28.823 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 00:44:28.823 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 00:44:28.823 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 00:44:28.826 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@19cd34a4
2025-02-16 00:44:28.826 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@74b96f9b
2025-02-16 00:44:28.826 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 00:44:28.826 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 00:44:28.842 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:44:28.848 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:44:28.850 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:44:28.851 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:44:28.861 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:44:28.870 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:44:29.087 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:44:29.094 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 00:44:29.094 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 00:44:29.095 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 00:44:29.095 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 00:44:29.095 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 00:44:29.095 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 00:44:29.095 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:44:29.095 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:44:29.102 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:44:29.102 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:44:29.102 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:44:29.102 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:44:29.108 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 00:44:29.108 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 00:44:29.109 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 00:44:29.109 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 00:44:29.109 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 00:44:29.110 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 00:44:29.110 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:44:29.110 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:44:29.111 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:44:29.111 [http-nio-8081-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:44:29.113 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:44:29.113 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:44:29.143 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:44:29.143 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:44:29.145 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@14505160]
2025-02-16 00:44:29.145 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@5ee2b07]
2025-02-16 00:44:29.157 [http-nio-8081-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 00:44:29.157 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:44:29.157 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:44:29.157 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:44:29.158 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:44:29.158 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:44:30.990 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 00:44:30.991 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 00:44:30.991 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 00:44:30.991 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 00:44:30.998 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 00:44:31.001 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 00:44:31.001 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=EB0798FED8104D7895E17C7E563EF379], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:44:31.006 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 00:44:31.423 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:44:35.367 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:44:35.531 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:44:35.629 [http-nio-8081-exec-9] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:44:35.643 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 770B9DFCCD26BE4CFC34398EA5F2179E
2025-02-16 00:44:35.644 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=770B9DFCCD26BE4CFC34398EA5F2179E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@22aba6bb]
2025-02-16 00:44:35.645 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=770B9DFCCD26BE4CFC34398EA5F2179E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 00:44:35.650 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:44:35.650 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:44:35.650 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:44:35.650 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:44:35.651 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=770B9DFCCD26BE4CFC34398EA5F2179E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:44:35.653 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:44:35.678 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:44:35.697 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 00:44:35.697 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 00:44:35.698 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 00:44:35.698 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 00:44:35.698 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 00:44:35.698 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 00:44:35.702 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:44:35.702 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:44:35.704 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:44:35.705 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:44:35.705 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=770B9DFCCD26BE4CFC34398EA5F2179E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:44:35.705 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=770B9DFCCD26BE4CFC34398EA5F2179E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:44:35.711 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 00:44:35.711 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 00:44:35.711 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 00:44:35.712 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 00:44:35.712 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 00:44:35.712 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 00:44:35.712 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:44:35.712 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:44:35.720 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:44:35.720 [http-nio-8081-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:44:35.722 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:44:35.722 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:44:35.724 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:44:35.724 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:44:35.724 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@5dd334a0]
2025-02-16 00:44:35.724 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@61f885e9]
2025-02-16 00:44:35.725 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:44:35.725 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:44:35.725 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=770B9DFCCD26BE4CFC34398EA5F2179E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:44:35.725 [http-nio-8081-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 00:44:35.726 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:44:35.726 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=770B9DFCCD26BE4CFC34398EA5F2179E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:48:48.792 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 00:48:48.797 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 00:48:48.809 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:48:48.819 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 00:48:48.829 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 00:48:51.020 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78485 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 00:48:51.021 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 00:48:51.022 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 00:48:51.060 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 00:48:51.060 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 00:48:51.425 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 00:48:51.452 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 2 JPA repository interfaces.
2025-02-16 00:48:51.736 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 00:48:51.746 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 00:48:51.746 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 00:48:51.770 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 00:48:51.770 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 710 ms
2025-02-16 00:48:51.873 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 00:48:51.900 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 00:48:51.915 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 00:48:52.069 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 00:48:52.084 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 00:48:52.171 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6f1dfe1a
2025-02-16 00:48:52.172 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 00:48:52.224 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 00:48:52.654 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 00:48:52.731 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:48:52.882 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 00:48:53.270 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 00:48:53.285 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 00:48:53.287 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:48:53.291 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:48:53.294 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:48:53.296 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 00:48:53.335 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 00:48:53.398 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 00:48:53.445 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 00:48:53.471 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 00:48:53.520 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 00:48:53.568 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 00:48:53.610 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 00:48:53.628 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 00:48:53.634 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.958 seconds (process running for 3.295)
2025-02-16 00:49:01.954 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 00:49:01.955 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 00:49:01.956 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 00:49:01.956 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 00:49:01.956 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 00:49:01.959 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@a49db21
2025-02-16 00:49:01.959 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6c7bd995
2025-02-16 00:49:01.960 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 00:49:01.960 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-02-16 00:49:01.978 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 00:49:01.987 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 00:49:01.989 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 00:49:01.991 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 00:49:02.010 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 00:49:02.011 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 00:49:02.012 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=770B9DFCCD26BE4CFC34398EA5F2179E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:49:02.021 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 00:49:02.427 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:49:13.395 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:49:13.556 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:49:13.658 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@mail.ru'
2025-02-16 00:49:13.661 [http-nio-8081-exec-5] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 00:49:13.666 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 00:49:13.695 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:50:13.764 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 00:50:13.789 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 00:50:13.797 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:50:13.804 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 00:50:13.814 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 00:50:16.086 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78550 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 00:50:16.087 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 00:50:16.087 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 00:50:16.116 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 00:50:16.116 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 00:50:16.495 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 00:50:16.522 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 00:50:16.814 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 00:50:16.824 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 00:50:16.824 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 00:50:16.845 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 00:50:16.845 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 728 ms
2025-02-16 00:50:16.957 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 00:50:16.984 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 00:50:16.999 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 00:50:17.144 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 00:50:17.158 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 00:50:17.243 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@237fe9ed
2025-02-16 00:50:17.244 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 00:50:17.289 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 00:50:17.708 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 00:50:17.740 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 00:50:17.763 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        id bigint not null auto_increment,
        age integer,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 00:50:17.770 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role_id integer not null,
        primary key (user_id, role_id)
    ) engine=InnoDB
2025-02-16 00:50:17.775 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       drop index UK8sewwnpamngi6b1dwaa88askk
2025-02-16 00:50:18.123 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 00:50:18.150 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       drop index UKob8kqyqqgmefl0aco34akdtpe
2025-02-16 00:50:18.151 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 00:50:18.156 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 00:50:18.168 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 00:50:18.179 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:50:18.338 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 00:50:18.717 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 00:50:18.736 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 00:50:18.748 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 00:50:18.750 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 00:50:18.752 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:50:18.868 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 00:50:18.872 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 00:50:18.876 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 00:50:18.879 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@mail.ru
2025-02-16 00:50:18.959 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 00:50:18.961 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 00:50:18.963 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 00:50:18.964 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@mail.ru
2025-02-16 00:50:19.013 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 00:50:19.082 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 00:50:19.134 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 00:50:19.158 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 00:50:19.194 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 00:50:19.236 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 00:50:19.278 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 00:50:19.295 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 00:50:19.302 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.786 seconds (process running for 4.481)
2025-02-16 00:50:40.575 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 00:50:40.581 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 00:50:40.582 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 00:50:40.583 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 00:50:40.583 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 00:50:40.594 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3e2b51ad
2025-02-16 00:50:40.595 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@54fa0fd3
2025-02-16 00:50:40.595 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 00:50:40.595 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 13 ms
2025-02-16 00:50:40.640 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:50:40.860 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:50:41.100 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:50:41.172 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from D4181B6420267AAF1049ED990D14AF4C
2025-02-16 00:50:41.175 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4181B6420267AAF1049ED990D14AF4C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@38bbf5ee]
2025-02-16 00:50:41.175 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4181B6420267AAF1049ED990D14AF4C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 00:50:41.225 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:50:41.229 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:50:41.233 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:50:41.233 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:50:41.289 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D4181B6420267AAF1049ED990D14AF4C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:50:41.331 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:50:41.796 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:50:41.805 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:50:41.907 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:50:41.967 [http-nio-8081-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:50:41.967 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 46609C1F511649AA149B89BCA0213F7F
2025-02-16 00:50:41.968 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@38bbf5ee]
2025-02-16 00:50:41.968 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 00:50:41.971 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:50:41.972 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:50:41.972 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:50:41.972 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:50:41.973 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:50:41.973 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:50:41.996 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:50:42.054 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 00:50:42.054 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 00:50:42.054 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 00:50:42.055 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:50:42.057 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 00:50:42.062 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 00:50:42.062 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 00:50:42.069 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:50:42.102 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:50:42.107 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:50:42.108 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:50:42.111 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:50:42.120 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 00:50:42.121 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 00:50:42.122 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 00:50:42.123 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:50:42.124 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 00:50:42.125 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 00:50:42.125 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 00:50:42.128 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:50:42.138 [http-nio-8081-exec-8] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:50:42.142 [http-nio-8081-exec-9] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:50:42.164 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:50:42.165 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:50:42.290 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:50:42.290 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:50:42.294 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@7cc21367]
2025-02-16 00:50:42.299 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@2490bc1d]
2025-02-16 00:50:42.312 [http-nio-8081-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:50:42.314 [http-nio-8081-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 00:50:42.314 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:50:42.314 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:50:42.314 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:50:42.314 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:52:55.011 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 00:52:55.015 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 00:52:55.028 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:52:55.038 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 00:52:55.050 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 00:52:56.930 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78637 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 00:52:56.932 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 00:52:56.933 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 00:52:56.972 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 00:52:56.972 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 00:52:57.378 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 00:52:57.412 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 2 JPA repository interfaces.
2025-02-16 00:52:57.813 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 00:52:57.821 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 00:52:57.822 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 00:52:57.848 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 00:52:57.848 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 876 ms
2025-02-16 00:52:57.968 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 00:52:57.999 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 00:52:58.014 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 00:52:58.166 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 00:52:58.181 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 00:52:58.283 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e268fb
2025-02-16 00:52:58.284 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 00:52:58.344 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 00:52:58.838 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 00:52:58.901 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 00:52:59.020 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 00:52:59.484 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 00:52:59.498 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 00:52:59.500 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 00:52:59.504 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:52:59.507 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 00:52:59.509 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 00:52:59.548 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 00:52:59.633 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 00:52:59.674 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 00:52:59.702 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 00:52:59.744 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 00:52:59.790 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 00:52:59.829 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 00:52:59.847 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 00:52:59.853 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.4 seconds (process running for 3.833)
2025-02-16 00:53:06.326 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 00:53:06.327 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 00:53:06.327 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 00:53:06.327 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 00:53:06.327 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 00:53:06.329 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@52361b04
2025-02-16 00:53:06.329 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@61a107a1
2025-02-16 00:53:06.331 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 00:53:06.331 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 00:53:06.344 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:53:06.350 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:53:06.352 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:53:06.355 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:53:06.369 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:06.381 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:53:06.563 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:53:06.612 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 00:53:06.612 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 00:53:06.612 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 00:53:06.612 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 00:53:06.612 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 00:53:06.612 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 00:53:06.613 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:53:06.613 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:53:06.626 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:53:06.626 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:53:06.627 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:06.627 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:06.633 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 00:53:06.633 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 00:53:06.634 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 00:53:06.634 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 00:53:06.634 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 00:53:06.634 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 00:53:06.634 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:53:06.635 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:53:06.636 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:53:06.636 [http-nio-8081-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:53:06.638 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:53:06.638 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:53:06.675 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:53:06.675 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:53:06.676 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@27649666]
2025-02-16 00:53:06.676 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@1dc2d1c1]
2025-02-16 00:53:06.684 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 00:53:06.684 [http-nio-8081-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:53:06.684 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:53:06.684 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:53:06.684 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:06.684 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:08.814 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 00:53:08.816 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 00:53:08.818 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 00:53:08.819 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 00:53:08.830 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 00:53:08.832 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 00:53:08.833 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=46609C1F511649AA149B89BCA0213F7F], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:08.847 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 00:53:09.266 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:53:16.685 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 00:53:16.831 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 00:53:16.923 [http-nio-8081-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 00:53:16.940 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from D296FCDBBC3B69C644AF79659E4363E0
2025-02-16 00:53:16.941 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D296FCDBBC3B69C644AF79659E4363E0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@29afd3f6]
2025-02-16 00:53:16.941 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D296FCDBBC3B69C644AF79659E4363E0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 00:53:16.946 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:53:16.947 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:53:16.947 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:53:16.947 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:53:16.948 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D296FCDBBC3B69C644AF79659E4363E0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:16.949 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:53:16.977 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:53:16.984 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 00:53:16.984 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 00:53:16.985 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 00:53:16.985 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 00:53:16.986 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:53:16.985 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 00:53:16.988 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 00:53:16.989 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:53:16.991 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:53:16.992 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 00:53:16.992 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D296FCDBBC3B69C644AF79659E4363E0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:16.992 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D296FCDBBC3B69C644AF79659E4363E0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:17.004 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 00:53:17.006 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 00:53:17.006 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 00:53:17.007 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:53:17.010 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 00:53:17.013 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 00:53:17.014 [http-nio-8081-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:53:17.014 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 00:53:17.017 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 00:53:17.019 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:53:17.019 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 00:53:17.019 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:53:17.019 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 00:53:17.020 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@39e898ca]
2025-02-16 00:53:17.020 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 00:53:17.021 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@5d00e54f]
2025-02-16 00:53:17.021 [http-nio-8081-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 00:53:17.022 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 00:53:17.022 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:53:17.022 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 00:53:17.022 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D296FCDBBC3B69C644AF79659E4363E0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:17.022 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D296FCDBBC3B69C644AF79659E4363E0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:21.368 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 00:53:21.372 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D296FCDBBC3B69C644AF79659E4363E0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:21.373 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D296FCDBBC3B69C644AF79659E4363E0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 00:53:21.380 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 66B29E2BD8CA5C9BC45219026EFBD905
2025-02-16 00:53:21.382 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 00:53:21.390 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 00:53:21.419 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 00:53:23.418 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 00:53:23.420 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 00:53:23.420 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 00:53:23.421 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 00:53:23.423 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 00:53:23.433 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 00:53:23.450 [http-nio-8081-exec-10] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8081-exec-10] Exception processing template "users": An error happened during template parsing (template: "class path resource [templates/users.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 20, col 62)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 20, col 62)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 00:53:23.459 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Error rendering view [org.thymeleaf.spring6.view.ThymeleafView@6729d5c8]
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 20, col 62)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 20, col 62)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 00:53:23.460 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
2025-02-16 00:53:23.462 [http-nio-8081-exec-10] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-02-16 00:53:23.475 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 00:53:23.475 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 00:53:23.475 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 00:53:23.475 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-16 00:53:23.485 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-16 00:53:23.490 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-02-16 00:53:23.490 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 00:53:24.761 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 00:53:24.781 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:00:07.017 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 01:00:07.025 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 01:00:07.039 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:00:07.050 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:00:07.063 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:00:09.426 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78741 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:00:09.428 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:00:09.430 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:00:09.486 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:00:09.487 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:00:10.007 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:00:10.043 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 2 JPA repository interfaces.
2025-02-16 01:00:10.715 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:00:10.741 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:00:10.741 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:00:10.793 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:00:10.794 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1305 ms
2025-02-16 01:00:11.182 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:00:11.317 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:00:11.376 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:00:11.637 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:00:11.666 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:00:11.832 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72b09620
2025-02-16 01:00:11.833 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:00:11.921 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:00:12.377 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:00:12.454 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:00:12.588 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:00:13.188 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 01:00:13.209 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 01:00:13.211 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:00:13.220 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:00:13.227 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:00:13.230 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 01:00:13.300 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 01:00:13.385 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 01:00:13.484 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 01:00:13.544 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 01:00:13.640 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 01:00:13.723 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 01:00:13.782 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 01:00:13.806 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 01:00:13.815 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 4.886 seconds (process running for 5.383)
2025-02-16 01:00:29.273 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 01:00:29.274 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 01:00:29.275 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 01:00:29.275 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 01:00:29.275 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 01:00:29.278 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@35d8c296
2025-02-16 01:00:29.278 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@64e9f9cf
2025-02-16 01:00:29.278 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 01:00:29.279 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 01:00:29.319 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 01:00:29.326 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 01:00:29.331 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 01:00:29.337 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 01:00:29.373 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 01:00:29.376 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 01:00:29.378 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 01:00:29.428 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 01:00:29.497 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:00:42.995 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 01:00:43.158 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 01:00:43.268 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 01:00:43.293 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1ce12d08]
2025-02-16 01:00:43.293 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 01:00:43.317 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:00:43.317 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:00:43.317 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:00:43.318 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:00:43.327 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:00:43.342 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:00:43.588 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:00:43.597 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 01:00:43.597 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 01:00:43.597 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 01:00:43.597 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 01:00:43.597 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 01:00:43.598 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 01:00:43.599 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:00:43.599 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:00:43.607 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:00:43.607 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:00:43.608 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:00:43.608 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:00:43.614 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 01:00:43.614 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 01:00:43.615 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 01:00:43.615 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 01:00:43.615 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 01:00:43.615 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 01:00:43.616 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:00:43.616 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:00:43.618 [http-nio-8081-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:00:43.618 [http-nio-8081-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:00:43.624 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:00:43.625 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:00:43.660 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:00:43.660 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:00:43.663 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@56f06ff4]
2025-02-16 01:00:43.663 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@765ba605]
2025-02-16 01:00:43.674 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 01:00:43.674 [http-nio-8081-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 01:00:43.674 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:00:43.674 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:00:43.674 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:00:43.674 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:02:07.917 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 01:02:07.921 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 01:02:07.929 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:02:07.935 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:02:07.947 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:02:10.418 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78793 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:02:10.419 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:02:10.420 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:02:10.472 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:02:10.472 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:02:11.347 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:02:11.382 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 2 JPA repository interfaces.
2025-02-16 01:02:11.711 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:02:11.720 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:02:11.720 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:02:11.740 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:02:11.741 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1269 ms
2025-02-16 01:02:11.843 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:02:11.873 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:02:11.889 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:02:12.034 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:02:12.048 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:02:12.139 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5f1148db
2025-02-16 01:02:12.140 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:02:12.196 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:02:12.612 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:02:12.673 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:02:12.819 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:02:13.189 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 01:02:13.205 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 01:02:13.206 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:02:13.210 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:02:13.215 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:02:13.217 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 01:02:13.252 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 01:02:13.311 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 01:02:13.352 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 01:02:13.372 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 01:02:13.401 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 01:02:13.440 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 01:02:13.487 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 01:02:13.517 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 01:02:13.526 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 4.023 seconds (process running for 4.604)
2025-02-16 01:02:20.897 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 01:02:20.898 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 01:02:20.899 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 01:02:20.899 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 01:02:20.899 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 01:02:20.904 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@cdf677b
2025-02-16 01:02:20.904 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5f9faf32
2025-02-16 01:02:20.904 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 01:02:20.905 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2025-02-16 01:02:20.920 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 01:02:20.926 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 01:02:20.927 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 01:02:20.929 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 01:02:20.941 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 01:02:20.942 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 01:02:20.942 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:02:20.948 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 01:02:21.291 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:02:30.113 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 01:02:30.270 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 01:02:30.358 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 01:02:30.384 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 48BDBFCD767D44D399DA66EEE1AAC866
2025-02-16 01:02:30.386 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@95cc3b3]
2025-02-16 01:02:30.386 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 01:02:30.400 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:02:30.401 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:02:30.401 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:02:30.401 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:02:30.408 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:02:30.418 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:02:30.583 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:02:30.610 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 01:02:30.612 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 01:02:30.612 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 01:02:30.618 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 01:02:30.618 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:02:30.619 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 01:02:30.620 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 01:02:30.621 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:02:30.630 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:02:30.630 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:02:30.632 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:02:30.632 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:02:30.639 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 01:02:30.641 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 01:02:30.641 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 01:02:30.642 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:02:30.640 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 01:02:30.645 [http-nio-8081-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:02:30.644 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 01:02:30.646 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 01:02:30.647 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:02:30.651 [http-nio-8081-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:02:30.651 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:02:30.652 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:02:30.673 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:02:30.673 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:02:30.675 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@1640643c]
2025-02-16 01:02:30.675 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@7d73aa64]
2025-02-16 01:02:30.682 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 01:02:30.682 [http-nio-8081-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 01:02:30.682 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:02:30.682 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:02:30.682 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:02:30.682 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:04:33.000 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 01:04:33.004 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 01:04:33.029 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:04:33.036 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:04:33.046 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:04:35.589 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78825 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:04:35.591 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:04:35.598 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:04:35.691 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:04:35.691 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:04:36.184 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:04:36.219 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2025-02-16 01:04:36.520 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:04:36.528 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:04:36.529 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:04:36.551 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:04:36.551 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 859 ms
2025-02-16 01:04:36.670 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:04:36.703 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:04:36.725 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:04:36.871 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:04:36.887 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:04:36.984 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3c874f08
2025-02-16 01:04:36.985 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:04:37.039 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:04:37.456 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:04:37.518 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:04:37.661 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:04:38.053 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 01:04:38.068 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 01:04:38.069 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:04:38.074 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:04:38.077 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:04:38.079 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 01:04:38.113 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 01:04:38.175 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 01:04:38.213 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 01:04:38.234 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 01:04:38.266 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 01:04:38.306 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 01:04:38.356 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 01:04:38.373 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 01:04:38.379 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.375 seconds (process running for 4.396)
2025-02-16 01:04:43.248 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 01:04:43.249 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 01:04:43.249 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 01:04:43.249 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 01:04:43.249 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 01:04:43.254 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7a700abc
2025-02-16 01:04:43.255 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@213a3e3d
2025-02-16 01:04:43.255 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 01:04:43.255 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-02-16 01:04:43.268 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:04:43.272 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:04:43.273 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:04:43.275 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:04:43.284 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:04:43.294 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:04:43.478 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:04:43.512 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 01:04:43.512 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 01:04:43.513 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 01:04:43.513 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 01:04:43.513 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 01:04:43.513 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 01:04:43.514 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:04:43.514 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:04:43.523 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:04:43.523 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:04:43.524 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:04:43.525 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:04:43.530 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 01:04:43.530 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 01:04:43.531 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 01:04:43.531 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 01:04:43.531 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 01:04:43.531 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 01:04:43.533 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:04:43.534 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:04:43.536 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:04:43.536 [http-nio-8081-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:04:43.540 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:04:43.539 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:04:43.570 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:04:43.570 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:04:43.571 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@3c99cc34]
2025-02-16 01:04:43.571 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@4a53a057]
2025-02-16 01:04:43.579 [http-nio-8081-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 01:04:43.579 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 01:04:43.580 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:04:43.580 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:04:43.580 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:04:43.580 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:04:53.607 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 01:04:53.610 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 01:04:53.610 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 01:04:53.611 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 01:04:53.627 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 01:04:53.629 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 01:04:53.629 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:04:53.637 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 01:04:53.659 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:04:56.721 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 01:04:56.723 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:04:56.724 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 01:04:56.725 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 01:04:56.726 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 01:04:56.758 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:04:56.770 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:04:56.782 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:04:56.792 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 01:04:56.794 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@mail.ru', firstName='User', lastName='User', age=25}, User{id=2, email='admi (truncated)...]
2025-02-16 01:04:56.813 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:09:57.018 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 01:09:57.034 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 01:09:57.040 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:09:57.054 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:09:57.077 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:09:58.975 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 78926 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:09:58.975 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:09:58.976 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:09:59.014 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:09:59.014 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:09:59.401 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:09:59.432 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 01:09:59.763 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:09:59.773 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:09:59.774 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:09:59.798 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:09:59.798 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 784 ms
2025-02-16 01:09:59.912 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:09:59.940 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:09:59.957 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:10:00.120 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:10:00.135 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:10:00.247 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3790a8db
2025-02-16 01:10:00.248 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:10:00.300 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:10:00.828 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:10:00.891 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:10:01.075 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:10:01.476 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 01:10:01.508 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 01:10:01.512 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:10:01.524 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:10:01.528 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:10:01.530 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 01:10:01.576 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 01:10:01.653 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 01:10:01.700 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 01:10:01.749 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 01:10:01.815 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 01:10:01.857 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 01:10:01.904 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 01:10:01.926 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 01:10:01.935 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.37 seconds (process running for 3.775)
2025-02-16 01:10:11.338 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 01:10:11.338 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 01:10:11.339 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 01:10:11.339 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 01:10:11.339 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 01:10:11.341 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@70f04ef0
2025-02-16 01:10:11.342 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@53fe9e8e
2025-02-16 01:10:11.342 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 01:10:11.342 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 01:10:11.358 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 01:10:11.363 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 01:10:11.364 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 01:10:11.366 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 01:10:11.397 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 01:10:11.398 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 01:10:11.399 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=48BDBFCD767D44D399DA66EEE1AAC866], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:10:11.439 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 01:10:11.828 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:10:19.879 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 01:10:20.037 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 01:10:20.132 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 01:10:20.148 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from DB05B58656877C91D4D0FECE70AD9A9D
2025-02-16 01:10:20.149 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5002f216]
2025-02-16 01:10:20.149 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 01:10:20.156 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:10:20.157 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:10:20.157 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:10:20.157 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:10:20.162 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:10:20.175 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:10:20.333 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:10:20.360 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 01:10:20.360 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 01:10:20.361 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 01:10:20.361 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 01:10:20.361 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 01:10:20.361 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 01:10:20.361 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:10:20.361 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:10:20.373 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:10:20.375 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:10:20.375 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:10:20.376 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:10:20.383 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 01:10:20.383 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 01:10:20.383 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 01:10:20.385 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 01:10:20.386 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 01:10:20.386 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 01:10:20.386 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:10:20.387 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:10:20.390 [http-nio-8081-exec-9] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:10:20.390 [http-nio-8081-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:10:20.394 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:10:20.394 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:10:20.425 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:10:20.425 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:10:20.426 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@7bf576db]
2025-02-16 01:10:20.426 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@6f374d4b]
2025-02-16 01:10:20.438 [http-nio-8081-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 01:10:20.438 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 01:10:20.438 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:10:20.438 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:10:20.438 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:10:20.439 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:19:38.191 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 01:19:38.196 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 01:19:38.197 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 01:19:38.197 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 01:19:38.204 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 01:19:38.205 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 01:19:38.205 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:19:38.213 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 01:19:38.628 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:19:40.015 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 01:19:40.025 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:19:40.026 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 01:19:40.027 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 01:19:40.027 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 01:19:40.077 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:19:40.094 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:19:40.098 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:19:40.110 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 01:19:40.114 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@mail.ru', firstName='User', lastName='User', age=25}, User{id=2, email='admi (truncated)...]
2025-02-16 01:19:40.138 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:19:43.899 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/1
2025-02-16 01:19:43.912 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/1
2025-02-16 01:19:43.913 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/1", parameters={}
2025-02-16 01:19:43.914 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getUserById(Long)
2025-02-16 01:19:43.956 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 01:19:43.965 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 01:19:43.965 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=1, email='user@mail.ru', firstName='User', lastName='User', age=25}]
2025-02-16 01:19:43.966 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:19:43.967 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:26:16.996 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 01:26:17.003 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 01:26:17.023 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:26:17.036 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:26:17.040 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:26:19.464 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79176 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:26:19.465 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:26:19.465 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:26:19.501 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:26:19.502 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:26:19.880 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:26:19.907 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 2 JPA repository interfaces.
2025-02-16 01:26:20.192 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:26:20.199 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:26:20.199 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:26:20.219 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:26:20.219 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 717 ms
2025-02-16 01:26:20.323 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:26:20.349 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:26:20.366 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:26:20.506 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:26:20.521 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:26:20.615 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@dfc7d36
2025-02-16 01:26:20.616 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:26:20.668 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:26:21.107 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:26:21.173 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:26:21.288 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:26:21.698 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 01:26:21.716 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 01:26:21.718 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:26:21.722 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:26:21.726 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:26:21.729 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 01:26:21.764 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 01:26:21.824 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 01:26:21.860 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 01:26:21.881 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 01:26:21.911 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 01:26:21.954 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 01:26:21.997 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 01:26:22.016 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 01:26:22.022 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.905 seconds (process running for 3.25)
2025-02-16 01:26:35.058 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 01:26:35.059 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 01:26:35.059 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 01:26:35.059 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 01:26:35.059 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 01:26:35.061 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@49ed26d5
2025-02-16 01:26:35.062 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@24e4af93
2025-02-16 01:26:35.062 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 01:26:35.062 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 01:26:35.076 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:26:35.082 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:26:35.083 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:26:35.085 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:26:35.095 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:26:35.106 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:26:35.331 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:26:35.374 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 01:26:35.374 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 01:26:35.375 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 01:26:35.375 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 01:26:35.375 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 01:26:35.375 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 01:26:35.376 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:26:35.376 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:26:35.387 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:26:35.387 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:26:35.389 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:26:35.389 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:26:35.393 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 01:26:35.393 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 01:26:35.393 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 01:26:35.393 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 01:26:35.393 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 01:26:35.393 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 01:26:35.393 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:26:35.393 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:26:35.394 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:26:35.394 [http-nio-8081-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:26:35.398 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:26:35.398 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:26:35.423 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:26:35.423 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:26:35.424 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@224fac80]
2025-02-16 01:26:35.424 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@61014f25]
2025-02-16 01:26:35.432 [http-nio-8081-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 01:26:35.431 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 01:26:35.432 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:26:35.432 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:26:35.432 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:26:35.432 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:30:02.796 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:30:02.798 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:30:02.800 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:30:02.801 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:30:02.802 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:30:02.807 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:30:02.842 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:30:02.878 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 01:30:02.879 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 01:30:02.879 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 01:30:02.880 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 01:30:02.880 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:30:02.880 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 01:30:02.880 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 01:30:02.883 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:30:02.894 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:30:02.894 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:30:02.897 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:30:02.897 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:30:02.915 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 01:30:02.916 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 01:30:02.916 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 01:30:02.917 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 01:30:02.919 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 01:30:02.920 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:30:02.920 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 01:30:02.921 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:30:02.933 [http-nio-8081-exec-8] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:30:02.934 [http-nio-8081-exec-9] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:30:02.937 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:30:02.938 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:30:02.939 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:30:02.939 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:30:02.941 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@50fe1fff]
2025-02-16 01:30:02.941 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@1d610d7b]
2025-02-16 01:30:02.942 [http-nio-8081-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 01:30:02.942 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:30:02.942 [http-nio-8081-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 01:30:02.944 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:30:02.943 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:30:02.944 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:34:05.152 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 01:34:05.166 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 01:34:05.176 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:34:05.183 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:34:05.196 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:34:07.508 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79273 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:34:07.509 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:34:07.509 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:34:07.552 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:34:07.553 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:34:07.939 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:34:07.967 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 01:34:08.260 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:34:08.267 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:34:08.268 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:34:08.290 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:34:08.290 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 737 ms
2025-02-16 01:34:08.392 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:34:08.421 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:34:08.436 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:34:08.573 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:34:08.587 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:34:08.690 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@27da93d0
2025-02-16 01:34:08.691 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:34:08.744 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:34:09.160 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:34:09.228 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:34:09.343 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:34:09.737 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 01:34:09.752 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 01:34:09.754 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:34:09.758 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:34:09.762 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:34:09.764 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 01:34:09.802 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 01:34:09.860 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 01:34:09.893 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 01:34:09.912 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 01:34:09.942 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 01:34:09.980 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 01:34:10.021 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 01:34:10.039 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 01:34:10.048 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.924 seconds (process running for 3.259)
2025-02-16 01:34:13.458 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 01:34:13.458 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 01:34:13.459 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 01:34:13.459 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 01:34:13.459 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 01:34:13.460 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@b4079fc
2025-02-16 01:34:13.461 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@935e50a
2025-02-16 01:34:13.461 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 01:34:13.461 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 01:34:13.484 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/1
2025-02-16 01:34:13.488 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/1
2025-02-16 01:34:13.489 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/1", parameters={}
2025-02-16 01:34:13.491 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getUserById(Long)
2025-02-16 01:34:13.514 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 01:34:13.543 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 01:34:13.545 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=1, email='user@mail.ru', firstName='User', lastName='User', age=25}]
2025-02-16 01:34:13.558 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:34:13.559 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:03.395 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 01:35:03.403 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 01:35:03.408 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:35:03.416 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:35:03.424 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:35:05.621 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79285 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:35:05.622 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:35:05.623 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:35:05.670 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:35:05.671 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:35:06.047 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:35:06.075 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 01:35:06.352 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:35:06.359 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:35:06.360 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:35:06.379 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:35:06.379 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 708 ms
2025-02-16 01:35:06.492 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:35:06.522 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:35:06.538 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:35:06.684 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:35:06.700 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:35:06.786 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1635fde1
2025-02-16 01:35:06.787 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:35:06.840 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:35:07.274 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:35:07.340 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:35:07.563 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:35:07.929 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 01:35:07.945 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 01:35:07.946 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:35:07.950 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:35:07.954 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:35:07.955 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 01:35:07.994 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 01:35:08.055 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 01:35:08.093 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 01:35:08.114 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 01:35:08.146 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 01:35:08.186 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 01:35:08.230 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 01:35:08.251 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 01:35:08.256 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.999 seconds (process running for 3.325)
2025-02-16 01:35:10.722 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 01:35:10.724 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 01:35:10.725 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 01:35:10.725 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 01:35:10.725 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 01:35:10.727 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@11a98f17
2025-02-16 01:35:10.728 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@26d055bf
2025-02-16 01:35:10.728 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 01:35:10.728 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 01:35:10.740 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/1
2025-02-16 01:35:10.745 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/1
2025-02-16 01:35:10.746 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/1", parameters={}
2025-02-16 01:35:10.747 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getUserById(Long)
2025-02-16 01:35:10.768 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 01:35:10.801 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 01:35:10.803 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=1, email='user@mail.ru', firstName='User', lastName='User', age=25}]
2025-02-16 01:35:10.816 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:35:10.817 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:37.254 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:35:37.260 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:35:37.262 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:35:37.263 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:35:37.280 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:37.302 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:35:37.522 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:35:37.533 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 01:35:37.533 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 01:35:37.533 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 01:35:37.533 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 01:35:37.533 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 01:35:37.533 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 01:35:37.533 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:35:37.533 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:35:37.535 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:35:37.535 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:35:37.536 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:37.537 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:37.541 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 01:35:37.541 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 01:35:37.541 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 01:35:37.542 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 01:35:37.542 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 01:35:37.542 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 01:35:37.542 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:35:37.542 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:35:37.545 [http-nio-8081-exec-7] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:35:37.545 [http-nio-8081-exec-8] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:35:37.547 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:35:37.547 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:35:37.551 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:35:37.551 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:35:37.551 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@4ad3c56]
2025-02-16 01:35:37.551 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@5a80cfbe]
2025-02-16 01:35:37.552 [http-nio-8081-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 01:35:37.552 [http-nio-8081-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 01:35:37.552 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:35:37.552 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:35:37.552 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:37.552 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:46.234 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:35:46.239 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:35:46.240 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:35:46.241 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:35:46.243 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:46.249 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:35:46.303 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:35:46.338 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 01:35:46.338 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 01:35:46.339 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 01:35:46.339 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 01:35:46.339 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 01:35:46.339 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 01:35:46.340 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:35:46.342 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:35:46.344 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:35:46.344 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:35:46.345 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:46.353 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:46.360 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 01:35:46.360 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 01:35:46.361 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 01:35:46.361 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 01:35:46.361 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 01:35:46.361 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 01:35:46.362 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:35:46.362 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:35:46.370 [http-nio-8081-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:35:46.370 [http-nio-8081-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:35:46.371 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:35:46.371 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:35:46.372 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:35:46.372 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:35:46.374 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@1b3e586c]
2025-02-16 01:35:46.374 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@2aff0243]
2025-02-16 01:35:46.375 [http-nio-8081-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 01:35:46.375 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 01:35:46.377 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:35:46.377 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:35:46.377 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:46.377 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:35:53.790 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 01:35:53.795 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 01:35:53.799 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 01:35:53.817 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:35:53.834 [http-nio-8081-exec-2] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:35:53.835 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:35:53.837 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 01:35:53.837 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@7a3bb128]
2025-02-16 01:35:53.838 [http-nio-8081-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 01:35:53.839 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:35:53.840 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:36:27.105 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 01:36:27.112 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:36:27.113 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 01:36:27.113 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 01:36:27.113 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 01:36:27.125 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:36:27.131 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:36:27.133 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:36:27.137 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 01:36:27.138 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@mail.ru', firstName='User', lastName='User', age=25}, User{id=2, email='admi (truncated)...]
2025-02-16 01:36:27.140 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:37:09.293 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 01:37:09.296 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 01:37:09.296 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 01:37:09.296 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 01:37:09.312 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 01:37:09.314 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 01:37:09.314 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=DB05B58656877C91D4D0FECE70AD9A9D], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:37:09.321 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 01:37:09.390 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:37:16.987 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 01:37:17.126 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 01:37:17.207 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 01:37:17.227 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from C3190D33E8797E1C27EC963999D7199E
2025-02-16 01:37:17.228 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C3190D33E8797E1C27EC963999D7199E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@a8359ab]
2025-02-16 01:37:17.229 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C3190D33E8797E1C27EC963999D7199E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 01:37:17.235 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:37:17.238 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:37:17.239 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:37:17.240 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:37:17.241 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C3190D33E8797E1C27EC963999D7199E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:37:17.245 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:37:17.302 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:37:17.338 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 01:37:17.338 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 01:37:17.339 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 01:37:17.339 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 01:37:17.339 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 01:37:17.339 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 01:37:17.339 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:37:17.339 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:37:17.342 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:37:17.342 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C3190D33E8797E1C27EC963999D7199E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:37:17.343 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:37:17.364 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C3190D33E8797E1C27EC963999D7199E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:37:17.380 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 01:37:17.380 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 01:37:17.381 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 01:37:17.384 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:37:17.389 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 01:37:17.389 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 01:37:17.389 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 01:37:17.391 [http-nio-8081-exec-3] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:37:17.391 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:37:17.392 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:37:17.394 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:37:17.394 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:37:17.395 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:37:17.395 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:37:17.395 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@6720204b]
2025-02-16 01:37:17.395 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@393e896a]
2025-02-16 01:37:17.395 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 01:37:17.397 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:37:17.398 [http-nio-8081-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 01:37:17.399 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C3190D33E8797E1C27EC963999D7199E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:37:17.399 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:37:17.399 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C3190D33E8797E1C27EC963999D7199E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:39:21.282 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 01:39:21.294 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=C3190D33E8797E1C27EC963999D7199E], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:39:21.295 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 01:39:21.295 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 01:39:21.296 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 01:39:21.312 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:39:21.318 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:39:21.320 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 01:39:21.328 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 01:39:21.329 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@mail.ru', firstName='User', lastName='User', age=25}, User{id=2, email='admi (truncated)...]
2025-02-16 01:39:21.333 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:46:29.970 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 01:46:29.983 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 01:46:29.993 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:46:30.018 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:46:30.031 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:46:32.789 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79456 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:46:32.790 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:46:32.791 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:46:32.838 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:46:32.839 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:46:33.236 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:46:33.267 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-02-16 01:46:33.574 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:46:33.583 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:46:33.583 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:46:33.609 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:46:33.610 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 771 ms
2025-02-16 01:46:33.636 [restartedMain] ERROR o.a.catalina.session.StandardManager - Exception loading sessions from persistent storage
java.io.InvalidClassException: ru.kata.spring.boot_security.demo.model.User; local class incompatible: stream classdesc serialVersionUID = 1035053657643310612, local class serialVersionUID = -875599695918231893
	at java.base/java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:604)
	at java.base/java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:2072)
	at java.base/java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1915)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2246)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1750)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2625)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2472)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2278)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1750)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2625)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2472)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2278)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1750)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:528)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:486)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1198)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:831)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:345)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4453)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:148)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:148)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:415)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:516)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:222)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
2025-02-16 01:46:33.709 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:46:33.742 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:46:33.759 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:46:33.967 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:46:33.981 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:46:34.073 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7719465
2025-02-16 01:46:34.074 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:46:34.138 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:46:34.556 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:46:34.631 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:46:34.777 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:46:35.154 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 01:46:35.168 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 01:46:35.174 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 01:46:35.503 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-02-16 01:46:35.503 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
2025-02-16 01:46:35.509 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
2025-02-16 01:46:35.509 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:46:35.511 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:46:35.515 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:46:35.517 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-02-16 01:46:35.524 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-02-16 01:46:35.532 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:423)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; SQL [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; constraint [role.UK8sewwnpamngi6b1dwaa88askk]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy4/jdk.proxy4.$Proxy135.save(Unknown Source)
	at ru.kata.spring.boot_security.demo.service.RoleServiceImpl.add(RoleServiceImpl.java:21)
	at ru.kata.spring.boot_security.demo.initialization.InitDB.fillDb(InitDB.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 23 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1245)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy4/jdk.proxy4.$Proxy129.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:627)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:752)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 35 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:109)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:988)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1166)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1101)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1467)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1084)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 81 common frames omitted
2025-02-16 01:47:18.297 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79496 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:47:18.299 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:47:18.299 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:47:18.337 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:47:18.337 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:47:18.714 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:47:18.746 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 01:47:19.049 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:47:19.056 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:47:19.056 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:47:19.076 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:47:19.076 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 739 ms
2025-02-16 01:47:19.155 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:47:19.188 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:47:19.204 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:47:19.356 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:47:19.372 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:47:19.451 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7f975ba6
2025-02-16 01:47:19.452 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:47:19.505 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:47:19.947 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:47:19.982 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 01:47:20.003 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        id bigint not null auto_increment,
        age integer,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 01:47:20.008 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role_id integer not null,
        primary key (user_id, role_id)
    ) engine=InnoDB
2025-02-16 01:47:20.012 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       drop index UK8sewwnpamngi6b1dwaa88askk
2025-02-16 01:47:20.337 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 01:47:20.354 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       drop index UKob8kqyqqgmefl0aco34akdtpe
2025-02-16 01:47:20.356 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 01:47:20.367 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 01:47:20.380 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 01:47:20.392 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:47:20.549 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:47:20.935 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 01:47:20.954 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 01:47:20.966 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 01:47:20.968 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 01:47:20.969 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 01:47:20.970 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-02-16 01:47:20.970 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
2025-02-16 01:47:20.973 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
2025-02-16 01:47:20.973 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:47:20.975 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:47:20.979 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:47:20.981 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-02-16 01:47:20.987 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-02-16 01:47:20.995 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:423)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; SQL [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; constraint [role.UK8sewwnpamngi6b1dwaa88askk]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy4/jdk.proxy4.$Proxy135.save(Unknown Source)
	at ru.kata.spring.boot_security.demo.service.RoleServiceImpl.add(RoleServiceImpl.java:21)
	at ru.kata.spring.boot_security.demo.initialization.InitDB.fillDb(InitDB.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 23 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1245)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy4/jdk.proxy4.$Proxy129.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:627)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:752)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 35 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:109)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:988)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1166)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1101)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1467)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1084)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 81 common frames omitted
2025-02-16 01:51:48.906 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79602 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:51:48.907 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:51:48.908 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:51:48.953 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:51:48.953 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:51:49.334 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:51:49.363 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 01:51:49.644 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:51:49.652 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:51:49.652 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:51:49.675 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:51:49.675 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 722 ms
2025-02-16 01:51:49.772 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:51:49.801 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:51:49.819 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:51:49.988 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:51:50.002 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:51:50.104 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@459c5eb0
2025-02-16 01:51:50.105 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:51:50.158 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:51:50.593 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:51:50.663 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:51:50.787 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:51:51.200 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 01:51:51.214 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 01:51:51.215 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 01:51:51.330 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 01:51:51.342 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 01:51:51.357 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 01:51:51.367 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@mail.ru
2025-02-16 01:51:51.446 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 01:51:51.448 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 01:51:51.450 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 01:51:51.452 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@mail.ru
2025-02-16 01:51:51.496 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 01:51:51.563 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 01:51:51.599 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 01:51:51.619 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 01:51:51.649 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 01:51:51.694 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 01:51:51.739 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 01:51:51.761 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 01:51:51.766 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.267 seconds (process running for 3.627)
2025-02-16 01:52:01.811 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 01:52:01.812 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 01:52:01.812 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 01:52:01.813 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 01:52:01.813 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 01:52:01.815 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@48b283d6
2025-02-16 01:52:01.816 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@bf880a8
2025-02-16 01:52:01.816 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 01:52:01.816 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 01:52:01.829 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:52:01.847 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:52:01.848 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:52:01.850 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:52:01.859 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 01:52:01.866 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:52:01.956 [http-nio-8081-exec-1] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8081-exec-1] Exception processing template "users": An error happened during template parsing (template: "class path resource [templates/users.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 01:52:01.958 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Error rendering view [org.thymeleaf.spring6.view.ThymeleafView@6f95046d]
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 01:52:01.958 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
2025-02-16 01:52:01.959 [http-nio-8081-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-02-16 01:52:01.962 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 01:52:01.963 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 01:52:01.963 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 01:52:01.963 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-16 01:52:01.972 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-16 01:52:01.977 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-02-16 01:52:01.977 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 01:52:07.392 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:52:07.395 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:52:07.396 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:52:07.397 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:52:07.398 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 01:52:07.408 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:52:07.415 [http-nio-8081-exec-3] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8081-exec-3] Exception processing template "users": An error happened during template parsing (template: "class path resource [templates/users.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 01:52:07.416 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Error rendering view [org.thymeleaf.spring6.view.ThymeleafView@321c665a]
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 01:52:07.416 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
2025-02-16 01:52:07.417 [http-nio-8081-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-02-16 01:52:07.418 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 01:52:07.418 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 01:52:07.418 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 01:52:07.418 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-16 01:52:07.423 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-16 01:52:07.424 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-02-16 01:52:07.424 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 01:52:09.755 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 01:52:09.756 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 01:52:09.757 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 01:52:09.757 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 01:52:09.772 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 01:52:09.778 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 01:52:09.778 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 01:52:09.793 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 01:52:09.826 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:52:17.730 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 01:52:17.860 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 01:52:17.951 [http-nio-8081-exec-9] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-02-16 01:52:17.975 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 01:52:17.985 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 01:52:18.045 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:52:36.558 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 01:52:36.573 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 01:52:36.676 [http-nio-8081-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 01:52:36.677 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 9655CD79717E6D512A4EF9CEADB04354
2025-02-16 01:52:36.679 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9655CD79717E6D512A4EF9CEADB04354], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@4539d487]
2025-02-16 01:52:36.679 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9655CD79717E6D512A4EF9CEADB04354], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 01:52:36.684 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 01:52:36.684 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 01:52:36.684 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 01:52:36.685 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 01:52:36.685 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9655CD79717E6D512A4EF9CEADB04354], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:52:36.698 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 01:52:36.878 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:52:36.901 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 01:52:36.905 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 01:52:36.905 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 01:52:36.905 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 01:52:36.906 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 01:52:36.906 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 01:52:36.907 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:52:36.907 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:52:37.005 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:52:37.005 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 01:52:37.024 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9655CD79717E6D512A4EF9CEADB04354], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:52:37.005 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9655CD79717E6D512A4EF9CEADB04354], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:52:37.027 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 01:52:37.027 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 01:52:37.028 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 01:52:37.027 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 01:52:37.029 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:52:37.029 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 01:52:37.029 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 01:52:37.030 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 01:52:37.030 [http-nio-8081-exec-8] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:52:37.031 [http-nio-8081-exec-6] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 01:52:37.037 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:52:37.037 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 01:52:37.117 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:52:37.117 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 01:52:37.119 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@a65a0f9]
2025-02-16 01:52:37.119 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@3e3615f6]
2025-02-16 01:52:37.131 [http-nio-8081-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 01:52:37.131 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:52:37.131 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9655CD79717E6D512A4EF9CEADB04354], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:52:37.131 [http-nio-8081-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 01:52:37.133 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 01:52:37.133 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@mail.ru', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=9655CD79717E6D512A4EF9CEADB04354], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 01:55:54.716 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 01:55:54.725 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 01:55:54.731 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:55:54.741 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:55:54.754 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:55:56.954 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79648 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:55:56.955 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:55:56.956 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:55:56.992 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:55:56.992 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:55:57.385 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:55:57.414 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 01:55:57.724 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:55:57.732 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:55:57.733 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:55:57.754 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:55:57.754 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 762 ms
2025-02-16 01:55:57.782 [restartedMain] ERROR o.a.catalina.session.StandardManager - Exception loading sessions from persistent storage
java.io.InvalidClassException: ru.kata.spring.boot_security.demo.model.User; local class incompatible: stream classdesc serialVersionUID = 1035053657643310612, local class serialVersionUID = -875599695918231893
	at java.base/java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:604)
	at java.base/java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:2072)
	at java.base/java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1915)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2246)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1750)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2625)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2472)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2278)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1750)
	at java.base/java.io.ObjectInputStream$FieldValues.<init>(ObjectInputStream.java:2625)
	at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2472)
	at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2278)
	at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1750)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:528)
	at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:486)
	at org.apache.catalina.session.StandardSession.doReadObject(StandardSession.java:1198)
	at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:831)
	at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:210)
	at org.apache.catalina.session.StandardManager.load(StandardManager.java:156)
	at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:345)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4453)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:148)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:148)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:415)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:437)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:516)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:222)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:188)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:162)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
2025-02-16 01:55:57.853 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:55:57.882 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:55:57.898 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:55:58.066 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:55:58.082 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:55:58.165 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5be9178b
2025-02-16 01:55:58.166 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:55:58.222 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:55:58.643 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:55:58.705 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:55:58.822 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:55:59.191 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 01:55:59.516 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-02-16 01:55:59.516 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
2025-02-16 01:55:59.521 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
2025-02-16 01:55:59.522 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:55:59.523 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:55:59.527 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:55:59.529 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-02-16 01:55:59.536 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-02-16 01:55:59.545 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:423)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; SQL [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; constraint [role.UK8sewwnpamngi6b1dwaa88askk]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy4/jdk.proxy4.$Proxy135.save(Unknown Source)
	at ru.kata.spring.boot_security.demo.service.RoleServiceImpl.add(RoleServiceImpl.java:21)
	at ru.kata.spring.boot_security.demo.initialization.InitDB.fillDb(InitDB.java:38)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 23 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1245)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy4/jdk.proxy4.$Proxy129.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:627)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:752)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 35 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:109)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:988)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1166)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1101)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1467)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1084)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 81 common frames omitted
2025-02-16 01:57:00.684 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79675 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:57:00.685 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:57:00.686 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:57:00.716 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:57:00.716 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:57:01.065 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:57:01.093 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 01:57:01.382 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:57:01.390 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:57:01.390 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:57:01.410 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:57:01.410 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 694 ms
2025-02-16 01:57:01.500 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:57:01.530 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:57:01.544 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:57:01.686 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:57:01.699 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:57:01.776 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63bcf9e8
2025-02-16 01:57:01.776 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:57:01.822 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:57:02.232 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:57:02.285 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:57:02.424 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:57:02.811 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 01:57:03.139 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-02-16 01:57:03.139 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
2025-02-16 01:57:03.143 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
2025-02-16 01:57:03.143 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:57:03.145 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:57:03.148 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:57:03.150 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-02-16 01:57:03.157 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-02-16 01:57:03.167 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:423)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; SQL [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; constraint [role.UK8sewwnpamngi6b1dwaa88askk]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy4/jdk.proxy4.$Proxy135.save(Unknown Source)
	at ru.kata.spring.boot_security.demo.service.RoleServiceImpl.add(RoleServiceImpl.java:21)
	at ru.kata.spring.boot_security.demo.initialization.InitDB.fillDb(InitDB.java:38)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 23 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1245)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy4/jdk.proxy4.$Proxy129.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:627)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:752)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 35 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:109)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:988)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1166)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1101)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1467)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1084)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 81 common frames omitted
2025-02-16 01:57:33.734 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79688 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:57:33.735 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:57:33.736 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:57:33.770 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:57:33.770 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:57:34.147 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:57:34.177 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 01:57:34.462 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:57:34.470 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:57:34.470 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:57:34.494 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:57:34.494 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 724 ms
2025-02-16 01:57:34.576 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:57:34.603 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:57:34.616 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:57:34.758 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:57:34.773 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:57:34.851 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1f89a014
2025-02-16 01:57:34.852 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:57:34.895 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:57:35.315 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:57:35.324 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 01:57:35.362 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 01:57:35.367 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 01:57:35.372 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 01:57:35.375 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 01:57:35.390 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 01:57:35.396 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 01:57:35.399 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 01:57:35.404 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 01:57:35.414 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 01:57:35.418 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 01:57:35.428 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 01:57:35.442 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:57:35.578 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:57:35.978 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 01:57:35.997 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 01:57:36.003 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 01:57:36.010 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 01:57:36.048 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 01:57:36.110 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 01:57:36.147 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 01:57:36.167 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 01:57:36.196 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 01:57:36.235 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 01:57:36.275 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 01:57:36.296 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 01:57:36.302 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.94 seconds (process running for 3.277)
2025-02-16 01:57:44.570 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 01:57:44.571 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 01:57:44.572 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 01:57:44.573 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 01:57:44.573 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 01:57:44.575 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@28303dd7
2025-02-16 01:57:44.577 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4d0bde85
2025-02-16 01:57:44.577 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 01:57:44.577 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-02-16 01:57:44.592 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 01:57:44.598 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 01:57:44.600 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 01:57:44.601 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 01:57:44.614 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 01:57:44.615 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 01:57:44.615 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 01:57:44.623 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 01:57:44.676 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:57:52.429 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 01:57:52.604 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 01:57:52.704 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 01:57:52.718 [http-nio-8081-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 01:57:52.726 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 01:57:52.774 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:58:10.021 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 01:58:10.050 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 01:58:10.143 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 01:58:10.143 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 01:58:10.151 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 01:58:10.171 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:58:59.329 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 01:58:59.345 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 01:58:59.451 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 01:58:59.452 [http-nio-8081-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 01:58:59.460 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 01:58:59.496 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:59:21.057 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 01:59:21.075 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 01:59:21.182 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 01:59:21.182 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 01:59:21.187 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 01:59:21.218 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:59:24.282 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 01:59:24.292 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 01:59:24.405 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 01:59:24.406 [http-nio-8081-exec-5] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 01:59:24.411 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 01:59:24.446 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 01:59:46.669 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 01:59:46.675 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 01:59:46.683 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:59:46.686 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 01:59:46.724 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 01:59:46.728 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 01:59:46.732 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 01:59:46.736 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 01:59:46.750 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 01:59:46.761 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 01:59:49.174 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79725 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 01:59:49.175 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 01:59:49.175 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 01:59:49.216 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 01:59:49.216 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 01:59:49.681 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 01:59:49.712 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-02-16 01:59:50.043 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 01:59:50.051 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 01:59:50.051 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 01:59:50.073 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 01:59:50.073 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 856 ms
2025-02-16 01:59:50.177 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 01:59:50.208 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 01:59:50.225 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 01:59:50.367 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 01:59:50.383 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 01:59:50.469 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2f8c0b0a
2025-02-16 01:59:50.470 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 01:59:50.516 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 01:59:50.944 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 01:59:50.971 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 01:59:50.991 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        id bigint not null auto_increment,
        age integer,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 01:59:50.995 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role_id integer not null,
        primary key (user_id, role_id)
    ) engine=InnoDB
2025-02-16 01:59:50.998 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       drop index UK8sewwnpamngi6b1dwaa88askk
2025-02-16 01:59:51.319 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 01:59:51.339 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       drop index UKob8kqyqqgmefl0aco34akdtpe
2025-02-16 01:59:51.341 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 01:59:51.348 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 01:59:51.360 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 01:59:51.375 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 01:59:51.526 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 01:59:51.939 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 01:59:51.966 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 01:59:51.975 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 01:59:51.983 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 01:59:52.026 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 01:59:52.090 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 01:59:52.130 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 01:59:52.158 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 01:59:52.202 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 01:59:52.263 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 01:59:52.301 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 01:59:52.315 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 01:59:52.321 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.69 seconds (process running for 4.41)
2025-02-16 02:00:06.129 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:00:06.131 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:00:06.131 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:00:06.131 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:00:06.131 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:00:06.134 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@243ab55d
2025-02-16 02:00:06.134 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@78acc1d
2025-02-16 02:00:06.134 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:00:06.134 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 02:00:06.145 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:00:06.284 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:00:06.377 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:00:06.380 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:00:06.410 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:00:06.464 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:00:38.830 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:00:38.862 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:00:38.956 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:00:38.957 [http-nio-8081-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:00:38.963 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:00:38.997 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:00:55.741 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:00:55.747 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:00:55.756 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:00:55.762 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:00:55.771 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:00:58.993 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79743 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:00:58.993 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:00:58.994 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:00:59.032 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:00:59.032 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:00:59.421 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:00:59.448 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 02:00:59.730 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:00:59.737 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:00:59.737 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:00:59.757 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:00:59.757 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 724 ms
2025-02-16 02:00:59.858 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:00:59.887 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:00:59.903 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:01:00.053 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:01:00.067 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:01:00.155 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@44d57c1
2025-02-16 02:01:00.156 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:01:00.207 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:01:00.643 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:01:00.712 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:01:00.856 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:01:01.205 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:01:01.530 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-02-16 02:01:01.531 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
2025-02-16 02:01:01.537 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
2025-02-16 02:01:01.537 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:01:01.539 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:01:01.542 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:01:01.544 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-02-16 02:01:01.553 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-02-16 02:01:01.562 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:423)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; SQL [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; constraint [role.UK8sewwnpamngi6b1dwaa88askk]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy4/jdk.proxy4.$Proxy135.save(Unknown Source)
	at ru.kata.spring.boot_security.demo.service.RoleServiceImpl.add(RoleServiceImpl.java:21)
	at ru.kata.spring.boot_security.demo.initialization.InitDB.fillDb(InitDB.java:38)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 23 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1245)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy4/jdk.proxy4.$Proxy129.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:627)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:752)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 35 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:109)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:988)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1166)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1101)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1467)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1084)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 81 common frames omitted
2025-02-16 02:01:40.415 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79764 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:01:40.416 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:01:40.417 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:01:40.447 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:01:40.447 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:01:40.835 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:01:40.863 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 02:01:41.148 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:01:41.157 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:01:41.157 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:01:41.177 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:01:41.177 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 729 ms
2025-02-16 02:01:41.269 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:01:41.299 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:01:41.316 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:01:41.467 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:01:41.481 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:01:41.563 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6b7f50c9
2025-02-16 02:01:41.564 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:01:41.616 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:01:42.045 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:01:42.076 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:01:42.093 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        id bigint not null auto_increment,
        age integer,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:01:42.098 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role_id integer not null,
        primary key (user_id, role_id)
    ) engine=InnoDB
2025-02-16 02:01:42.104 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       drop index UK8sewwnpamngi6b1dwaa88askk
2025-02-16 02:01:42.458 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:01:42.472 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       drop index UKob8kqyqqgmefl0aco34akdtpe
2025-02-16 02:01:42.476 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:01:42.483 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:01:42.501 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:01:42.516 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:01:42.666 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:01:43.113 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:01:43.134 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:01:43.141 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:01:43.147 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:01:43.182 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:01:43.243 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:01:43.284 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:01:43.308 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:01:43.348 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:01:43.390 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:01:43.432 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:01:43.446 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:01:43.452 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.376 seconds (process running for 3.729)
2025-02-16 02:02:06.484 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:02:06.485 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:02:06.485 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:02:06.485 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:02:06.486 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:02:06.488 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2b4796a7
2025-02-16 02:02:06.488 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3e75d74
2025-02-16 02:02:06.489 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:02:06.489 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 02:02:06.501 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:02:06.638 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:02:06.731 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:02:06.734 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:02:06.744 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:02:06.818 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:02:12.748 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 02:02:12.754 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 02:02:12.761 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 02:02:12.764 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 02:02:12.795 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 02:02:12.796 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 02:02:12.797 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 02:02:12.803 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 02:02:13.333 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:02:16.986 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:02:17.014 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:02:17.123 [http-nio-8081-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:02:17.124 [http-nio-8081-exec-10] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:02:17.127 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:02:17.145 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:03:19.592 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:03:19.614 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:03:19.622 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:03:19.628 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:03:19.637 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:03:21.971 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79777 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:03:21.972 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:03:21.972 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:03:22.009 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:03:22.010 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:03:22.399 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:03:22.426 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 02:03:22.745 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:03:22.753 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:03:22.753 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:03:22.775 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:03:22.775 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 765 ms
2025-02-16 02:03:22.874 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:03:22.906 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:03:22.924 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:03:23.070 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:03:23.085 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:03:23.183 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@30782e34
2025-02-16 02:03:23.184 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:03:23.232 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:03:23.668 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:03:23.724 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:03:23.866 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:03:24.229 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:03:24.556 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-02-16 02:03:24.557 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
2025-02-16 02:03:24.561 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
2025-02-16 02:03:24.561 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:03:24.562 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:03:24.566 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:03:24.568 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-02-16 02:03:24.576 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-02-16 02:03:24.585 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:423)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; SQL [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; constraint [role.UK8sewwnpamngi6b1dwaa88askk]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy4/jdk.proxy4.$Proxy135.save(Unknown Source)
	at ru.kata.spring.boot_security.demo.service.RoleServiceImpl.add(RoleServiceImpl.java:21)
	at ru.kata.spring.boot_security.demo.initialization.InitDB.fillDb(InitDB.java:36)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 23 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1245)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy4/jdk.proxy4.$Proxy129.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:627)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:752)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 35 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:109)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:988)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1166)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1101)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1467)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1084)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 81 common frames omitted
2025-02-16 02:03:50.110 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79788 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:03:50.112 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:03:50.113 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:03:50.149 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:03:50.149 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:03:50.517 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:03:50.545 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 02:03:50.887 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:03:50.894 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:03:50.894 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:03:50.914 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:03:50.914 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 765 ms
2025-02-16 02:03:51.006 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:03:51.029 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:03:51.043 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:03:51.181 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:03:51.196 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:03:51.325 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7fd6c833
2025-02-16 02:03:51.326 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:03:51.369 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:03:51.804 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:03:51.843 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:03:51.856 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        id bigint not null auto_increment,
        age integer,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:03:51.867 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role_id integer not null,
        primary key (user_id, role_id)
    ) engine=InnoDB
2025-02-16 02:03:51.871 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       drop index UK8sewwnpamngi6b1dwaa88askk
2025-02-16 02:03:52.198 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:03:52.220 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       drop index UKob8kqyqqgmefl0aco34akdtpe
2025-02-16 02:03:52.221 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:03:52.226 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:03:52.239 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:03:52.255 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:03:52.408 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:03:52.768 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:03:52.787 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:03:52.792 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:03:52.799 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:03:52.843 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:03:52.901 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:03:52.936 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:03:52.961 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:03:52.995 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:03:53.034 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:03:53.077 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:03:53.094 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:03:53.099 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.415 seconds (process running for 3.817)
2025-02-16 02:04:05.575 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:04:05.576 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:04:05.580 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:04:05.580 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:04:05.580 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:04:05.581 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@30661a8e
2025-02-16 02:04:05.582 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3608e392
2025-02-16 02:04:05.582 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:04:05.582 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-02-16 02:04:05.593 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:04:05.739 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:04:05.836 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:04:05.840 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:04:05.846 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:04:05.888 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:04:23.125 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:04:23.130 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 02:04:23.138 [http-nio-8081-exec-6] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/admin/users?continue to session
2025-02-16 02:04:23.139 [http-nio-8081-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8081/login
2025-02-16 02:04:23.144 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 02:04:23.166 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:04:32.995 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:04:33.016 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:04:33.124 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:04:33.124 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:04:33.129 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:04:33.149 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:34.440 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:34.982 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:06:35.038 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:35.173 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:06:35.206 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:35.439 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 02:06:35.482 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:35.733 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:06:35.782 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:36.195 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:06:36.226 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:36.569 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:06:36.602 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:36.868 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:06:36.884 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:37.145 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:06:37.172 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:37.437 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:06:37.453 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:37.670 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:06:37.704 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:37.910 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:06:37.931 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:38.154 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 02:06:38.197 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:38.374 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:06:38.384 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:06:38.397 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:06:38.403 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:06:38.435 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 02:06:38.452 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:06:38.567 [http-nio-8081-exec-2] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8081-exec-2] Exception processing template "users": An error happened during template parsing (template: "class path resource [templates/users.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 02:06:38.570 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Error rendering view [org.thymeleaf.spring6.view.ThymeleafView@5f494d6d]
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 02:06:38.571 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
2025-02-16 02:06:38.572 [http-nio-8081-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-02-16 02:06:38.577 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 02:06:38.577 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 02:06:38.577 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 02:06:38.578 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-16 02:06:38.588 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-16 02:06:38.597 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-02-16 02:06:38.597 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 02:06:38.607 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:06:38.629 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:38.855 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 02:06:38.886 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:39.118 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:06:39.118 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:06:39.119 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:06:39.119 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:06:39.119 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 02:06:39.121 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:06:39.126 [http-nio-8081-exec-7] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8081-exec-7] Exception processing template "users": An error happened during template parsing (template: "class path resource [templates/users.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 02:06:39.127 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Error rendering view [org.thymeleaf.spring6.view.ThymeleafView@92ee1d5]
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 02:06:39.129 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
2025-02-16 02:06:39.130 [http-nio-8081-exec-7] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-02-16 02:06:39.132 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 02:06:39.133 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 02:06:39.133 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 02:06:39.134 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-16 02:06:39.139 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-16 02:06:39.142 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-02-16 02:06:39.142 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 02:06:39.779 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 02:06:39.816 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:06:40.785 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:06:40.786 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:06:40.787 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:06:40.788 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:06:40.789 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 02:06:40.791 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:06:40.796 [http-nio-8081-exec-2] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8081-exec-2] Exception processing template "users": An error happened during template parsing (template: "class path resource [templates/users.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 02:06:40.797 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Error rendering view [org.thymeleaf.spring6.view.ThymeleafView@50bf0a1d]
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 02:06:40.798 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
2025-02-16 02:06:40.798 [http-nio-8081-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-02-16 02:06:40.801 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 02:06:40.802 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 02:06:40.803 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 02:06:40.804 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-16 02:06:40.807 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-16 02:06:40.809 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-02-16 02:06:40.809 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 02:08:46.306 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:08:46.313 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:08:46.318 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:08:46.332 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:08:46.344 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:08:49.008 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79849 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:08:49.010 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:08:49.010 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:08:49.046 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:08:49.046 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:08:49.418 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:08:49.449 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-02-16 02:08:49.775 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:08:49.783 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:08:49.784 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:08:49.808 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:08:49.809 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 762 ms
2025-02-16 02:08:49.915 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:08:49.948 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:08:49.965 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:08:50.119 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:08:50.134 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:08:50.244 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@592c2800
2025-02-16 02:08:50.245 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:08:50.302 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:08:50.744 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:08:50.817 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:08:50.965 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:08:51.324 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:08:51.653 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-02-16 02:08:51.654 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
2025-02-16 02:08:51.658 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
2025-02-16 02:08:51.658 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:08:51.660 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:08:51.663 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:08:51.664 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-02-16 02:08:51.675 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-02-16 02:08:51.683 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:423)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; SQL [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; constraint [role.UK8sewwnpamngi6b1dwaa88askk]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy4/jdk.proxy4.$Proxy135.save(Unknown Source)
	at ru.kata.spring.boot_security.demo.service.RoleServiceImpl.add(RoleServiceImpl.java:21)
	at ru.kata.spring.boot_security.demo.initialization.InitDB.fillDb(InitDB.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 23 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1245)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy4/jdk.proxy4.$Proxy129.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:627)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:752)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 35 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:109)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:988)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1166)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1101)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1467)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1084)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 81 common frames omitted
2025-02-16 02:10:45.343 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79865 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:10:45.344 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:10:45.345 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:10:45.371 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:10:45.371 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:10:45.728 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:10:45.758 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 02:10:46.056 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:10:46.063 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:10:46.063 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:10:46.083 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:10:46.083 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 711 ms
2025-02-16 02:10:46.188 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:10:46.213 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:10:46.227 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:10:46.371 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:10:46.386 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:10:46.465 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5d8cd99a
2025-02-16 02:10:46.466 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:10:46.512 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:10:47.024 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:10:47.077 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:10:47.193 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:10:47.575 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:10:47.894 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-02-16 02:10:47.894 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
2025-02-16 02:10:47.898 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
2025-02-16 02:10:47.899 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:10:47.900 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:10:47.905 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:10:47.906 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-02-16 02:10:47.916 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-02-16 02:10:47.924 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:423)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; SQL [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; constraint [role.UK8sewwnpamngi6b1dwaa88askk]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy4/jdk.proxy4.$Proxy135.save(Unknown Source)
	at ru.kata.spring.boot_security.demo.service.RoleServiceImpl.add(RoleServiceImpl.java:21)
	at ru.kata.spring.boot_security.demo.initialization.InitDB.fillDb(InitDB.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 23 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1245)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy4/jdk.proxy4.$Proxy129.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:627)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:752)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 35 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:109)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:988)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1166)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1101)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1467)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1084)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 81 common frames omitted
2025-02-16 02:12:04.377 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79875 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:12:04.379 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:12:04.380 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:12:04.438 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:12:04.438 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:12:05.337 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:12:05.384 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 2 JPA repository interfaces.
2025-02-16 02:12:05.725 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:12:05.734 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:12:05.734 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:12:05.755 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:12:05.755 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1317 ms
2025-02-16 02:12:05.857 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:12:05.881 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:12:05.895 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:12:06.039 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:12:06.052 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:12:06.130 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7bc4f36f
2025-02-16 02:12:06.131 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:12:06.178 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:12:06.601 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:12:06.651 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:12:06.762 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:12:07.166 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:12:07.492 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-02-16 02:12:07.492 [restartedMain] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
2025-02-16 02:12:07.496 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
2025-02-16 02:12:07.497 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:12:07.498 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:12:07.502 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:12:07.503 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-02-16 02:12:07.512 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-02-16 02:12:07.520 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initDB': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:423)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1122)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1093)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1030)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; SQL [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]; constraint [role.UK8sewwnpamngi6b1dwaa88askk]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy4/jdk.proxy4.$Proxy135.save(Unknown Source)
	at ru.kata.spring.boot_security.demo.service.RoleServiceImpl.add(RoleServiceImpl.java:21)
	at ru.kata.spring.boot_security.demo.initialization.InitDB.fillDb(InitDB.java:40)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 23 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'] [/* insert for ru.kata.spring.boot_security.demo.model.Role */insert into role (name) values (?)]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1245)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:393)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:307)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:223)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy4/jdk.proxy4.$Proxy129.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:627)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:752)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 35 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'ROLE_ADMIN' for key 'role.UK8sewwnpamngi6b1dwaa88askk'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:109)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:988)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1166)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1101)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1467)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1084)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 81 common frames omitted
2025-02-16 02:12:55.867 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79895 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:12:55.868 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:12:55.868 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:12:55.901 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:12:55.901 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:12:56.282 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:12:56.309 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 02:12:56.595 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:12:56.603 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:12:56.603 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:12:56.625 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:12:56.625 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 723 ms
2025-02-16 02:12:56.715 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:12:56.740 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:12:56.761 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:12:56.908 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:12:56.924 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:12:57.003 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@38cbed64
2025-02-16 02:12:57.004 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:12:57.049 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:12:57.467 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:12:57.473 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:12:57.518 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:12:57.525 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:12:57.531 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:12:57.535 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:12:57.540 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:12:57.547 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:12:57.550 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:12:57.554 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:12:57.562 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:12:57.566 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:12:57.575 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:12:57.588 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:12:57.747 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:12:58.117 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:12:58.135 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:12:58.141 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:12:58.150 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:12:58.185 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:12:58.325 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:12:58.374 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:12:58.403 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:12:58.441 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:12:58.474 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:12:58.506 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:12:58.521 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:12:58.527 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.017 seconds (process running for 3.34)
2025-02-16 02:13:09.245 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:13:09.246 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:13:09.246 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:13:09.246 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:13:09.246 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:13:09.247 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7589d059
2025-02-16 02:13:09.247 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@737f29d7
2025-02-16 02:13:09.248 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:13:09.248 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-16 02:13:09.258 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:13:09.398 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:13:09.491 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:13:09.494 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:13:09.503 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:13:09.552 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:18:15.396 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:18:15.407 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:18:15.412 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:18:15.417 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:18:15.440 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:18:15.446 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:18:15.450 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:18:15.453 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:18:15.464 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:18:15.472 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:18:17.669 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 79940 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:18:17.671 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:18:17.671 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:18:17.708 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:18:17.708 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:18:18.074 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:18:18.102 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 02:18:18.377 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:18:18.384 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:18:18.384 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:18:18.405 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:18:18.406 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 697 ms
2025-02-16 02:18:18.497 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:18:18.524 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:18:18.537 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:18:18.666 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:18:18.678 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:18:18.756 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1c587677
2025-02-16 02:18:18.757 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:18:18.802 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:18:19.206 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:18:19.215 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:18:19.544 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:18:19.545 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:18:19.546 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:18:19.547 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:18:19.550 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:18:19.551 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:18:19.555 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:18:19.576 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:18:19.584 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:18:19.589 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:18:19.596 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:18:19.601 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:18:19.619 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:18:19.638 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:18:19.817 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:18:20.189 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:18:20.208 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:18:20.214 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:18:20.221 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:18:20.256 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:18:20.311 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:18:20.348 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:18:20.369 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:18:20.399 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:18:20.441 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:18:20.486 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:18:20.506 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:18:20.511 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.209 seconds (process running for 3.566)
2025-02-16 02:18:29.366 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:18:29.367 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:18:29.368 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:18:29.368 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:18:29.368 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:18:29.370 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4d5884a2
2025-02-16 02:18:29.370 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@107e2876
2025-02-16 02:18:29.371 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:18:29.371 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 02:18:29.385 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:18:29.535 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:18:29.638 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:18:29.643 [http-nio-8081-exec-2] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:18:29.655 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:18:29.703 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:20:22.239 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:20:22.250 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:20:22.256 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:20:22.258 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:20:22.305 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:20:22.312 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:20:22.318 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:20:22.323 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:20:22.335 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:20:22.353 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:20:24.759 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80020 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:20:24.759 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:20:24.760 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:20:24.799 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:20:24.799 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:20:25.190 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:20:25.223 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 2 JPA repository interfaces.
2025-02-16 02:20:25.589 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:20:25.598 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:20:25.598 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:20:25.618 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:20:25.619 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 819 ms
2025-02-16 02:20:25.766 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:20:25.808 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:20:25.844 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:20:25.982 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:20:25.996 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:20:26.095 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1921bd25
2025-02-16 02:20:26.096 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:20:26.151 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:20:26.619 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:20:26.635 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:20:26.971 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:20:26.972 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:20:26.975 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:20:26.975 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:20:26.984 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:20:26.993 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:20:27.007 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:20:27.025 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:20:27.029 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:20:27.034 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:20:27.043 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:20:27.047 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:20:27.057 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:20:27.068 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:20:27.202 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:20:27.775 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:20:27.804 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:20:27.811 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:20:27.823 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:20:27.876 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:20:27.965 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:20:28.018 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:20:28.051 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:20:28.110 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:20:28.151 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:20:28.194 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:20:28.212 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:20:28.219 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.846 seconds (process running for 4.208)
2025-02-16 02:20:41.793 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:20:41.794 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:20:41.794 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:20:41.794 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:20:41.794 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:20:41.796 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@a4e2836
2025-02-16 02:20:41.797 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4bdf7fb1
2025-02-16 02:20:41.797 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:20:41.797 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 02:20:41.812 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:20:41.952 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:20:42.055 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:20:42.058 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:20:42.066 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:20:42.125 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:21:25.869 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:21:25.895 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:21:25.901 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:21:25.908 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:21:25.984 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:21:25.987 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:21:25.990 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:21:25.994 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:21:26.011 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:21:26.022 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:21:29.214 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80161 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:21:29.215 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:21:29.216 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:21:29.257 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:21:29.257 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:21:29.650 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:21:29.691 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 2 JPA repository interfaces.
2025-02-16 02:21:29.997 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:21:30.006 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:21:30.006 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:21:30.031 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:21:30.032 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 775 ms
2025-02-16 02:21:30.136 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:21:30.166 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:21:30.184 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:21:30.327 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:21:30.343 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:21:30.426 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5aad22d2
2025-02-16 02:21:30.427 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:21:30.482 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:21:30.992 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:21:30.998 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:21:31.328 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:21:31.329 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:21:31.330 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:21:31.330 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:21:31.333 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:21:31.336 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:21:31.340 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:21:31.363 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:21:31.370 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:21:31.374 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:21:31.380 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:21:31.385 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:21:31.396 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:21:31.408 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:21:31.544 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:21:31.990 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:21:32.015 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:21:32.020 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:21:32.028 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:21:32.080 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:21:32.150 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:21:32.192 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:21:32.222 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:21:32.261 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:21:32.302 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:21:32.338 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:21:32.358 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:21:32.364 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.624 seconds (process running for 4.196)
2025-02-16 02:21:43.249 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:21:43.250 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:21:43.251 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:21:43.251 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:21:43.251 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:21:43.254 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@55f272c3
2025-02-16 02:21:43.255 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@64e8933d
2025-02-16 02:21:43.256 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:21:43.256 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-02-16 02:21:43.271 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:21:43.437 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:21:43.542 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:21:43.546 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:21:43.552 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:21:43.603 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:22:12.651 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:22:12.672 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:22:12.677 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:22:12.679 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:22:12.686 [SpringApplicationShutdownHook] ERROR o.h.t.s.i.SchemaDropperImpl$DelayedDropActionImpl - HHH000478: Unsuccessful: 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:22:12.686 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:22:12.687 [SpringApplicationShutdownHook] ERROR o.h.t.s.i.SchemaDropperImpl$DelayedDropActionImpl - HHH000478: Unsuccessful: 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:22:12.687 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:22:12.688 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:22:12.689 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:22:12.699 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:22:12.716 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:22:14.345 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80181 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:22:14.346 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:22:14.347 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:22:14.383 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:22:14.383 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:22:14.757 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:22:14.788 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2025-02-16 02:22:15.077 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:22:15.085 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:22:15.085 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:22:15.107 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:22:15.107 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 724 ms
2025-02-16 02:22:15.205 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:22:15.233 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:22:15.251 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:22:15.395 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:22:15.413 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:22:15.499 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@34fd28f4
2025-02-16 02:22:15.500 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:22:15.551 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:22:16.006 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:22:16.012 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:22:16.347 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:22:16.348 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:22:16.351 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:22:16.352 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:22:16.356 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:22:16.357 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:22:16.362 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:22:16.379 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:22:16.386 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:22:16.390 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:22:16.398 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:22:16.403 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:22:16.413 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:22:16.423 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:22:16.586 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:22:16.976 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:22:17.004 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:22:17.009 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:22:17.017 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:22:17.056 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:22:17.119 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:22:17.162 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:22:17.186 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:22:17.225 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:22:17.266 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:22:17.313 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:22:17.331 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:22:17.337 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.352 seconds (process running for 3.807)
2025-02-16 02:22:23.156 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:22:23.156 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:22:23.157 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:22:23.157 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:22:23.157 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:22:23.159 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6fe34c16
2025-02-16 02:22:23.159 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2392f2f5
2025-02-16 02:22:23.159 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:22:23.159 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 02:22:23.176 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:22:23.329 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:22:23.424 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:22:23.428 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:22:23.437 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:22:23.477 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:23:29.190 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:23:29.203 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:23:29.209 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:23:29.212 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:23:29.238 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:23:29.244 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:23:29.247 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:23:29.250 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:23:29.268 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:23:29.276 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:23:31.867 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80206 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:23:31.867 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:23:31.868 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:23:31.900 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:23:31.901 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:23:32.268 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:23:32.296 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 02:23:32.576 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:23:32.584 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:23:32.584 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:23:32.604 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:23:32.604 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 703 ms
2025-02-16 02:23:32.715 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:23:32.752 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:23:32.767 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:23:32.910 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:23:32.924 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:23:33.009 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1ab859ce
2025-02-16 02:23:33.009 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:23:33.064 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:23:33.502 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:23:33.508 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:23:33.837 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:23:33.838 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:23:33.839 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:23:33.840 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:23:33.844 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:23:33.846 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:23:33.850 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:23:33.871 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:23:33.878 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:23:33.881 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:23:33.891 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:23:33.896 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:23:33.905 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:23:33.918 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:23:34.042 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:23:34.474 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:23:34.496 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:23:34.501 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:23:34.511 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:23:34.548 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:23:34.623 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:23:34.671 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:23:34.698 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:23:34.735 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:23:34.789 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:23:34.825 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:23:34.840 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:23:34.846 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.331 seconds (process running for 3.686)
2025-02-16 02:23:42.093 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:23:42.094 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:23:42.094 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:23:42.095 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:23:42.095 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:23:42.098 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@77c9db62
2025-02-16 02:23:42.098 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@56ac1eb8
2025-02-16 02:23:42.098 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:23:42.098 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 02:23:42.110 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:23:42.274 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:23:42.391 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:23:42.402 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:23:42.414 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:23:42.455 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:23:59.788 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:23:59.794 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:23:59.798 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:23:59.799 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:23:59.817 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:23:59.824 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:23:59.828 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:23:59.830 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:23:59.836 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:23:59.847 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:24:01.780 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80220 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:24:01.781 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:24:01.782 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:24:01.808 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:24:01.809 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:24:02.180 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:24:02.207 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 02:24:02.479 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:24:02.486 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:24:02.486 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:24:02.506 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:24:02.506 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 697 ms
2025-02-16 02:24:02.603 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:24:02.626 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:24:02.640 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:24:02.768 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:24:02.785 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:24:02.857 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@353c5366
2025-02-16 02:24:02.858 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:24:02.900 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:24:03.313 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:24:03.319 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:24:03.642 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:24:03.643 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:24:03.645 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:24:03.645 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:24:03.648 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:24:03.650 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:24:03.655 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:24:03.670 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:24:03.677 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:24:03.684 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:24:03.692 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:24:03.698 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:24:03.709 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:24:03.720 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:24:03.842 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:24:04.248 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:24:04.267 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:24:04.272 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:24:04.280 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:24:04.317 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:24:04.388 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:24:04.431 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:24:04.456 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:24:04.496 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:24:04.537 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:24:04.576 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:24:04.592 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:24:04.598 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.164 seconds (process running for 3.437)
2025-02-16 02:24:09.550 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:24:09.551 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:24:09.551 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:24:09.551 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:24:09.551 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:24:09.558 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3aa52bde
2025-02-16 02:24:09.558 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4ce6d035
2025-02-16 02:24:09.559 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:24:09.559 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-02-16 02:24:09.571 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:24:09.733 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:24:09.834 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 02:24:09.839 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:24:09.849 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:24:09.878 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:24:36.005 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:24:36.014 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:24:36.019 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:24:36.020 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:24:36.042 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:24:36.050 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:24:36.054 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:24:36.057 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:24:36.071 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:24:36.080 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:24:38.796 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80228 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:24:38.797 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:24:38.797 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:24:38.826 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:24:38.826 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:24:39.170 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:24:39.198 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 02:24:39.467 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:24:39.476 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:24:39.476 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:24:39.496 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:24:39.496 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 670 ms
2025-02-16 02:24:39.628 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:24:39.658 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:24:39.673 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:24:39.803 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:24:39.817 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:24:39.891 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42c50fcf
2025-02-16 02:24:39.892 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:24:39.937 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:24:40.334 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:24:40.340 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:24:40.663 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:24:40.665 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:24:40.666 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:24:40.666 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:24:40.670 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:24:40.672 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:24:40.677 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:24:40.693 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:24:40.701 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:24:40.705 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:24:40.710 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:24:40.714 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:24:40.727 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:24:40.736 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:24:40.855 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:24:41.253 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:24:41.273 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:24:41.278 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:24:41.284 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:24:41.287 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:24:41.288 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:24:41.324 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:24:41.390 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:24:41.427 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:24:41.451 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:24:41.486 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:24:41.528 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:24:41.573 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:24:41.587 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:24:41.593 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.127 seconds (process running for 3.43)
2025-02-16 02:24:48.088 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:24:48.088 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:24:48.089 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:24:48.089 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:24:48.089 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:24:48.095 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5725e7ae
2025-02-16 02:24:48.095 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3fff3aa1
2025-02-16 02:24:48.096 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:24:48.096 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2025-02-16 02:24:48.111 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:24:48.265 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:24:48.275 [http-nio-8081-exec-1] WARN  o.s.s.c.bcrypt.BCryptPasswordEncoder - Encoded password does not look like BCrypt
2025-02-16 02:24:48.276 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-02-16 02:24:48.278 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:24:48.285 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:24:48.310 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:27:11.250 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:27:11.259 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:27:11.264 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:27:11.265 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:27:11.291 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:27:11.298 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:27:11.305 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:27:11.308 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:27:11.322 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:27:11.328 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:27:13.433 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80251 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:27:13.435 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:27:13.435 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:27:13.478 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:27:13.478 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:27:13.897 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:27:13.929 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-02-16 02:27:14.234 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:27:14.241 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:27:14.241 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:27:14.262 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:27:14.262 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 783 ms
2025-02-16 02:27:14.385 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:27:14.412 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:27:14.428 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:27:14.571 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:27:14.588 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:27:14.666 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@69fd256d
2025-02-16 02:27:14.667 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:27:14.708 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:27:15.122 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:27:15.131 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:27:15.466 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:27:15.467 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:27:15.468 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:27:15.469 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:27:15.473 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:27:15.475 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:27:15.479 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:27:15.490 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:27:15.505 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:27:15.509 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:27:15.516 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:27:15.523 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:27:15.535 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:27:15.546 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:27:15.855 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:27:16.233 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:27:16.254 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:27:16.434 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:27:16.441 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:27:16.445 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:27:16.447 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:27:16.494 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:27:16.571 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:27:16.612 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:27:16.675 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:27:16.743 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:27:16.785 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:27:16.823 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:27:16.841 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:27:16.848 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.828 seconds (process running for 4.142)
2025-02-16 02:27:24.604 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:27:24.605 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:27:24.605 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:27:24.606 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:27:24.607 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:27:24.616 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@301a5426
2025-02-16 02:27:24.616 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@40e178ab
2025-02-16 02:27:24.617 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:27:24.617 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 12 ms
2025-02-16 02:27:24.631 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:27:24.778 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:27:24.885 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 02:27:24.902 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from BBFF492CBD2C1C892FFC72D04F4ECE84
2025-02-16 02:27:24.905 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BBFF492CBD2C1C892FFC72D04F4ECE84], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@53a2311e]
2025-02-16 02:27:24.906 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BBFF492CBD2C1C892FFC72D04F4ECE84], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 02:27:24.922 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:27:24.925 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:27:24.926 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:27:24.927 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:27:24.947 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BBFF492CBD2C1C892FFC72D04F4ECE84], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:27:24.962 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:27:25.147 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:27:25.160 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 02:27:25.161 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 02:27:25.162 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 02:27:25.164 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 02:27:25.164 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:27:25.164 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 02:27:25.164 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 02:27:25.164 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:27:25.173 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:27:25.173 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:27:25.173 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BBFF492CBD2C1C892FFC72D04F4ECE84], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:27:25.173 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BBFF492CBD2C1C892FFC72D04F4ECE84], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:27:25.202 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 02:27:25.202 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 02:27:25.203 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 02:27:25.203 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 02:27:25.204 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 02:27:25.204 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 02:27:25.204 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:27:25.205 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:27:25.206 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:27:25.207 [http-nio-8081-exec-6] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:27:25.208 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:27:25.209 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:27:25.234 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:27:25.234 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:27:25.236 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@6b4227f1]
2025-02-16 02:27:25.236 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@7d560377]
2025-02-16 02:27:25.243 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 02:27:25.243 [http-nio-8081-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 02:27:25.243 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:27:25.243 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:27:25.244 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BBFF492CBD2C1C892FFC72D04F4ECE84], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:27:25.244 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BBFF492CBD2C1C892FFC72D04F4ECE84], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:27:33.449 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:27:33.456 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:27:33.468 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:27:33.469 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:27:33.481 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:27:33.487 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:27:33.492 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:27:33.496 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:27:33.505 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:27:33.510 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:28:36.663 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80283 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:28:36.664 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:28:36.665 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:28:36.710 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:28:36.711 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:28:37.124 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:28:37.155 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-02-16 02:28:37.492 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:28:37.499 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:28:37.500 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:28:37.522 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:28:37.523 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 812 ms
2025-02-16 02:28:37.655 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:28:37.698 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:28:37.724 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:28:37.952 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:28:37.978 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:28:38.068 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@12ad708e
2025-02-16 02:28:38.069 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:28:38.120 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:28:38.772 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:28:38.779 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:28:39.113 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:28:39.114 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:28:39.115 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:28:39.116 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:28:39.119 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:28:39.121 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:28:39.125 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:28:39.144 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:28:39.161 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:28:39.173 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:28:39.185 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:28:39.191 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:28:39.201 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:28:39.213 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:28:39.461 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:28:39.927 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:28:39.954 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:28:40.118 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:28:40.127 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:28:40.188 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:28:40.261 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:28:40.307 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:28:40.335 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:28:40.371 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:28:40.413 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:28:40.468 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:28:40.485 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:28:40.491 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 4.301 seconds (process running for 4.635)
2025-02-16 02:28:40.492 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:28:40.498 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:28:40.500 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:28:40.501 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:28:40.507 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:28:40.513 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:28:40.517 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:28:40.523 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:28:40.528 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:28:40.532 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:28:51.889 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80290 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:28:51.890 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:28:51.890 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:28:51.919 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:28:51.919 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:28:52.272 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:28:52.302 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 2 JPA repository interfaces.
2025-02-16 02:28:52.580 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:28:52.588 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:28:52.588 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:28:52.609 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:28:52.609 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 690 ms
2025-02-16 02:28:52.716 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:28:52.742 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:28:52.755 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:28:52.888 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:28:52.906 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:28:52.979 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2d444d85
2025-02-16 02:28:52.980 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:28:53.022 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:28:53.442 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:28:53.449 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:28:53.775 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:28:53.776 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:28:53.777 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:28:53.777 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:28:53.781 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:28:53.783 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:28:53.788 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:28:53.802 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:28:53.808 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:28:53.812 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:28:53.819 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:28:53.824 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:28:53.833 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:28:53.843 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:28:53.962 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:28:54.393 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:28:54.412 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:28:54.574 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:28:54.584 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:28:54.628 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:28:54.704 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:28:54.740 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:28:54.764 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:28:54.794 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:28:54.826 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:28:54.873 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:28:54.896 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:28:54.902 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.375 seconds (process running for 3.69)
2025-02-16 02:29:02.089 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:29:02.090 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:29:02.090 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:29:02.090 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:29:02.090 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:29:02.097 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4c6b5ca5
2025-02-16 02:29:02.098 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@486c429b
2025-02-16 02:29:02.098 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:29:02.098 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-02-16 02:29:02.112 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:29:02.119 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BBFF492CBD2C1C892FFC72D04F4ECE84], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:29:02.120 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 02:29:02.122 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 02:29:02.124 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 02:29:02.180 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:29:02.191 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:29:02.196 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:29:02.208 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:29:02.210 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, User{id=2, emai (truncated)...]
2025-02-16 02:29:02.244 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:29:29.445 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:29:29.489 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:29:29.507 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:29:29.522 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:29:29.556 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:29:29.563 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:29:29.569 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:29:29.572 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:29:29.581 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:29:29.589 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:29:31.755 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80308 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:29:31.755 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:29:31.756 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:29:31.789 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:29:31.790 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:29:32.149 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:29:32.182 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2025-02-16 02:29:32.467 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:29:32.474 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:29:32.474 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:29:32.495 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:29:32.495 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 705 ms
2025-02-16 02:29:32.611 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:29:32.645 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:29:32.665 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:29:32.826 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:29:32.841 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:29:32.918 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6ecfdb7b
2025-02-16 02:29:32.919 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:29:32.965 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:29:33.387 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:29:33.393 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:29:33.727 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:29:33.728 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:29:33.729 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:29:33.729 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:29:33.732 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:29:33.733 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:29:33.737 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:29:33.757 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:29:33.761 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:29:33.764 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:29:33.769 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:29:33.774 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:29:33.786 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:29:33.796 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:29:33.957 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:29:34.351 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:29:34.370 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:29:34.536 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:29:34.548 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:29:34.604 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:29:34.681 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:29:34.753 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:29:34.781 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:29:34.838 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:29:34.888 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:29:34.946 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:29:34.969 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:29:34.977 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.606 seconds (process running for 3.914)
2025-02-16 02:29:40.293 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:29:40.294 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:29:40.294 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:29:40.294 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:29:40.294 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:29:40.301 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1eac504e
2025-02-16 02:29:40.302 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1c4f1153
2025-02-16 02:29:40.302 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:29:40.302 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-02-16 02:29:40.314 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:29:40.321 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BBFF492CBD2C1C892FFC72D04F4ECE84], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:29:40.321 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 02:29:40.323 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 02:29:40.324 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 02:29:40.375 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:29:40.388 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:29:40.390 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:29:40.420 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:29:40.422 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, User{id=2, emai (truncated)...]
2025-02-16 02:29:40.456 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:30:36.857 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 02:30:36.866 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BBFF492CBD2C1C892FFC72D04F4ECE84], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:30:36.869 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=1, email='admin@example.com', firstName='admin', lastName='admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=BBFF492CBD2C1C892FFC72D04F4ECE84], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:30:36.880 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 7A4B7BA68C6654C792364DBE2F26891A
2025-02-16 02:30:36.889 [http-nio-8081-exec-4] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 02:30:36.897 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 02:30:36.942 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:30:42.339 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:30:42.504 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:30:42.590 [http-nio-8081-exec-9] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user@example.com'
2025-02-16 02:30:42.612 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 02:30:42.620 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:30:42.648 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:34:06.828 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:34:06.833 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:34:06.841 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:34:06.844 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:34:06.876 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:34:06.878 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:34:06.882 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:34:06.884 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:34:06.893 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:34:06.899 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:34:09.883 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80364 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:34:09.883 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:34:09.884 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:34:09.925 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:34:09.925 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:34:10.312 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:34:10.342 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 02:34:10.648 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:34:10.655 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:34:10.655 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:34:10.675 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:34:10.675 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 749 ms
2025-02-16 02:34:10.767 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:34:10.798 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:34:10.830 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:34:10.972 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:34:10.987 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:34:11.069 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7aff2731
2025-02-16 02:34:11.069 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:34:11.116 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:34:11.553 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:34:11.560 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:34:11.891 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:34:11.892 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:34:11.893 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:34:11.894 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:34:11.897 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:34:11.899 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:34:11.903 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:34:11.915 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:34:11.923 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:34:11.930 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:34:11.938 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:34:11.943 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:34:11.953 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:34:11.964 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:34:12.111 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:34:12.508 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:34:12.530 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:34:12.542 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:34:12.543 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 02:34:12.545 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:34:12.660 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:34:12.667 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:34:12.672 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:34:12.675 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 02:34:12.781 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:34:12.786 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:34:12.790 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:34:12.792 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 02:34:12.838 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:34:12.901 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:34:12.946 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:34:12.969 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:34:13.002 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:34:13.043 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:34:13.089 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:34:13.105 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:34:13.111 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.617 seconds (process running for 4.106)
2025-02-16 02:34:20.625 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:34:20.626 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:34:20.626 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:34:20.626 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:34:20.626 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:34:20.629 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@a847daf
2025-02-16 02:34:20.629 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@87b53f3
2025-02-16 02:34:20.630 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:34:20.630 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 02:34:20.646 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:34:20.652 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 02:34:20.656 [http-nio-8081-exec-1] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/admin/users?continue to session
2025-02-16 02:34:20.657 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8081/login
2025-02-16 02:34:20.665 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 02:34:20.718 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:34:24.414 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:34:24.550 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:34:24.644 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 02:34:24.675 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from F55F5645ACF8D740A98E354F1809E870
2025-02-16 02:34:24.678 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F55F5645ACF8D740A98E354F1809E870], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5ffe3ab9]
2025-02-16 02:34:24.678 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F55F5645ACF8D740A98E354F1809E870], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 02:34:24.687 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:34:24.689 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:34:24.691 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:34:24.692 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:34:24.714 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F55F5645ACF8D740A98E354F1809E870], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:34:24.726 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:34:24.926 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:34:24.945 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 02:34:24.945 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 02:34:24.946 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 02:34:24.946 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 02:34:24.946 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 02:34:24.946 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 02:34:24.947 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:34:24.947 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:34:24.957 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:34:24.957 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:34:24.958 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F55F5645ACF8D740A98E354F1809E870], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:34:24.958 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F55F5645ACF8D740A98E354F1809E870], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:34:24.968 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 02:34:24.969 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 02:34:24.981 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 02:34:24.984 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:34:24.986 [http-nio-8081-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:34:24.986 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 02:34:24.987 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 02:34:24.988 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 02:34:24.989 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:34:24.991 [http-nio-8081-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:34:24.991 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:34:24.992 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:34:25.026 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:34:25.026 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:34:25.027 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@3b21acb1]
2025-02-16 02:34:25.027 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@297987e0]
2025-02-16 02:34:25.037 [http-nio-8081-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 02:34:25.037 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 02:34:25.037 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:34:25.037 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:34:25.037 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F55F5645ACF8D740A98E354F1809E870], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:34:25.037 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F55F5645ACF8D740A98E354F1809E870], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:34:30.206 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:34:30.213 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F55F5645ACF8D740A98E354F1809E870], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:34:30.214 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 02:34:30.214 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 02:34:30.215 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 02:34:30.237 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:34:30.248 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:34:30.251 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:34:30.264 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:34:30.268 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 02:34:30.289 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:35:40.124 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:35:40.132 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:35:40.168 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:35:40.171 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:35:40.242 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:35:40.254 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:35:40.264 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:35:40.274 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:35:40.294 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:35:40.330 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:35:42.754 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80408 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:35:42.756 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:35:42.757 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:35:42.795 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:35:42.795 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:35:43.198 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:35:43.229 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-02-16 02:35:43.547 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:35:43.558 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:35:43.558 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:35:43.581 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:35:43.581 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 786 ms
2025-02-16 02:35:43.763 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:35:43.829 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:35:43.866 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:35:44.136 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:35:44.178 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:35:44.412 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@29ff83fc
2025-02-16 02:35:44.416 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:35:44.491 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:35:45.591 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:35:45.612 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:35:46.015 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:35:46.016 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:35:46.018 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:35:46.018 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:35:46.024 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:35:46.025 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:35:46.030 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:35:46.046 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:35:46.054 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:35:46.061 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:35:46.071 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:35:46.077 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:35:46.088 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:35:46.100 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:35:46.313 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:35:46.724 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:35:46.749 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:35:46.764 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:35:46.766 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 02:35:46.768 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:35:46.896 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:35:46.901 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:35:46.905 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:35:46.908 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 02:35:46.988 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:35:46.991 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:35:46.992 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:35:46.994 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 02:35:47.038 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:35:47.112 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:35:47.148 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:35:47.168 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:35:47.198 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:35:47.239 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:35:47.282 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:35:47.302 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:35:47.309 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 5.013 seconds (process running for 5.397)
2025-02-16 02:38:05.824 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:38:05.832 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:38:05.837 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:38:05.842 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:38:05.860 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:38:05.870 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:38:05.877 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:38:05.880 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:38:05.887 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:38:05.907 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:38:08.908 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80457 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:38:08.910 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:38:08.912 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:38:08.958 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:38:08.959 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:38:09.368 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:38:09.398 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 02:38:09.734 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:38:09.743 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:38:09.743 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:38:09.763 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:38:09.764 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 805 ms
2025-02-16 02:38:09.888 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:38:09.916 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:38:09.932 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:38:10.085 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:38:10.099 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:38:10.184 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5e89f10a
2025-02-16 02:38:10.185 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:38:10.234 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:38:10.743 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:38:10.750 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:38:11.079 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:38:11.080 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:38:11.081 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:38:11.081 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:38:11.084 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:38:11.086 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:38:11.090 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:38:11.110 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:38:11.115 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:38:11.118 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:38:11.124 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:38:11.129 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:38:11.137 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:38:11.149 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:38:11.278 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:38:11.726 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:38:11.747 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:38:11.760 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:38:11.761 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 02:38:11.763 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:38:11.885 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:38:11.889 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:38:11.894 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:38:11.899 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 02:38:11.978 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:38:11.980 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:38:11.981 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:38:11.982 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 02:38:12.029 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:38:12.091 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:38:12.128 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:38:12.161 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:38:12.194 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:38:12.236 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:38:12.282 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:38:12.304 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:38:12.309 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 4.367 seconds (process running for 5.202)
2025-02-16 02:38:33.639 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:38:33.640 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:38:33.640 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:38:33.640 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:38:33.640 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:38:33.643 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1d4c5bd2
2025-02-16 02:38:33.644 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@52c7384c
2025-02-16 02:38:33.644 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:38:33.644 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 02:38:33.659 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:38:33.748 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:38:33.835 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 02:38:33.846 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from F34632669026C218E4E43EB233559B98
2025-02-16 02:38:33.847 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F34632669026C218E4E43EB233559B98], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@41c6aebc]
2025-02-16 02:38:33.847 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F34632669026C218E4E43EB233559B98], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 02:38:33.864 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:38:33.872 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:38:33.877 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:38:33.877 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:38:33.894 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F34632669026C218E4E43EB233559B98], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:38:33.905 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:38:34.069 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:38:34.095 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 02:38:34.096 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 02:38:34.097 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 02:38:34.097 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 02:38:34.097 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 02:38:34.097 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 02:38:34.098 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:38:34.098 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:38:34.109 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:38:34.109 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:38:34.110 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F34632669026C218E4E43EB233559B98], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:38:34.110 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F34632669026C218E4E43EB233559B98], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:38:34.119 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 02:38:34.119 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 02:38:34.120 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 02:38:34.120 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 02:38:34.120 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 02:38:34.120 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 02:38:34.120 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:38:34.120 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:38:34.122 [http-nio-8081-exec-6] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:38:34.122 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:38:34.124 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:38:34.124 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:38:34.152 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:38:34.152 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:38:34.154 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@13adba15]
2025-02-16 02:38:34.154 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@7c39633f]
2025-02-16 02:38:34.161 [http-nio-8081-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 02:38:34.161 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 02:38:34.161 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:38:34.161 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:38:34.161 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F34632669026C218E4E43EB233559B98], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:38:34.161 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F34632669026C218E4E43EB233559B98], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:38:57.584 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 02:38:57.593 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 02:38:57.594 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 02:38:57.596 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:38:57.600 [http-nio-8081-exec-7] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:38:57.601 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:38:57.605 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:38:57.608 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@5940e6de]
2025-02-16 02:38:57.610 [http-nio-8081-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 02:38:57.611 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:38:57.613 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=F34632669026C218E4E43EB233559B98], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:39:08.760 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 02:39:08.813 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 02:39:12.602 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 02:39:12.634 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 02:39:12.751 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 02:39:12.752 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from D69D21E21EB2A67D76D5E2D63B1C60B0
2025-02-16 02:39:12.752 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@41c6aebc]
2025-02-16 02:39:12.752 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 02:39:12.756 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:39:12.756 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:39:12.756 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:39:12.756 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:39:12.757 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:39:12.758 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:39:12.804 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:39:12.826 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 02:39:12.826 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 02:39:12.827 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 02:39:12.827 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 02:39:12.828 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 02:39:12.828 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 02:39:12.828 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:39:12.828 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:39:12.830 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:39:12.830 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:39:12.858 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:39:12.859 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:39:12.861 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 02:39:12.861 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 02:39:12.861 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 02:39:12.861 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 02:39:12.861 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 02:39:12.861 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 02:39:12.861 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:39:12.861 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:39:12.863 [http-nio-8081-exec-3] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:39:12.864 [http-nio-8081-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:39:12.864 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:39:12.864 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:39:12.865 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:39:12.865 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:39:12.866 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@20ad9864]
2025-02-16 02:39:12.866 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@8d5e5cb]
2025-02-16 02:39:12.870 [http-nio-8081-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 02:39:12.870 [http-nio-8081-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 02:39:12.870 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:39:12.870 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:39:12.870 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:39:12.870 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:41:03.970 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:41:03.982 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:41:03.992 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:41:03.998 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:41:04.018 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:41:04.029 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:41:04.034 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:41:04.038 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:41:04.050 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:41:04.062 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:41:06.172 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80476 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:41:06.173 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:41:06.174 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:41:06.208 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:41:06.208 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:41:06.662 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:41:06.692 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 02:41:06.985 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:41:06.992 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:41:06.992 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:41:07.012 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:41:07.012 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 804 ms
2025-02-16 02:41:07.128 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:41:07.154 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:41:07.170 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:41:07.321 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:41:07.340 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:41:07.423 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c566487
2025-02-16 02:41:07.424 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:41:07.475 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:41:08.127 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:41:08.134 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:41:08.481 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:41:08.482 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:41:08.484 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:41:08.484 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:41:08.487 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:41:08.488 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:41:08.492 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:41:08.513 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:41:08.521 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:41:08.525 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:41:08.534 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:41:08.539 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:41:08.549 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:41:08.560 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:41:08.841 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:41:09.244 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:41:09.266 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:41:09.279 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:41:09.281 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 02:41:09.282 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:41:09.397 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:41:09.403 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:41:09.408 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:41:09.411 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 02:41:09.489 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:41:09.491 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:41:09.492 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:41:09.493 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 02:41:09.539 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:41:09.618 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:41:09.669 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:41:09.695 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:41:09.741 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:41:09.796 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:41:09.847 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:41:09.864 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:41:09.870 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 4.257 seconds (process running for 4.828)
2025-02-16 02:41:14.007 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:41:14.008 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:41:14.008 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:41:14.008 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:41:14.008 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:41:14.011 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@22adf85
2025-02-16 02:41:14.011 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@312a2040
2025-02-16 02:41:14.011 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:41:14.011 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 02:41:14.027 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:41:14.032 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:41:14.033 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 02:41:14.033 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 02:41:14.035 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 02:41:14.049 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:41:14.053 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:41:14.056 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:41:14.071 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:41:14.073 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 02:41:14.102 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:41:20.546 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:41:20.550 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:41:20.550 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:41:20.552 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:41:20.565 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:41:20.584 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:41:20.821 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:41:20.843 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 02:41:20.843 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 02:41:20.844 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 02:41:20.844 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 02:41:20.844 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 02:41:20.844 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 02:41:20.845 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:41:20.845 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:41:20.847 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:41:20.847 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:41:20.848 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:41:20.848 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:41:20.868 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 02:41:20.868 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 02:41:20.868 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 02:41:20.868 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 02:41:20.869 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 02:41:20.869 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:41:20.869 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 02:41:20.869 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:41:20.870 [http-nio-8081-exec-7] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:41:20.870 [http-nio-8081-exec-8] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:41:20.874 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:41:20.874 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:41:20.877 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:41:20.877 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:41:20.878 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@53ad1d43]
2025-02-16 02:41:20.878 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@3ebb7224]
2025-02-16 02:41:20.879 [http-nio-8081-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 02:41:20.880 [http-nio-8081-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 02:41:20.880 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:41:20.881 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:41:20.881 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:41:20.881 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:41:45.096 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:41:45.109 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:41:45.115 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:41:45.123 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:41:45.140 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:41:45.148 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:41:45.151 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:41:45.154 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:41:45.160 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:41:45.174 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:41:46.985 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80490 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:41:46.986 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:41:46.986 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:41:47.020 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:41:47.021 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:41:47.381 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:41:47.409 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 02:41:47.713 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:41:47.720 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:41:47.721 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:41:47.742 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:41:47.743 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 721 ms
2025-02-16 02:41:47.872 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:41:47.896 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:41:47.910 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:41:48.047 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:41:48.059 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:41:48.137 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@13af7e7d
2025-02-16 02:41:48.138 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:41:48.180 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:41:48.623 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:41:48.630 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:41:49.084 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:41:49.088 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:41:49.097 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:41:49.097 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:41:49.102 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:41:49.104 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:41:49.108 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:41:49.120 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:41:49.126 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:41:49.129 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:41:49.137 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:41:49.146 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:41:49.155 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:41:49.165 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:41:49.353 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:41:49.752 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:41:49.777 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:41:49.788 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:41:49.789 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 02:41:49.790 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:41:49.905 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:41:49.909 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:41:49.914 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:41:49.917 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 02:41:49.995 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:41:49.998 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:41:49.999 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:41:50.000 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 02:41:50.045 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:41:50.106 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:41:50.142 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:41:50.161 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:41:50.193 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:41:50.227 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:41:50.270 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:41:50.288 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:41:50.296 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.886 seconds (process running for 4.242)
2025-02-16 02:41:56.693 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:41:56.694 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:41:56.694 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:41:56.694 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:41:56.694 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:41:56.701 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1a6e711e
2025-02-16 02:41:56.702 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5df41089
2025-02-16 02:41:56.702 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:41:56.702 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-02-16 02:41:56.714 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:41:56.719 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:41:56.720 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:41:56.722 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:41:56.731 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:41:56.746 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:41:56.982 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:41:56.990 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 02:41:56.992 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 02:41:56.992 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 02:41:56.993 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 02:41:56.993 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 02:41:56.994 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 02:41:56.997 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:41:57.000 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:41:57.033 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:41:57.034 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:41:57.036 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:41:57.036 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:41:57.066 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 02:41:57.068 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles/
2025-02-16 02:41:57.069 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 02:41:57.069 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 02:41:57.070 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles/
2025-02-16 02:41:57.070 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles/", parameters={}
2025-02-16 02:41:57.071 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:41:57.071 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:41:57.079 [http-nio-8081-exec-3] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:41:57.079 [http-nio-8081-exec-2] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:41:57.097 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:41:57.097 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:41:57.153 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:41:57.153 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:41:57.154 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@19780f1d]
2025-02-16 02:41:57.154 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@77e529f6]
2025-02-16 02:41:57.166 [http-nio-8081-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/roles.]
2025-02-16 02:41:57.166 [http-nio-8081-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 02:41:57.167 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:41:57.167 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:41:57.167 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:41:57.167 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:49:42.314 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:49:42.331 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:49:42.338 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:49:42.341 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:49:42.435 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:49:42.438 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:49:42.442 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:49:42.444 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:49:42.455 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:49:42.465 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:49:44.753 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80581 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:49:44.755 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:49:44.756 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:49:44.799 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:49:44.800 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:49:45.213 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:49:45.247 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 2 JPA repository interfaces.
2025-02-16 02:49:45.542 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:49:45.550 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:49:45.550 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:49:45.570 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:49:45.570 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 770 ms
2025-02-16 02:49:45.700 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:49:45.730 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:49:45.746 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:49:45.890 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:49:45.904 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:49:45.991 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@584f3cdd
2025-02-16 02:49:45.992 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:49:46.049 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:49:46.704 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:49:46.713 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:49:47.102 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:49:47.103 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:49:47.105 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:49:47.105 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:49:47.110 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:49:47.111 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:49:47.116 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:49:47.133 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:49:47.148 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:49:47.155 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:49:47.163 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:49:47.168 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:49:47.184 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:49:47.197 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:49:47.400 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:49:47.857 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:49:47.884 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:49:47.896 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:49:47.898 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 02:49:47.900 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:49:48.029 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:49:48.034 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:49:48.038 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:49:48.041 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 02:49:48.118 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:49:48.134 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:49:48.137 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:49:48.138 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 02:49:48.190 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:49:48.257 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:49:48.304 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:49:48.329 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:49:48.365 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:49:48.426 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:49:48.464 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:49:48.481 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:49:48.487 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 4.344 seconds (process running for 4.978)
2025-02-16 02:49:49.245 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:49:49.246 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:49:49.246 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:49:49.246 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:49:49.246 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:49:49.248 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2b6f557c
2025-02-16 02:49:49.248 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6be3b832
2025-02-16 02:49:49.248 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:49:49.248 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-16 02:49:49.267 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/1
2025-02-16 02:49:49.274 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/1
2025-02-16 02:49:49.276 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/1", parameters={}
2025-02-16 02:49:49.278 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getUserById(Long)
2025-02-16 02:49:49.298 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 02:49:49.333 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:49:49.335 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}]
2025-02-16 02:49:49.346 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:49:49.347 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:49:52.796 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/
2025-02-16 02:49:52.798 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/
2025-02-16 02:49:52.799 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/", parameters={}
2025-02-16 02:49:52.802 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:49:52.805 [http-nio-8081-exec-2] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:49:52.814 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:49:52.826 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:49:52.827 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@1d8b2626]
2025-02-16 02:49:52.830 [http-nio-8081-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users.]
2025-02-16 02:49:52.831 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:49:52.831 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:49:55.977 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:49:55.979 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:49:55.982 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 02:49:55.984 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 02:49:55.993 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 02:49:56.012 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:49:56.025 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:49:56.029 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:49:56.034 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:49:56.035 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 02:49:56.037 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:50:04.746 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:50:04.753 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:50:04.753 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:50:04.754 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:50:04.773 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:50:04.800 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:50:04.988 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:50:05.016 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 02:50:05.016 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 02:50:05.016 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 02:50:05.017 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 02:50:05.017 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 02:50:05.017 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 02:50:05.018 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:50:05.018 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:50:05.024 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:50:05.027 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:50:05.027 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:50:05.028 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:50:05.050 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 02:50:05.050 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 02:50:05.050 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:50:05.050 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 02:50:05.051 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:50:05.051 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 02:50:05.051 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 02:50:05.051 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 02:50:05.051 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 02:50:05.293 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:50:05.294 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:50:05.317 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:50:05.320 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:50:05.320 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 02:50:05.320 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:50:05.324 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:50:05.325 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 02:50:05.326 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:50:05.328 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:50:05.329 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:50:29.189 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 02:50:29.198 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:50:29.198 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 02:50:29.199 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 02:50:29.200 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 02:50:29.273 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 02:50:29.286 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:50:29.287 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:50:29.287 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@3d97146]
2025-02-16 02:50:29.287 [http-nio-8081-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value: ru.kata.spring.boot_security.demo.model.User.password]
2025-02-16 02:50:29.288 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:50:33.379 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:50:33.380 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:50:33.380 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:50:33.381 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:50:33.382 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:50:33.386 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:50:33.405 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:50:33.427 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 02:50:33.427 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 02:50:33.427 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 02:50:33.427 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 02:50:33.427 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 02:50:33.427 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 02:50:33.428 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:50:33.428 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:50:33.429 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:50:33.430 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:50:33.430 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:50:33.431 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:50:33.434 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 02:50:33.434 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:50:33.435 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 02:50:33.436 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 02:50:33.435 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:50:33.436 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 02:50:33.436 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 02:50:33.436 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 02:50:33.436 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 02:50:33.441 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:50:33.441 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:50:33.443 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:50:33.444 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:50:33.444 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 02:50:33.444 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:50:33.444 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:50:33.445 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:50:33.447 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:50:33.447 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 02:50:33.448 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:51:17.976 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:51:17.986 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:51:17.986 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 02:51:17.987 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 02:51:17.987 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 02:51:18.006 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:51:18.019 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:51:18.024 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:51:18.034 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:51:18.034 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 02:51:18.036 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:51:23.859 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 02:51:23.862 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 02:51:23.863 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 02:51:23.863 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 02:51:23.875 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:51:23.888 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:51:23.888 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 02:51:23.890 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:51:23.890 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:51:59.856 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 02:51:59.892 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 02:51:59.896 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:51:59.902 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:51:59.941 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:51:59.945 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:51:59.949 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:51:59.954 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:51:59.971 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 02:51:59.984 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 02:52:01.862 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80683 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 02:52:01.863 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 02:52:01.864 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 02:52:01.903 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 02:52:01.903 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 02:52:02.326 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 02:52:02.362 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 2 JPA repository interfaces.
2025-02-16 02:52:02.668 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 02:52:02.676 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 02:52:02.676 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 02:52:02.698 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 02:52:02.699 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 795 ms
2025-02-16 02:52:02.805 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 02:52:02.832 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 02:52:02.847 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 02:52:02.995 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 02:52:03.083 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 02:52:03.173 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6bb1f554
2025-02-16 02:52:03.174 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 02:52:03.233 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 02:52:03.655 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 02:52:03.661 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 02:52:03.987 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:52:03.988 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 02:52:03.989 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 02:52:03.990 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 02:52:03.993 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 02:52:03.996 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 02:52:04.000 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:52:04.012 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 02:52:04.020 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 02:52:04.026 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 02:52:04.036 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 02:52:04.040 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 02:52:04.048 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 02:52:04.058 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 02:52:04.249 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 02:52:04.651 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:52:04.673 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:52:04.684 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 02:52:04.685 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 02:52:04.687 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:52:04.801 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:52:04.806 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:52:04.811 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:52:04.813 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 02:52:04.894 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 02:52:04.896 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 02:52:04.899 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 02:52:04.901 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 02:52:04.954 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 02:52:05.015 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 02:52:05.077 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 02:52:05.100 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 02:52:05.146 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 02:52:05.185 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 02:52:05.225 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 02:52:05.241 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 02:52:05.246 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.814 seconds (process running for 4.264)
2025-02-16 02:52:21.028 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 02:52:21.031 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 02:52:21.034 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 02:52:21.034 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 02:52:21.034 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 02:52:21.037 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5854e8a9
2025-02-16 02:52:21.038 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1c9054a8
2025-02-16 02:52:21.038 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 02:52:21.038 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2025-02-16 02:52:21.051 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:52:21.056 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:52:21.058 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:52:21.060 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:52:21.082 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:21.093 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:52:21.294 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:52:21.302 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 02:52:21.302 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 02:52:21.303 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 02:52:21.303 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 02:52:21.303 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 02:52:21.304 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 02:52:21.305 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:52:21.305 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:52:21.313 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:52:21.313 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:52:21.314 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:21.314 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:21.321 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:52:21.321 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 02:52:21.322 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:21.322 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 02:52:21.322 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 02:52:21.322 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 02:52:21.323 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 02:52:21.323 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 02:52:21.323 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 02:52:21.342 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:52:21.343 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:52:21.354 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:52:21.358 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:52:21.360 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:52:21.360 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:52:21.360 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 02:52:21.361 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 02:52:21.407 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:52:21.407 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:21.412 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:52:35.390 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users0
2025-02-16 02:52:35.398 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users0
2025-02-16 02:52:35.399 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users0", parameters={}
2025-02-16 02:52:35.401 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:52:35.438 [http-nio-8081-exec-9] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:52:35.444 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:52:35.449 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:52:35.450 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@51e6c167]
2025-02-16 02:52:35.451 [http-nio-8081-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users0.]
2025-02-16 02:52:35.452 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:52:35.452 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:47.924 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users0
2025-02-16 02:52:47.927 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users0
2025-02-16 02:52:47.928 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users0", parameters={}
2025-02-16 02:52:47.930 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:52:47.945 [http-nio-8081-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 02:52:47.949 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:52:47.951 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:52:47.952 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@6961a34d]
2025-02-16 02:52:47.954 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users0.]
2025-02-16 02:52:47.955 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:52:47.956 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:49.687 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 02:52:49.688 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 02:52:49.688 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 02:52:49.688 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 02:52:49.689 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:49.694 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 02:52:49.716 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:52:49.729 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 02:52:49.729 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 02:52:49.729 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 02:52:49.729 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 02:52:49.730 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 02:52:49.730 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 02:52:49.730 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:52:49.731 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 02:52:49.733 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:52:49.733 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:52:49.733 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:49.733 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:49.739 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:52:49.739 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 02:52:49.739 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:49.739 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 02:52:49.740 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 02:52:49.740 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 02:52:49.740 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 02:52:49.740 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 02:52:49.740 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 02:52:49.750 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 02:52:49.750 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:52:49.753 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:52:49.754 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:52:49.754 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 02:52:49.755 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:52:49.755 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:52:49.755 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:52:49.757 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:52:49.757 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 02:52:49.758 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:53:06.306 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 02:53:06.309 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:53:06.310 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 02:53:06.311 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 02:53:06.312 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 02:53:06.388 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=31}]
2025-02-16 02:53:06.396 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:53:06.397 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:53:06.397 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@67b78b1a]
2025-02-16 02:53:06.398 [http-nio-8081-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value: ru.kata.spring.boot_security.demo.model.User.password]
2025-02-16 02:53:06.398 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:55:39.840 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 02:55:39.853 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:55:39.853 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 02:55:39.853 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 02:55:39.854 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 02:55:39.860 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=123}]
2025-02-16 02:55:39.913 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:55:39.914 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:55:39.915 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@3775b13e]
2025-02-16 02:55:39.916 [http-nio-8081-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value: ru.kata.spring.boot_security.demo.model.User.password]
2025-02-16 02:55:39.916 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:55:58.217 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 02:55:58.227 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:55:58.227 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 02:55:58.228 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 02:55:58.229 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 02:55:58.241 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=123}]
2025-02-16 02:55:58.259 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:55:58.261 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:55:58.261 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@167afb9b]
2025-02-16 02:55:58.262 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value: ru.kata.spring.boot_security.demo.model.User.password]
2025-02-16 02:55:58.263 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:56:34.688 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 02:56:34.710 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:56:34.713 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 02:56:34.716 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 02:56:34.718 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 02:56:34.734 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 02:56:34.749 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:56:34.750 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:56:34.751 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@3a876264]
2025-02-16 02:56:34.752 [http-nio-8081-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value: ru.kata.spring.boot_security.demo.model.User.password]
2025-02-16 02:56:34.754 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:56:45.942 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 02:56:45.960 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:56:45.961 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 02:56:45.962 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 02:56:45.967 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 02:56:45.975 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 02:56:45.986 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:56:45.986 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:56:45.986 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@4d5b16b4]
2025-02-16 02:56:45.988 [http-nio-8081-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value: ru.kata.spring.boot_security.demo.model.User.password]
2025-02-16 02:56:45.988 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:57:27.771 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/1
2025-02-16 02:57:27.775 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/1
2025-02-16 02:57:27.776 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/1", parameters={}
2025-02-16 02:57:27.777 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getUserById(Long)
2025-02-16 02:57:27.840 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 02:57:27.879 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:57:27.882 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}]
2025-02-16 02:57:27.883 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:57:27.884 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:57:28.429 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 02:57:28.445 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:57:28.445 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 02:57:28.447 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 02:57:28.456 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 02:57:28.462 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 02:57:28.465 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:57:28.467 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 02:57:28.469 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 02:57:28.469 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 02:57:28.470 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 02:58:36.687 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 02:58:36.693 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 02:58:36.759 [http-nio-8081-exec-7] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/admin/users?continue to session
2025-02-16 02:58:36.761 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8081/login
2025-02-16 02:58:36.774 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 02:58:43.944 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 02:58:43.947 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 02:58:43.955 [http-nio-8081-exec-10] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/admin/users?continue to session
2025-02-16 02:58:43.956 [http-nio-8081-exec-10] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8081/login
2025-02-16 02:58:43.961 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 02:59:28.027 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 02:59:28.032 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:59:28.032 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 02:59:28.034 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 02:59:28.035 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 02:59:28.049 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}]
2025-02-16 02:59:28.106 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:59:28.107 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:59:28.107 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@16a15338]
2025-02-16 02:59:28.109 [http-nio-8081-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value: ru.kata.spring.boot_security.demo.model.User.password]
2025-02-16 02:59:28.109 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 02:59:49.830 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 02:59:49.836 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 02:59:49.836 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 02:59:49.837 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 02:59:49.838 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 02:59:49.848 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='admin3@example.com', firstName='Admin3', lastName='Admin3', age=32}]
2025-02-16 02:59:49.860 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 02:59:49.861 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 02:59:49.864 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@33e28d44]
2025-02-16 02:59:49.865 [http-nio-8081-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value: ru.kata.spring.boot_security.demo.model.User.password]
2025-02-16 02:59:49.866 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 03:01:33.597 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:01:33.609 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:01:33.618 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:01:33.627 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 03:01:33.726 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 03:01:33.732 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 03:01:33.738 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 03:01:33.744 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 03:01:33.764 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:01:33.767 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:01:36.381 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80886 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:01:36.381 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:01:36.382 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:01:36.423 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:01:36.423 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:01:36.855 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:01:36.885 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 03:01:37.186 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:01:37.195 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:01:37.195 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:01:37.217 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:01:37.217 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 794 ms
2025-02-16 03:01:37.331 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:01:37.359 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:01:37.376 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:01:37.520 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:01:37.535 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:01:37.636 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@37456707
2025-02-16 03:01:37.637 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:01:37.690 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:01:38.135 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:01:38.141 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 03:01:38.467 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 03:01:38.468 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 03:01:38.469 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 03:01:38.469 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 03:01:38.472 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 03:01:38.474 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 03:01:38.478 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 03:01:38.501 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 03:01:38.508 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 03:01:38.513 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 03:01:38.519 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 03:01:38.525 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 03:01:38.537 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 03:01:38.550 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:01:38.673 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:01:39.122 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:01:39.144 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 03:01:39.155 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 03:01:39.156 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 03:01:39.158 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:01:39.270 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 03:01:39.276 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:01:39.285 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:01:39.287 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 03:01:39.365 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 03:01:39.367 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:01:39.368 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:01:39.370 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 03:01:39.412 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:01:39.477 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:01:39.511 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:01:39.531 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:01:39.563 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:01:39.604 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:01:39.649 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:01:39.667 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:01:39.673 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.813 seconds (process running for 4.168)
2025-02-16 03:01:47.204 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:01:47.210 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:01:47.212 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:01:47.212 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:01:47.212 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:01:47.215 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3b4cc499
2025-02-16 03:01:47.216 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1139bdab
2025-02-16 03:01:47.216 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:01:47.216 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-02-16 03:01:47.233 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:01:47.241 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:01:47.242 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:01:47.244 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:01:47.247 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:01:47.279 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:01:47.286 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:01:47.293 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:01:47.308 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:01:47.308 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 03:01:47.367 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:01:51.899 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/1
2025-02-16 03:01:51.905 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/1
2025-02-16 03:01:51.906 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/1", parameters={}
2025-02-16 03:01:51.907 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getUserById(Long)
2025-02-16 03:01:51.957 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:01:51.966 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:01:51.966 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}]
2025-02-16 03:01:51.967 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:01:51.967 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:02:16.380 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:02:16.382 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:02:16.382 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:02:16.383 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:02:16.383 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:02:16.451 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='user1@example.com', firstName='User1', lastName='User1', age=25}]
2025-02-16 03:02:16.457 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:02:16.461 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:02:16.464 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:02:16.464 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=3, email='user1@example.com', firstName='User1', lastName='User1', age=25}]
2025-02-16 03:02:16.465 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:03:34.459 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/кщдуы
2025-02-16 03:03:34.461 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/кщдуы
2025-02-16 03:03:34.461 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/%D0%BA%D1%89%D0%B4%D1%83%D1%8B", parameters={}
2025-02-16 03:03:34.463 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:03:34.466 [http-nio-8081-exec-6] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 03:03:34.471 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 03:03:34.476 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 03:03:34.479 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@4a9aa9ba]
2025-02-16 03:03:34.481 [http-nio-8081-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/%D0%BA%D1%89%D0%B4%D1%83%D1%8B.]
2025-02-16 03:03:34.482 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 03:03:34.482 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:03:39.269 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:03:39.272 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:03:39.273 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:03:39.273 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:03:39.286 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:03:39.294 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 03:03:39.295 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:03:39.296 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:03:39.297 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:06:57.246 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:06:57.253 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:06:57.253 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:06:57.254 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:06:57.254 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:06:57.259 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='2@example.com', firstName='User1', lastName='User1', age=25}]
2025-02-16 03:06:57.271 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:06:57.290 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:06:57.297 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:06:57.297 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=4, email='2@example.com', firstName='User1', lastName='User1', age=25}]
2025-02-16 03:06:57.298 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:08:03.602 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:08:03.613 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:08:03.614 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:08:03.614 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:08:03.615 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:08:03.620 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='3@example.com', firstName='User1', lastName='User1', age=25}]
2025-02-16 03:08:03.628 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:08:03.634 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:08:03.640 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:08:03.640 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=5, email='3@example.com', firstName='User1', lastName='User1', age=25}]
2025-02-16 03:08:03.641 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:08:38.037 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:08:38.060 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:08:38.066 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:08:38.070 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 03:08:38.113 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 03:08:38.118 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 03:08:38.125 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 03:08:38.128 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 03:08:38.139 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:08:38.155 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:08:41.217 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 80962 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:08:41.219 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:08:41.220 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:08:41.276 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:08:41.277 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:08:41.701 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:08:41.732 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-02-16 03:08:42.025 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:08:42.032 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:08:42.032 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:08:42.053 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:08:42.053 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 776 ms
2025-02-16 03:08:42.161 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:08:42.188 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:08:42.204 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:08:42.369 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:08:42.411 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:08:42.494 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@10f86955
2025-02-16 03:08:42.495 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:08:42.548 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:08:42.968 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:08:42.975 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 03:08:43.303 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 03:08:43.304 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 03:08:43.306 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o" via JDBC [Table 'my_db.user_role' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:479)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:245)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:218)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:186)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:156)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:116)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:238)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1506)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:336)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:307)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:334)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at ru.kata.spring.boot_security.demo.SpringBootSecurityDemoApplication.main(SpringBootSecurityDemoApplication.java:16)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLSyntaxErrorException: Table 'my_db.user_role' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 42 common frames omitted
2025-02-16 03:08:43.306 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 03:08:43.309 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 03:08:43.312 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 03:08:43.316 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 03:08:43.329 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        age integer,
        id bigint not null auto_increment,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 03:08:43.340 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        role_id integer not null,
        user_id bigint not null,
        primary key (role_id, user_id)
    ) engine=InnoDB
2025-02-16 03:08:43.345 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 03:08:43.355 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 03:08:43.364 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 03:08:43.376 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 03:08:43.389 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:08:43.563 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:08:43.958 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:08:43.990 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 03:08:44.001 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 03:08:44.003 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 03:08:44.004 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:08:44.119 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 03:08:44.127 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:08:44.133 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:08:44.135 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 03:08:44.216 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 03:08:44.218 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:08:44.220 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:08:44.221 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 03:08:44.266 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:08:44.329 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:08:44.367 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:08:44.389 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:08:44.421 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:08:44.463 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:08:44.505 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:08:44.524 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:08:44.530 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 4.295 seconds (process running for 5.285)
2025-02-16 03:08:51.824 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:08:51.825 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:08:51.825 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:08:51.825 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:08:51.826 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:08:51.829 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3825d90d
2025-02-16 03:08:51.829 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@602f0626
2025-02-16 03:08:51.830 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:08:51.830 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-02-16 03:08:51.851 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 03:08:51.861 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 03:08:51.863 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 03:08:51.865 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 03:08:51.883 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 03:08:51.885 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 03:08:51.886 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=D69D21E21EB2A67D76D5E2D63B1C60B0], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:08:51.896 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 03:08:51.957 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 03:08:58.409 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 03:08:58.536 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 03:08:58.629 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 03:08:58.644 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from E5DC846D27DDEE779DA0677DA007C0ED
2025-02-16 03:08:58.646 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1e724b49]
2025-02-16 03:08:58.646 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 03:08:58.654 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:08:58.655 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:08:58.655 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:08:58.656 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:08:58.681 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:08:58.697 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:08:58.869 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:08:58.927 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:08:58.929 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:08:58.929 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:08:58.930 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:08:58.930 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:08:58.930 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:08:58.931 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:08:58.931 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:08:58.943 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:08:58.943 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:08:58.943 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:08:58.944 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:08:58.954 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:08:58.954 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:08:58.968 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:08:58.968 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:08:58.968 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:08:58.968 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:08:58.968 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:08:58.968 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:08:58.968 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:08:58.973 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:08:58.974 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:08:58.979 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:08:58.981 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:08:58.987 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:08:58.987 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:08:58.988 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:08:58.988 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 03:08:59.013 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:08:59.014 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:08:59.017 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:10:01.873 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:10:01.880 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:10:01.881 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:10:01.882 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:10:01.883 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:10:01.964 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:10:01.971 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:10:01.976 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:10:01.981 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:10:01.982 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=3, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:10:01.983 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:10:01.986 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:10:01.986 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:10:01.986 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:10:01.986 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:10:01.987 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:10:01.994 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:10:01.996 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:10:02.000 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:10:02.009 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:10:02.013 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:10:02.014 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 03:10:02.014 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:10:28.067 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:10:28.074 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:10:28.079 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:10:28.080 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:10:28.081 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:10:28.092 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:10:28.138 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:10:28.159 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:10:28.159 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:10:28.160 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:10:28.160 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:10:28.160 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:10:28.160 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:10:28.161 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:10:28.161 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:10:28.168 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:10:28.171 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:10:28.168 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:10:28.174 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:10:28.188 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:10:28.188 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:10:28.189 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:10:28.189 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:10:28.189 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:10:28.189 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:10:28.189 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:10:28.189 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:10:28.189 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:10:28.211 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:10:28.211 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:10:28.227 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:10:28.228 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:10:28.229 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:10:28.231 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:10:28.232 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:10:28.233 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:10:28.234 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:10:28.236 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:10:28.237 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 03:10:28.240 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:10:41.007 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users0
2025-02-16 03:10:41.009 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users0
2025-02-16 03:10:41.011 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users0", parameters={}
2025-02-16 03:10:41.014 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:10:41.042 [http-nio-8081-exec-2] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 03:10:41.051 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 03:10:41.056 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:10:41.057 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@353747aa]
2025-02-16 03:10:41.059 [http-nio-8081-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users0.]
2025-02-16 03:10:41.060 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 03:10:41.060 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:11:07.706 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users3
2025-02-16 03:11:07.709 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users3
2025-02-16 03:11:07.711 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users3", parameters={}
2025-02-16 03:11:07.712 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:11:07.716 [http-nio-8081-exec-3] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 03:11:07.723 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 03:11:07.725 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:11:07.726 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@92a13a1]
2025-02-16 03:11:07.727 [http-nio-8081-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users3.]
2025-02-16 03:11:07.727 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 03:11:07.728 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:11:09.928 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:11:09.929 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:11:09.929 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:11:09.930 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:11:09.930 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:11:09.938 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:11:09.981 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:11:10.017 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:11:10.017 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:11:10.018 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:11:10.018 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:11:10.018 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:11:10.018 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:11:10.020 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:11:10.020 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:11:10.026 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:11:10.026 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:11:10.026 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:11:10.027 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:11:10.035 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:11:10.035 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:11:10.035 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:11:10.036 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:11:10.036 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:11:10.036 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:11:10.036 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:11:10.037 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:11:10.038 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:11:10.052 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:11:10.052 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:11:10.055 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:11:10.056 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:11:10.056 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:11:10.057 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:11:10.057 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:11:10.058 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:11:10.060 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:11:10.063 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:11:10.063 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 03:11:10.075 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:11:26.977 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users3
2025-02-16 03:11:26.981 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users3
2025-02-16 03:11:26.982 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users3", parameters={}
2025-02-16 03:11:26.983 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:11:27.004 [http-nio-8081-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 03:11:27.006 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 03:11:27.007 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:11:27.008 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@755cee0d]
2025-02-16 03:11:27.009 [http-nio-8081-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users3.]
2025-02-16 03:11:27.010 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 03:11:27.010 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:11:40.329 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users0
2025-02-16 03:11:40.335 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users0
2025-02-16 03:11:40.342 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users0", parameters={}
2025-02-16 03:11:40.346 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:11:40.351 [http-nio-8081-exec-2] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 03:11:40.354 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 03:11:40.358 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:11:40.358 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@4eff6a28]
2025-02-16 03:11:40.360 [http-nio-8081-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users0.]
2025-02-16 03:11:40.360 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 03:11:40.360 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:25.993 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:13:25.998 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:13:26.005 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:13:26.008 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FKa68196081fvovjhkek5m97n3y
2025-02-16 03:13:26.045 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table user_role 
       drop 
       foreign key FK859n2jvi8ivhui0rl0esws6o
2025-02-16 03:13:26.048 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists role
2025-02-16 03:13:26.052 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user
2025-02-16 03:13:26.055 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists user_role
2025-02-16 03:13:26.063 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:13:26.066 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:13:28.176 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81018 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:13:28.177 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:13:28.178 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:13:28.220 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:13:28.220 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:13:28.592 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:13:28.622 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 03:13:28.926 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:13:28.934 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:13:28.935 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:13:28.957 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:13:28.957 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 737 ms
2025-02-16 03:13:29.066 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:13:29.093 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:13:29.109 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:13:29.251 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:13:29.265 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:13:29.344 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@102ac761
2025-02-16 03:13:29.345 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:13:29.396 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:13:29.823 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:13:29.859 [restartedMain] DEBUG org.hibernate.SQL - 
    create table role (
        id integer not null auto_increment,
        name varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 03:13:29.872 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user (
        id bigint not null auto_increment,
        age integer,
        email varchar(255) not null,
        first_name varchar(255),
        last_name varchar(255),
        password varchar(255) not null,
        primary key (id)
    ) engine=InnoDB
2025-02-16 03:13:29.877 [restartedMain] DEBUG org.hibernate.SQL - 
    create table user_role (
        user_id bigint not null,
        role_id integer not null,
        primary key (user_id, role_id)
    ) engine=InnoDB
2025-02-16 03:13:29.881 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       drop index UK8sewwnpamngi6b1dwaa88askk
2025-02-16 03:13:30.208 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table role 
       add constraint UK8sewwnpamngi6b1dwaa88askk unique (name)
2025-02-16 03:13:30.224 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       drop index UKob8kqyqqgmefl0aco34akdtpe
2025-02-16 03:13:30.227 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user 
       add constraint UKob8kqyqqgmefl0aco34akdtpe unique (email)
2025-02-16 03:13:30.234 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FKa68196081fvovjhkek5m97n3y 
       foreign key (role_id) 
       references role (id)
2025-02-16 03:13:30.247 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table user_role 
       add constraint FK859n2jvi8ivhui0rl0esws6o 
       foreign key (user_id) 
       references user (id)
2025-02-16 03:13:30.258 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:13:30.383 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:13:30.844 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:13:30.865 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 03:13:30.876 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.Role */insert 
    into
        role (name) 
    values
        (?)
2025-02-16 03:13:30.877 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles added: ROLE_ADMIN, ROLE_USER
2025-02-16 03:13:30.879 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:13:31.009 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 03:13:31.014 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:13:31.018 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:13:31.020 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 03:13:31.101 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 03:13:31.103 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:13:31.105 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:13:31.107 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 03:13:31.161 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:13:31.227 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:13:31.266 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:13:31.294 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:13:31.329 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:13:31.369 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:13:31.417 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:13:31.434 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:13:31.440 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.742 seconds (process running for 4.363)
2025-02-16 03:13:35.315 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:13:35.316 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:13:35.316 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:13:35.316 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:13:35.316 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:13:35.319 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@701946a
2025-02-16 03:13:35.319 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@57b48ba0
2025-02-16 03:13:35.320 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:13:35.320 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 03:13:35.331 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:13:35.337 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:13:35.339 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:13:35.341 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:13:35.363 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:35.381 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:13:35.628 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:13:35.663 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:13:35.666 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:13:35.666 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:13:35.667 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:13:35.668 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:13:35.667 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:13:35.670 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:13:35.670 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:13:35.682 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:13:35.683 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:13:35.690 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:35.690 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:35.693 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:13:35.694 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:13:35.694 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:13:35.694 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:35.695 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:13:35.695 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:13:35.695 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:13:35.695 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:13:35.695 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:13:35.716 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:13:35.716 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:13:35.741 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:13:35.760 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:13:35.770 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:13:35.770 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:13:35.771 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:13:35.771 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=1, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=2, email=' (truncated)...]
2025-02-16 03:13:35.893 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:13:35.894 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:35.899 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:13:40.787 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/1
2025-02-16 03:13:40.790 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/1
2025-02-16 03:13:40.791 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/1", parameters={}
2025-02-16 03:13:40.792 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:13:40.827 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:13:40.838 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:13:40.842 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 03:13:40.852 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:13:40.852 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:13:40.852 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:13:40.852 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:50.494 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:13:50.500 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:13:50.508 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:13:50.514 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:13:50.530 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:13:52.166 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81028 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:13:52.166 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:13:52.167 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:13:52.193 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:13:52.194 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:13:52.545 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:13:52.574 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 03:13:52.851 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:13:52.858 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:13:52.859 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:13:52.879 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:13:52.879 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 685 ms
2025-02-16 03:13:52.981 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:13:53.002 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:13:53.016 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:13:53.148 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:13:53.161 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:13:53.233 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@11384511
2025-02-16 03:13:53.233 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:13:53.276 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:13:53.703 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:13:53.760 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:13:53.904 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:13:54.281 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:13:54.294 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:13:54.296 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:13:54.300 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:13:54.303 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:13:54.342 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:13:54.402 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:13:54.437 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:13:54.461 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:13:54.491 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:13:54.531 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:13:54.571 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:13:54.589 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:13:54.595 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.935 seconds (process running for 3.301)
2025-02-16 03:13:57.075 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:13:57.076 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:13:57.076 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:13:57.076 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:13:57.076 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:13:57.079 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@615eb25c
2025-02-16 03:13:57.079 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7779b566
2025-02-16 03:13:57.079 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:13:57.080 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 03:13:57.096 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:13:57.101 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:13:57.102 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:13:57.104 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:13:57.113 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:57.123 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:13:57.409 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:13:57.458 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:13:57.457 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:13:57.468 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:13:57.468 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:13:57.468 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:13:57.468 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:13:57.471 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:13:57.470 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:13:57.528 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:13:57.529 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:57.528 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:13:57.529 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:57.543 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:13:57.545 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:57.568 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:13:57.569 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:13:57.569 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:13:57.568 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:13:57.569 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:13:57.569 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:13:57.570 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:13:57.584 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:13:57.584 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:13:57.589 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:13:57.653 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:13:57.655 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:13:57.659 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:13:57.659 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 03:13:57.706 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:13:57.708 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:13:57.725 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:01.419 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/2
2025-02-16 03:14:01.421 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/2
2025-02-16 03:14:01.423 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/2", parameters={}
2025-02-16 03:14:01.424 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:14:01.465 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:14:01.498 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:14:01.502 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 03:14:01.507 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:14:01.507 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:14:01.507 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:14:01.508 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:10.669 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:14:10.672 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:14:10.673 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:14:10.674 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:14:10.677 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:10.683 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:14:10.743 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:10.761 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:14:10.761 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:14:10.763 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:14:10.763 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:14:10.763 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:14:10.764 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:14:10.766 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:14:10.766 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:14:10.769 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:10.769 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:10.770 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:10.771 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:10.776 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:14:10.779 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:14:10.779 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:14:10.779 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:14:10.779 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:14:10.780 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:10.781 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:14:10.784 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:14:10.785 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:14:10.816 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:14:10.816 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:14:10.867 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:14:10.867 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:14:10.868 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:14:10.868 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-02-16 03:14:10.876 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:10.878 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:10.878 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:24.303 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:14:24.315 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:14:24.319 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:14:24.326 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:14:24.336 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:14:26.648 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81039 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:14:26.648 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:14:26.649 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:14:26.711 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:14:26.711 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:14:27.115 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:14:27.145 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 03:14:27.427 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:14:27.437 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:14:27.437 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:14:27.456 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:14:27.457 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 745 ms
2025-02-16 03:14:27.674 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:14:27.708 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:14:27.724 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:14:27.843 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:14:27.859 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:14:27.950 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5f34355f
2025-02-16 03:14:27.951 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:14:27.999 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:14:28.393 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:14:28.439 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:14:28.551 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:14:28.936 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:14:28.948 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:14:28.950 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:14:29.061 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 03:14:29.070 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:14:29.080 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:14:29.088 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 03:14:29.165 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 03:14:29.167 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:14:29.168 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:14:29.170 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 03:14:29.213 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:14:29.278 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:14:29.317 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:14:29.335 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:14:29.361 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:14:29.396 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:14:29.439 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:14:29.456 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:14:29.462 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.626 seconds (process running for 4.324)
2025-02-16 03:14:32.053 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:14:32.054 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:14:32.054 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:14:32.054 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:14:32.054 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:14:32.066 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3c82090b
2025-02-16 03:14:32.067 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7d39829f
2025-02-16 03:14:32.067 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:14:32.067 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 13 ms
2025-02-16 03:14:32.080 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:14:32.085 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:14:32.086 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:14:32.100 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:14:32.111 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:32.121 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:14:32.309 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:32.331 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:14:32.331 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:14:32.331 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:14:32.332 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:14:32.332 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:14:32.332 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:14:32.332 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:14:32.332 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:14:32.360 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:32.379 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:32.380 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:32.380 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:32.392 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:14:32.392 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:14:32.392 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:32.392 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:14:32.393 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:14:32.394 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:14:32.392 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:14:32.395 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:14:32.404 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:14:32.516 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:14:32.517 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:14:32.536 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:14:32.579 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:14:32.596 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:14:32.596 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:14:32.599 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:14:32.599 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=3, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=4, email=' (truncated)...]
2025-02-16 03:14:32.633 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:32.634 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:32.638 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:38.797 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/3
2025-02-16 03:14:38.801 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/3
2025-02-16 03:14:38.802 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/3", parameters={}
2025-02-16 03:14:38.804 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:14:38.854 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:14:38.865 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:14:38.871 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 03:14:38.877 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:14:38.877 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:14:38.877 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:14:38.877 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:51.249 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:14:51.254 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:14:51.255 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:14:51.256 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:14:51.261 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:51.268 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:14:51.328 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:51.356 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:14:51.356 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:14:51.356 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:14:51.356 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:14:51.357 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:14:51.357 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:14:51.357 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:14:51.357 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:14:51.366 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:51.367 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:51.406 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:51.427 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:51.431 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:14:51.436 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:14:51.437 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:14:51.437 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:51.437 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:14:51.437 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:14:51.438 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:14:51.438 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:14:51.439 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:14:51.455 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:14:51.455 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:14:51.499 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:14:51.508 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:14:51.509 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:14:51.512 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:14:51.514 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 03:14:51.526 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:51.527 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:14:51.527 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:14:58.612 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users0
2025-02-16 03:14:58.616 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users0
2025-02-16 03:14:58.616 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users0", parameters={}
2025-02-16 03:14:58.618 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:14:58.644 [http-nio-8081-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-02-16 03:14:58.650 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 03:14:58.654 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:14:58.655 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@6351d9ba]
2025-02-16 03:14:58.658 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource admin/users0.]
2025-02-16 03:14:58.659 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 03:14:58.660 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:15.720 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:15:15.731 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:15:15.735 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:15:15.742 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:15:15.750 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:15:17.844 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81047 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:15:17.845 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:15:17.846 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:15:17.890 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:15:17.891 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:15:18.263 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:15:18.292 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 03:15:18.588 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:15:18.595 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:15:18.596 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:15:18.619 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:15:18.619 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 728 ms
2025-02-16 03:15:18.727 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:15:18.749 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:15:18.763 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:15:18.894 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:15:18.907 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:15:18.983 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4d13b0be
2025-02-16 03:15:18.985 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:15:19.026 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:15:19.438 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:15:19.485 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:15:19.595 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:15:20.003 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:15:20.018 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:15:20.019 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:15:20.024 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:15:20.028 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:15:20.064 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:15:20.122 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:15:20.159 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:15:20.183 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:15:20.225 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:15:20.263 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:15:20.310 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:15:20.327 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:15:20.333 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.1 seconds (process running for 3.636)
2025-02-16 03:15:23.407 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:15:23.411 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:15:23.412 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:15:23.412 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:15:23.412 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:15:23.414 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@64c9ebc3
2025-02-16 03:15:23.415 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4a416efa
2025-02-16 03:15:23.415 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:15:23.415 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 03:15:23.426 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:15:23.434 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:15:23.436 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:15:23.438 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:15:23.449 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:23.464 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:15:23.732 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:15:23.818 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:15:23.819 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:15:23.819 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:15:23.818 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:15:23.820 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:15:23.820 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:15:23.820 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:15:23.821 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:15:23.827 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:15:23.827 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:15:23.828 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:23.828 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:23.834 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:15:23.835 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:15:23.836 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:15:23.836 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:15:23.837 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:15:23.835 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:23.838 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:15:23.839 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:15:23.839 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:15:23.864 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:15:23.864 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:15:23.867 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:15:23.880 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:15:23.881 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:15:23.884 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 03:15:23.884 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:15:23.948 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:15:23.948 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:23.952 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:15:36.239 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/0
2025-02-16 03:15:36.242 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/0
2025-02-16 03:15:36.244 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/0", parameters={}
2025-02-16 03:15:36.246 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:15:36.319 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=35}]
2025-02-16 03:15:36.334 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:15:36.341 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(NoSuchUserException)
2025-02-16 03:15:36.343 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:15:36.344 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@6026d8cc]
2025-02-16 03:15:36.345 [http-nio-8081-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [ru.kata.spring.boot_security.demo.exception_handling.NoSuchUserException: User with id 0 not found]
2025-02-16 03:15:36.346 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-16 03:15:36.347 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:40.897 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:15:40.900 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:15:40.901 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:15:40.903 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:15:40.904 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:40.914 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:15:40.939 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:15:41.046 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:15:41.046 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:15:41.046 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:15:41.047 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:15:41.047 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:15:41.047 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:15:41.047 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:15:41.048 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:15:41.052 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:15:41.062 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:41.062 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:15:41.069 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:41.069 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:15:41.069 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:15:41.070 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:41.070 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:15:41.070 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:15:41.070 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:15:41.070 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:15:41.070 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:15:41.071 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:15:41.084 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:15:41.084 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:15:41.107 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:15:41.113 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:15:41.115 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:15:41.124 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:15:41.124 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:15:41.124 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:15:41.134 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 03:15:41.139 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:15:47.436 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/0
2025-02-16 03:15:47.438 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/0
2025-02-16 03:15:47.439 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/0", parameters={}
2025-02-16 03:15:47.441 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:15:47.446 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=35}]
2025-02-16 03:15:47.471 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:15:47.480 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(NoSuchUserException)
2025-02-16 03:15:47.481 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:15:47.481 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@650502a6]
2025-02-16 03:15:47.482 [http-nio-8081-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [ru.kata.spring.boot_security.demo.exception_handling.NoSuchUserException: User with id 0 not found]
2025-02-16 03:15:47.482 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-16 03:15:47.482 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:17:11.477 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:17:11.486 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:17:11.490 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:17:11.497 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:17:11.506 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:17:13.834 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81072 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:17:13.835 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:17:13.836 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:17:13.888 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:17:13.888 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:17:14.263 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:17:14.292 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 03:17:14.584 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:17:14.591 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:17:14.591 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:17:14.612 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:17:14.612 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 723 ms
2025-02-16 03:17:14.715 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:17:14.737 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:17:14.751 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:17:14.884 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:17:14.899 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:17:14.976 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3820fa12
2025-02-16 03:17:14.977 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:17:15.017 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:17:15.423 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:17:15.468 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:17:15.589 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:17:16.001 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:17:16.013 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:17:16.014 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:17:16.018 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:17:16.022 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:17:16.066 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:17:16.131 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:17:16.169 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:17:16.197 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:17:16.245 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:17:16.284 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:17:16.328 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:17:16.346 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:17:16.352 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.392 seconds (process running for 3.885)
2025-02-16 03:17:19.635 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:17:19.636 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:17:19.636 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:17:19.636 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:17:19.636 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:17:19.644 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@f9c2efe
2025-02-16 03:17:19.644 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1aeca80e
2025-02-16 03:17:19.644 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:17:19.644 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-02-16 03:17:19.659 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:17:19.664 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:17:19.665 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:17:19.667 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:17:19.678 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:17:19.692 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:17:19.956 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:17:19.968 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:17:19.968 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:17:19.971 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:17:19.971 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:17:19.971 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:17:19.973 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:17:19.972 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:17:19.974 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:17:20.057 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:17:20.057 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:17:20.059 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:17:20.065 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:17:20.071 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:17:20.072 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:17:20.072 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:17:20.073 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:17:20.073 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:17:20.073 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:17:20.073 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:17:20.073 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:17:20.074 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:17:20.090 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:17:20.090 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:17:20.100 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:17:20.111 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:17:20.111 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:17:20.114 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 03:17:20.114 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:17:20.162 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:17:20.162 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:17:20.166 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:17:28.171 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/4
2025-02-16 03:17:28.173 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/4
2025-02-16 03:17:28.174 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/4", parameters={}
2025-02-16 03:17:28.175 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:17:28.246 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=35}]
2025-02-16 03:17:28.262 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:17:28.277 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:17:28.294 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.model.User */update user 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=? 
    where
        id=?
2025-02-16 03:17:28.300 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:17:28.306 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:17:28.306 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=35}]
2025-02-16 03:17:28.307 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:17:28.308 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:17:28.311 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:17:28.312 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:17:28.312 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:17:28.312 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:17:28.312 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:17:28.314 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:17:28.315 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:17:28.317 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:17:28.317 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=35}]]
2025-02-16 03:17:28.318 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:17:54.595 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/4
2025-02-16 03:17:54.600 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/4
2025-02-16 03:17:54.601 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/4", parameters={}
2025-02-16 03:17:54.602 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:17:54.614 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=35}]
2025-02-16 03:17:54.626 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:17:54.642 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:17:54.645 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.id=?
2025-02-16 03:17:54.667 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:17:54.672 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:17:54.673 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=35}]
2025-02-16 03:17:54.675 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:17:54.675 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:17:54.679 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:17:54.680 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:17:54.680 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:17:54.680 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:17:54.680 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:17:54.687 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:17:54.689 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:17:54.692 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:17:54.692 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=35}]]
2025-02-16 03:17:54.693 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:01.035 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/4
2025-02-16 03:18:01.036 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/4
2025-02-16 03:18:01.036 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/4", parameters={}
2025-02-16 03:18:01.036 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:18:01.038 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=35}]
2025-02-16 03:18:01.041 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:18:01.047 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:18:01.051 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.id=?
2025-02-16 03:18:01.058 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:18:01.062 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:18:01.062 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=35}]
2025-02-16 03:18:01.064 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:01.064 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:01.068 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:18:01.068 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:01.069 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:18:01.069 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:18:01.069 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:18:01.072 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:18:01.074 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:18:01.078 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:18:01.079 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=4, email='admin@example.com', firstName='Admin', lastName='Admin', age=35}]]
2025-02-16 03:18:01.081 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:10.979 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/4
2025-02-16 03:18:10.985 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/4
2025-02-16 03:18:10.986 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/4", parameters={}
2025-02-16 03:18:10.991 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:18:11.015 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:18:11.043 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:18:11.071 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 03:18:11.076 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:18:11.076 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:18:11.076 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:18:11.076 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:13.425 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:18:13.429 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:18:13.430 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:18:13.430 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:18:13.431 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:13.433 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:18:13.472 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:13.481 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:18:13.481 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:18:13.481 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:18:13.481 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:18:13.481 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:18:13.481 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:18:13.482 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:18:13.482 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:18:13.483 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:13.483 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:13.484 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:13.484 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:13.488 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:18:13.488 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:18:13.489 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:18:13.489 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:13.489 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:18:13.489 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:18:13.490 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:18:13.490 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:18:13.490 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:18:13.493 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:18:13.493 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:18:13.495 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:18:13.495 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-02-16 03:18:13.495 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:18:13.495 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:18:13.496 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:13.496 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:13.496 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:18.801 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:18:18.806 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:18:18.807 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:18:18.809 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:18:18.813 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:18.816 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:18:18.845 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:18.859 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:18:18.859 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:18:18.860 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:18:18.860 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:18:18.860 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:18:18.860 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:18:18.861 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:18:18.861 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:18:18.862 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:18.862 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:18.863 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:18.863 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:18.868 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:18:18.868 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:18:18.868 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:18.868 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:18:18.869 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:18:18.869 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:18:18.869 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:18:18.869 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:18:18.869 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:18:18.878 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:18:18.878 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:18:18.881 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:18:18.881 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:18:18.882 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:18:18.882 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-02-16 03:18:18.882 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:18.882 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:18.883 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=2, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=E5DC846D27DDEE779DA0677DA007C0ED], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:20.258 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 03:18:20.310 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 03:18:24.348 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 03:18:24.490 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 03:18:24.570 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 03:18:24.576 [http-nio-8081-exec-3] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 03:18:24.581 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 03:18:24.604 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 03:18:27.240 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:18:27.248 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:18:27.253 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:18:27.265 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:18:27.267 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:18:28.997 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81087 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:18:28.998 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:18:28.998 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:18:29.025 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:18:29.025 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:18:29.393 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:18:29.422 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 03:18:29.708 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:18:29.715 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:18:29.715 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:18:29.737 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:18:29.737 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 712 ms
2025-02-16 03:18:29.852 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:18:29.876 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:18:29.891 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:18:30.030 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:18:30.043 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:18:30.116 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1ab8baa1
2025-02-16 03:18:30.117 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:18:30.162 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:18:30.622 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:18:30.678 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:18:30.840 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:18:31.243 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:18:31.256 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:18:31.258 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:18:31.374 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 03:18:31.388 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:18:31.411 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:18:31.413 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - User added: user@example.com
2025-02-16 03:18:31.495 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.name=?
2025-02-16 03:18:31.497 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:18:31.499 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:18:31.502 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Admin added: admin@example.com
2025-02-16 03:18:31.552 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:18:31.622 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:18:31.670 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:18:31.696 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:18:31.742 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:18:31.797 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:18:31.842 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:18:31.859 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:18:31.866 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.319 seconds (process running for 3.769)
2025-02-16 03:18:52.819 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:18:52.820 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:18:52.821 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:18:52.821 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:18:52.822 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:18:52.824 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7d963381
2025-02-16 03:18:52.824 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@da36aca
2025-02-16 03:18:52.825 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:18:52.825 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 03:18:52.838 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 03:18:52.934 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 03:18:53.019 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 03:18:53.029 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 8056FFCE1B1AD5E4323DEB39F757AC30
2025-02-16 03:18:53.032 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3fe6f5bc]
2025-02-16 03:18:53.032 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 03:18:53.047 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:18:53.050 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:18:53.053 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:18:53.054 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:18:53.077 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:53.096 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:18:53.250 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:53.268 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:18:53.269 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:18:53.269 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:18:53.269 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:18:53.269 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:18:53.270 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:18:53.270 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:18:53.270 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:18:53.280 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:53.280 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:53.281 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:53.281 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:53.290 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:18:53.290 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:18:53.291 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:53.291 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:18:53.291 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:18:53.292 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:18:53.292 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:18:53.292 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:18:53.292 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:18:53.302 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:18:53.302 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:18:53.307 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:18:53.311 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:18:53.319 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:18:53.319 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:18:53.320 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:18:53.320 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:18:53.356 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:18:53.357 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:18:53.360 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:19:02.272 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:19:02.276 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:19:02.277 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:19:02.277 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:19:02.278 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:19:02.352 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:19:02.357 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:19:02.360 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:19:02.361 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:19:02.366 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:19:02.366 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=7, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:19:02.367 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:19:02.371 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:19:02.371 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:19:02.371 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:19:02.372 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:19:02.372 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:19:02.376 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:19:02.378 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:19:02.379 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:19:02.380 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:19:02.382 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:19:02.382 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:19:02.383 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:19:06.277 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:19:06.277 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:19:06.278 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:19:06.279 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:19:06.279 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:19:06.282 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:19:06.322 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:19:06.329 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:19:06.329 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:19:06.329 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:19:06.329 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:19:06.330 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:19:06.330 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:19:06.330 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:19:06.330 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:19:06.332 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:19:06.332 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:19:06.333 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:19:06.333 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:19:06.338 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:19:06.338 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:19:06.339 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:19:06.339 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:19:06.339 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:19:06.339 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:19:06.340 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:19:06.340 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:19:06.340 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:19:06.342 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:19:06.342 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:19:06.345 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:19:06.345 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:19:06.345 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:19:06.346 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:19:06.346 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:19:06.347 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:19:06.348 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:19:06.350 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:19:06.350 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:19:06.351 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:20:42.093 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/7
2025-02-16 03:20:42.101 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/7
2025-02-16 03:20:42.103 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/7", parameters={}
2025-02-16 03:20:42.106 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:20:42.153 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:20:42.169 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:20:42.179 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 03:20:42.185 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:20:42.185 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:20:42.185 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:20:42.186 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:46.695 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:20:46.708 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:20:46.709 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:20:46.710 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:20:46.711 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:46.717 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:20:46.748 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:20:46.773 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:20:46.773 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:20:46.774 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:20:46.774 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:20:46.774 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:20:46.774 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:20:46.775 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:20:46.775 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:20:46.776 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:20:46.777 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:46.777 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:20:46.778 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:46.784 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:20:46.784 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:20:46.786 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:20:46.787 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:20:46.787 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:46.788 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:20:46.788 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:20:46.789 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:20:46.789 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:20:46.799 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:20:46.799 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:20:46.802 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:20:46.804 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:20:46.804 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:20:46.804 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:20:46.806 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:20:46.807 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:46.809 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:20:46.809 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:20:46.809 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:20:55.705 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:20:55.711 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:55.712 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:20:55.712 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:20:55.713 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:20:55.731 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:20:55.742 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:20:55.749 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:20:55.754 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:20:55.758 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:20:55.758 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=8, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:20:55.760 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:20:55.762 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:20:55.762 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:55.762 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:20:55.762 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:20:55.762 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:20:55.765 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:20:55.767 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:20:55.769 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:20:55.772 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:20:55.776 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:20:55.776 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:20:55.777 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:20:57.157 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:20:57.253 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:20:57.254 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:20:57.254 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:20:57.254 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:57.256 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:20:57.285 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:20:57.303 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:20:57.304 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:20:57.304 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:20:57.304 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:20:57.304 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:20:57.305 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:20:57.305 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:20:57.305 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:20:57.308 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:20:57.308 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:57.308 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:20:57.309 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:57.317 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:20:57.317 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:20:57.317 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:20:57.318 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:57.318 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:20:57.318 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:20:57.319 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:20:57.320 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:20:57.320 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:20:57.323 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:20:57.323 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:20:57.326 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:20:57.327 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:20:57.327 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:20:57.328 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:20:57.328 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:20:57.329 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:20:57.330 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:20:57.333 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:20:57.333 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:20:57.334 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:21:10.510 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:21:10.513 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:21:10.514 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:21:10.525 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:21:10.528 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:21:10.533 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:21:10.563 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:21:10.582 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:21:10.582 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:21:10.582 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:21:10.582 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:21:10.583 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:21:10.583 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:21:10.583 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:21:10.583 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:21:10.585 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:21:10.585 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:21:10.586 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:21:10.587 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:21:10.593 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:21:10.593 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:21:10.593 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:21:10.593 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:21:10.593 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:21:10.593 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:21:10.593 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:21:10.594 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:21:10.594 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:21:10.604 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:21:10.604 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:21:10.608 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:21:10.610 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:21:10.610 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:21:10.611 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:21:10.611 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:21:10.612 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:21:10.613 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:21:10.615 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:21:10.615 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:21:10.616 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:22:26.906 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/8
2025-02-16 03:22:26.910 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/8
2025-02-16 03:22:26.911 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/8", parameters={}
2025-02-16 03:22:26.912 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:22:26.930 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=8, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:22:26.962 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:22:27.053 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:22:27.068 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.model.User */update user 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=? 
    where
        id=?
2025-02-16 03:22:27.078 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:22:27.085 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:22:27.085 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=8, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:22:27.088 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:22:27.089 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:22:27.092 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:22:27.093 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:22:27.093 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:22:27.093 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:22:27.093 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:22:27.095 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:22:27.097 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:22:27.099 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:22:27.103 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:22:27.106 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:22:27.108 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:22:27.111 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:22:36.556 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/8
2025-02-16 03:22:36.559 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/8
2025-02-16 03:22:36.559 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/8", parameters={}
2025-02-16 03:22:36.561 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:22:36.568 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=8, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:22:36.580 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:22:36.586 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:22:36.588 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.id=?
2025-02-16 03:22:36.589 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.name 
    from
        role r1_0 
    where
        r1_0.id=?
2025-02-16 03:22:36.597 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:22:36.599 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:22:36.602 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:22:36.602 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=8, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:22:36.604 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:22:36.604 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:22:36.607 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:22:36.607 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:22:36.607 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:22:36.607 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:22:36.607 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:22:36.610 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:22:36.611 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:22:36.612 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:22:36.613 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:22:36.615 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:22:36.615 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:22:36.616 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:25:43.189 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:25:43.197 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:25:43.213 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:25:43.224 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:25:43.227 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:25:45.833 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81281 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:25:45.833 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:25:45.834 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:25:45.865 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:25:45.865 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:25:46.237 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:25:46.266 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 03:25:46.571 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:25:46.579 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:25:46.579 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:25:46.599 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:25:46.599 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 734 ms
2025-02-16 03:25:46.980 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:25:47.009 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:25:47.027 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:25:47.172 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:25:47.187 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:25:47.295 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5ea15446
2025-02-16 03:25:47.296 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:25:47.350 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:25:47.824 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:25:47.893 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:25:48.013 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:25:48.420 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:25:48.437 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:25:48.439 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:25:48.443 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:25:48.446 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:25:48.447 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:25:48.449 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:25:48.492 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:25:48.558 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:25:48.604 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:25:48.626 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:25:48.666 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:25:48.707 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:25:48.759 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:25:48.780 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:25:48.786 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.545 seconds (process running for 4.275)
2025-02-16 03:25:53.533 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:25:53.533 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:25:53.534 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:25:53.534 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:25:53.534 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:25:53.540 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@42b85f5d
2025-02-16 03:25:53.540 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@939ff3c
2025-02-16 03:25:53.541 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:25:53.541 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-02-16 03:25:53.554 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:25:53.559 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:25:53.560 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:25:53.562 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:25:53.580 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:25:53.593 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:25:53.804 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:25:53.832 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:25:53.832 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:25:53.832 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:25:53.833 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:25:53.833 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:25:53.833 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:25:53.834 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:25:53.834 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:25:53.845 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:25:53.845 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:25:53.847 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:25:53.847 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:25:53.852 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:25:53.852 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:25:53.853 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:25:53.853 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:25:53.853 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:25:53.854 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:25:53.854 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:25:53.854 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:25:53.854 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:25:53.873 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:25:53.873 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:25:53.877 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:25:53.880 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:25:53.882 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:25:53.887 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:25:53.887 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:25:53.889 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:25:53.889 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:25:53.925 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:25:53.925 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:25:53.928 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:02.736 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:26:02.739 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:02.740 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:26:02.741 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:26:02.741 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:26:02.819 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:26:02.844 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:26:03.175 [http-nio-8081-exec-8] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-02-16 03:26:03.175 [http-nio-8081-exec-8] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Duplicate entry 'dimaromanov06@gmail.com' for key 'user.UKob8kqyqqgmefl0aco34akdtpe'
2025-02-16 03:26:03.181 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(Exception)
2025-02-16 03:26:03.182 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:26:03.183 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@16ab24a4]
2025-02-16 03:26:03.183 [http-nio-8081-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.dao.DataIntegrityViolationException: could not execute statement [Duplicate entry 'dimaromanov06@gmail.com' for key 'user.UKob8kqyqqgmefl0aco34akdtpe'] [/* insert for ru.kata.spring.boot_security.demo.model.User */insert into user (age,email,first_name,last_name,password) values (?,?,?,?,?)]; SQL [/* insert for ru.kata.spring.boot_security.demo.model.User */insert into user (age,email,first_name,last_name,password) values (?,?,?,?,?)]; constraint [user.UKob8kqyqqgmefl0aco34akdtpe]]
2025-02-16 03:26:03.184 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-02-16 03:26:06.722 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:26:06.723 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:26:06.723 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:26:06.725 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:26:06.725 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:06.727 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:26:06.754 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:06.770 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:26:06.770 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:26:06.770 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:26:06.770 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:26:06.770 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:26:06.770 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:26:06.771 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:26:06.771 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:26:06.773 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:06.773 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:06.773 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:06.773 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:06.782 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:26:06.783 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:06.783 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:26:06.783 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:26:06.783 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:26:06.783 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:26:06.783 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:26:06.784 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:26:06.784 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:26:06.786 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:26:06.786 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:26:06.788 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:26:06.789 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:26:06.789 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:26:06.790 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:26:06.790 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:06.790 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:06.791 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:26:06.793 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:26:06.793 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:26:06.794 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:21.589 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:26:21.592 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:21.593 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:26:21.593 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:26:21.594 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:26:21.600 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov07@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:26:21.621 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:26:21.671 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:26:21.672 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:26:21.685 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:26:21.685 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=10, email='dimaromanov07@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:26:21.686 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:26:24.715 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:26:24.716 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:26:24.717 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:26:24.717 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:26:24.718 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:24.722 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:26:24.762 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:24.771 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:26:24.771 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:26:24.772 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:26:24.772 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:26:24.772 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:26:24.772 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:26:24.773 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:26:24.773 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:26:24.775 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:24.775 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:24.775 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:24.775 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:24.780 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:26:24.780 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:26:24.781 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:24.781 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:26:24.781 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:26:24.781 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:26:24.781 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:26:24.781 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:26:24.781 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:26:24.784 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:26:24.784 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:26:24.786 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:26:24.787 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:26:24.787 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:26:24.787 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:24.788 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:26:24.788 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:24.790 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:26:24.791 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:26:24.792 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:26:24.793 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:26:24.793 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:48.271 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:26:48.273 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:26:48.274 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:26:48.275 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:26:48.280 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:48.286 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:26:48.337 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:48.353 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:26:48.353 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:26:48.353 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:26:48.356 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:26:48.356 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:26:48.357 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:26:48.357 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:26:48.357 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:26:48.359 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:48.359 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:48.360 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:48.360 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:48.368 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:26:48.368 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:26:48.370 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:26:48.372 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:26:48.373 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:48.373 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:26:48.373 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:26:48.373 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:26:48.373 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:26:48.388 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:26:48.388 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:26:48.396 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:26:48.399 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:26:48.399 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:26:48.400 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:26:48.401 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:26:48.401 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:26:48.402 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:26:48.404 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:26:48.409 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:26:48.409 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:26:48.412 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:27:38.535 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:27:38.544 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:27:38.548 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:27:38.555 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:27:38.559 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:27:40.380 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81315 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:27:40.382 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:27:40.383 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:27:40.417 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:27:40.417 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:27:41.159 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:27:41.230 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 2 JPA repository interfaces.
2025-02-16 03:27:41.548 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:27:41.555 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:27:41.555 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:27:41.577 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:27:41.577 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1160 ms
2025-02-16 03:27:41.689 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:27:41.716 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:27:41.732 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:27:41.877 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:27:41.892 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:27:41.971 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@78364e57
2025-02-16 03:27:41.972 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:27:42.023 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:27:42.492 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:27:42.560 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:27:42.699 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:27:43.118 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:27:43.132 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:27:43.133 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:27:43.139 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:27:43.143 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:27:43.144 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:27:43.145 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:27:43.147 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:27:43.191 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:27:43.254 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:27:43.291 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:27:43.312 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:27:43.355 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:27:43.408 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:27:43.456 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:27:43.470 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:27:43.476 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.481 seconds (process running for 3.939)
2025-02-16 03:27:50.218 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:27:50.219 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:27:50.219 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:27:50.219 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:27:50.219 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:27:50.223 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7bd58676
2025-02-16 03:27:50.223 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3fee87e
2025-02-16 03:27:50.223 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:27:50.224 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 03:27:50.235 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:27:50.241 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:27:50.242 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:27:50.244 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:27:50.255 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:27:50.267 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:27:50.450 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:27:50.481 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:27:50.482 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:27:50.487 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:27:50.487 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:27:50.487 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:27:50.487 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:27:50.488 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:27:50.488 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:27:50.510 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:27:50.510 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:27:50.539 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:27:50.539 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:27:50.542 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:27:50.543 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:27:50.543 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:27:50.543 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:27:50.544 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:27:50.544 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:27:50.545 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:27:50.545 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:27:50.546 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:27:50.600 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:27:50.601 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:27:50.620 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:27:50.626 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:27:50.628 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:27:50.630 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:27:50.642 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:27:50.642 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:27:50.648 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:27:50.648 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:27:50.747 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:27:50.747 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:27:50.754 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:28:00.582 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:28:00.589 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:28:00.590 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:28:00.591 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:28:00.592 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:28:00.646 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov08@gmail.com', firstName='Дмитрий', lastName='Еронин', age=333}]
2025-02-16 03:28:00.662 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:28:00.679 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:28:00.681 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:28:00.685 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:28:00.686 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=11, email='dimaromanov08@gmail.com', firstName='Дмитрий', lastName='Еронин', age=333}]
2025-02-16 03:28:00.687 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:28:02.956 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:28:02.958 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:28:02.959 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:28:02.959 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:28:02.960 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:28:02.962 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:28:03.008 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:28:03.038 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:28:03.039 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:28:03.039 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:28:03.039 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:28:03.039 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:28:03.039 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:28:03.040 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:28:03.040 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:28:03.044 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:28:03.044 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:28:03.051 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:28:03.051 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:28:03.078 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:28:03.078 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:28:03.078 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:28:03.078 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:28:03.083 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:28:03.087 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:28:03.090 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:28:03.091 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:28:03.097 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:28:03.143 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:28:03.143 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:28:03.148 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:28:03.151 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:28:03.153 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:28:03.154 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:28:03.154 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:28:03.156 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:28:03.159 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:28:03.161 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:28:03.162 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:28:03.164 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:28:03.164 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:28:03.165 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:28:28.405 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:28:28.427 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:28:28.427 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:28:28.428 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:28:28.428 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:28:28.438 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='1111@111.ru', firstName='1111', lastName='1111', age=1111}]
2025-02-16 03:28:28.460 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:28:28.469 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:28:28.470 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:28:28.474 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:28:28.475 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=12, email='1111@111.ru', firstName='1111', lastName='1111', age=1111}]
2025-02-16 03:28:28.477 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:30:54.992 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:30:54.999 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:30:55.008 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:30:55.015 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:30:55.023 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:30:56.850 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81347 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:30:56.851 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:30:56.852 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:30:56.886 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:30:56.886 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:30:57.278 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:30:57.305 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 2 JPA repository interfaces.
2025-02-16 03:30:57.605 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:30:57.613 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:30:57.614 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:30:57.636 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:30:57.636 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 749 ms
2025-02-16 03:30:57.762 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:30:57.791 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:30:57.808 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:30:57.964 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:30:57.978 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:30:58.064 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@24e1145c
2025-02-16 03:30:58.064 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:30:58.114 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:30:58.544 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:30:58.606 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:30:58.725 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:30:59.122 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:30:59.136 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:30:59.137 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:30:59.142 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:30:59.145 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:30:59.146 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:30:59.146 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:30:59.147 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:30:59.148 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:30:59.149 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:30:59.184 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:30:59.246 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:30:59.283 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:30:59.308 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:30:59.359 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:30:59.400 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:30:59.447 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:30:59.463 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:30:59.469 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.039 seconds (process running for 3.466)
2025-02-16 03:31:04.610 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:31:04.611 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:31:04.611 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:31:04.611 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:31:04.612 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:31:04.619 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@723a0d96
2025-02-16 03:31:04.620 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@49b1ade6
2025-02-16 03:31:04.620 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:31:04.620 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2025-02-16 03:31:04.634 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:31:04.639 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:31:04.641 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:31:04.642 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:31:04.654 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:31:04.665 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:31:04.929 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:31:04.950 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:31:04.952 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:31:04.950 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:31:04.955 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:31:04.955 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:31:04.956 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:31:04.954 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:31:04.958 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:31:04.971 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:31:04.973 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:31:04.973 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:31:04.974 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:31:04.982 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:31:04.982 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:31:04.983 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:31:04.983 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:31:04.983 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:31:04.985 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:31:04.985 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:31:04.986 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:31:04.986 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:31:04.992 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:31:04.992 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:31:05.007 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:05.012 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:05.015 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:05.017 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:05.036 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:05.042 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:05.050 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:31:05.050 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:31:05.055 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:31:05.055 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:31:05.139 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:31:05.139 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:31:05.157 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:31:29.847 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?selectedRoles=1&selectedRoles=2
2025-02-16 03:31:29.895 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?selectedRoles=1&selectedRoles=2
2025-02-16 03:31:29.896 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users?selectedRoles=1&selectedRoles=2", parameters={masked}
2025-02-16 03:31:29.897 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:31:29.898 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:31:29.908 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:31:29.966 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:31:29.977 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:31:29.977 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:31:29.977 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:31:29.977 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:31:29.977 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:31:29.977 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:31:29.977 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:31:29.979 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:31:29.979 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:31:29.979 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:31:29.980 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:31:29.981 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:31:29.998 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:31:29.998 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:31:29.999 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:31:30.000 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:31:30.000 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:31:30.000 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:31:30.000 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:31:30.000 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:31:30.000 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:31:30.028 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:31:30.032 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:31:30.083 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:30.085 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:31:30.088 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:31:30.089 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:30.093 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:31:30.094 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:30.094 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:31:30.098 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:30.101 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:30.104 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:31:30.110 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:31:30.110 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:31:30.112 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:33:23.154 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?selectedRoles=1&selectedRoles=2
2025-02-16 03:33:23.159 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?selectedRoles=1&selectedRoles=2
2025-02-16 03:33:23.160 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users?selectedRoles=1&selectedRoles=2", parameters={masked}
2025-02-16 03:33:23.161 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:33:23.162 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:33:23.166 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:33:23.239 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:33:23.257 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:33:23.258 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:33:23.257 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:33:23.259 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:33:23.259 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:33:23.260 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:33:23.260 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:33:23.260 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:33:23.263 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:33:23.263 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:33:23.264 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:33:23.265 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:33:23.273 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:33:23.273 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:33:23.274 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:33:23.274 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:33:23.275 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:33:23.275 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:33:23.278 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:33:23.278 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:33:23.278 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:33:23.371 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:33:23.372 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:33:23.425 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:33:23.427 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:33:23.428 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:33:23.432 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:33:23.436 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:33:23.437 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:33:23.438 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:33:23.442 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:33:23.444 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:33:23.446 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:33:23.453 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:33:23.453 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:33:23.455 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:33:45.780 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/12
2025-02-16 03:33:45.782 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/12
2025-02-16 03:33:45.783 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/12", parameters={}
2025-02-16 03:33:45.784 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:33:45.831 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:33:45.858 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:33:45.864 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 03:33:45.869 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:33:45.869 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:33:45.869 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:33:45.869 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:33:59.912 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?selectedRoles=1&selectedRoles=2
2025-02-16 03:33:59.917 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?selectedRoles=1&selectedRoles=2
2025-02-16 03:33:59.919 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users?selectedRoles=1&selectedRoles=2", parameters={masked}
2025-02-16 03:33:59.921 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:33:59.922 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:33:59.925 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:33:59.952 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:33:59.987 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:33:59.987 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:33:59.987 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:33:59.987 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:33:59.987 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:33:59.987 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:33:59.988 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:33:59.988 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:33:59.991 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:33:59.991 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:33:59.992 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:33:59.992 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:00.051 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:34:00.053 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:34:00.053 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:00.054 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:34:00.054 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:34:00.054 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:34:00.054 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:34:00.054 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:34:00.055 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:34:00.071 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:34:00.071 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:34:00.079 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:00.082 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:00.087 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:34:00.087 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:34:00.087 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:00.089 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:34:00.090 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:00.091 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:00.092 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:00.097 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:34:00.097 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:34:00.099 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:34:06.162 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users?selectedRoles=1&selectedRoles=2
2025-02-16 03:34:06.164 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users?selectedRoles=1&selectedRoles=2
2025-02-16 03:34:06.164 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users?selectedRoles=1&selectedRoles=2", parameters={masked}
2025-02-16 03:34:06.165 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:34:06.165 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:06.167 [http-nio-8081-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:34:06.191 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:34:06.240 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:34:06.243 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:34:06.243 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:34:06.244 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:34:06.244 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:34:06.254 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:34:06.267 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:34:06.267 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:34:06.270 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:34:06.272 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:06.273 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:34:06.285 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:06.287 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:34:06.287 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:34:06.288 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:34:06.288 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:06.288 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:34:06.288 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:34:06.288 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:34:06.288 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:34:06.288 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:34:06.291 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:34:06.292 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:34:06.327 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:06.331 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:34:06.332 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:34:06.332 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:06.334 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:34:06.334 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:06.335 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:06.338 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:06.340 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:06.343 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:34:06.343 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:34:06.347 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:34:11.560 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:34:11.561 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:34:11.562 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:34:11.562 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:34:11.563 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:11.565 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:34:11.593 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:34:11.642 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:34:11.643 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:34:11.644 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:34:11.645 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:34:11.645 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:34:11.645 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:34:11.647 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:34:11.648 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:34:11.683 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:34:11.693 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:11.705 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:34:11.705 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:11.706 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:34:11.706 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:34:11.706 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:34:11.707 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:11.707 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:34:11.719 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:34:11.722 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:34:11.722 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:34:11.726 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:34:11.741 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:34:11.741 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:34:11.747 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:11.749 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:34:11.752 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:34:11.783 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:11.783 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:34:11.799 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:34:11.800 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:11.804 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:11.811 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:34:11.818 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:34:11.819 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:34:11.820 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:36:48.547 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:36:48.603 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:36:48.608 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:36:48.618 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:36:48.628 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:36:51.050 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81418 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:36:51.051 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:36:51.052 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:36:51.098 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:36:51.099 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:36:51.477 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:36:51.505 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 03:36:51.801 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:36:51.809 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:36:51.809 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:36:51.830 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:36:51.831 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 731 ms
2025-02-16 03:36:51.968 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:36:52.001 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:36:52.020 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:36:52.181 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:36:52.197 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:36:52.300 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@45e6b251
2025-02-16 03:36:52.301 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:36:52.353 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:36:52.785 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:36:52.844 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:36:52.992 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:36:53.380 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:36:53.400 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:36:53.401 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:36:53.407 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:36:53.410 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:36:53.411 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:36:53.412 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:36:53.413 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:36:53.415 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:36:53.454 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:36:53.524 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:36:53.575 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:36:53.601 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:36:53.638 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:36:53.679 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:36:53.725 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:36:53.740 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:36:53.746 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.091 seconds (process running for 3.444)
2025-02-16 03:37:01.702 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:37:01.703 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:37:01.703 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:37:01.703 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:37:01.703 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:37:01.705 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@27253bd7
2025-02-16 03:37:01.705 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5004cb44
2025-02-16 03:37:01.705 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:37:01.706 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-16 03:37:01.722 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:37:01.727 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:37:01.729 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:37:01.730 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:37:01.740 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:37:01.750 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'text/html', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [text/plain, */*, application/json, application/*+json]
2025-02-16 03:37:01.750 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing ["users"]
2025-02-16 03:37:01.754 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:37:16.489 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:37:16.496 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:37:16.499 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:37:16.510 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:37:16.516 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:37:18.611 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81423 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:37:18.611 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:37:18.612 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:37:18.638 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:37:18.639 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:37:19.001 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:37:19.028 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 03:37:19.330 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:37:19.337 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:37:19.337 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:37:19.357 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:37:19.357 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 718 ms
2025-02-16 03:37:19.463 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:37:19.485 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:37:19.499 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:37:19.628 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:37:19.641 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:37:19.720 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6efe159a
2025-02-16 03:37:19.721 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:37:19.764 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:37:20.169 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:37:20.227 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:37:20.341 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:37:20.744 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:37:20.759 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:37:20.761 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:37:20.765 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:37:20.768 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:37:20.769 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:37:20.769 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:37:20.770 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:37:20.771 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:37:20.808 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:37:20.867 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:37:20.903 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:37:20.924 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:37:20.958 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:37:20.997 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:37:21.051 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:37:21.068 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:37:21.074 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.833 seconds (process running for 3.145)
2025-02-16 03:37:24.311 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:37:24.312 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:37:24.312 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:37:24.312 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:37:24.312 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:37:24.315 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7fe62f99
2025-02-16 03:37:24.315 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@115aeddb
2025-02-16 03:37:24.315 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:37:24.316 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 03:37:24.327 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:37:24.333 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:37:24.334 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:37:24.336 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:37:24.347 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:37:24.359 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:37:24.685 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:37:24.706 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:37:24.706 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:37:24.728 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:37:24.728 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:37:24.728 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:37:24.728 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:37:24.756 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:37:24.756 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:37:24.778 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:37:24.779 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:37:24.781 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:37:24.782 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:37:24.787 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:37:24.787 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:37:24.788 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:37:24.790 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:37:24.790 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:37:24.790 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:37:24.790 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:37:24.791 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:37:24.795 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:37:24.836 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:37:24.836 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:37:24.839 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:37:24.841 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:37:24.843 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:37:24.847 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:37:24.851 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:37:24.852 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:37:24.852 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:37:24.856 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:37:24.856 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:37:24.898 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:37:24.899 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:37:24.904 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:40:52.151 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:40:52.162 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:40:52.168 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:40:52.176 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:40:52.178 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:40:54.292 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81473 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:40:54.293 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:40:54.294 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:40:54.333 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:40:54.333 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:40:54.737 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:40:54.765 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 03:40:55.078 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:40:55.086 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:40:55.087 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:40:55.108 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:40:55.109 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 775 ms
2025-02-16 03:40:55.222 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:40:55.249 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:40:55.265 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:40:55.411 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:40:55.426 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:40:55.537 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@273bd310
2025-02-16 03:40:55.538 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:40:55.593 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:40:56.057 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:40:56.115 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:40:56.262 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:40:56.693 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:40:56.709 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:40:56.711 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:40:56.716 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:40:56.721 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:40:56.722 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:40:56.722 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:40:56.723 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:40:56.724 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:40:56.762 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:40:56.828 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:40:56.866 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:40:56.887 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:40:56.926 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:40:56.966 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:40:57.013 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:40:57.029 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:40:57.035 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.229 seconds (process running for 3.703)
2025-02-16 03:41:01.756 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:41:01.757 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:41:01.757 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:41:01.757 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:41:01.757 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:41:01.759 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@81fd8ee
2025-02-16 03:41:01.760 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@533222bd
2025-02-16 03:41:01.760 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:41:01.760 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 03:41:01.774 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:41:01.780 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:41:01.781 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:41:01.783 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:41:01.794 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:01.807 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:41:02.078 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:41:02.143 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:41:02.143 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:41:02.144 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:41:02.144 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:41:02.144 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:41:02.144 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:41:02.146 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:41:02.147 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:41:02.262 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:41:02.264 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:02.266 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:41:02.269 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:02.281 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:41:02.282 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:41:02.282 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:41:02.282 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:41:02.282 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:41:02.283 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:02.284 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:41:02.284 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:41:02.286 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:41:02.384 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:41:02.384 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:41:02.429 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:02.437 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:02.452 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:02.455 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:02.458 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:02.467 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:41:02.467 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:41:02.468 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:41:02.468 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:41:02.508 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:41:02.510 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:02.518 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:41:18.023 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:41:18.034 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:18.035 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:41:18.036 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:41:18.037 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:41:18.092 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov006@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:41:18.113 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:41:18.136 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:41:18.140 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:41:18.148 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:41:18.149 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=13, email='dimaromanov006@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:41:18.149 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:41:18.154 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:41:18.155 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:18.155 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:41:18.155 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:41:18.155 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:41:18.159 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:41:18.163 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:18.165 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:18.168 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:18.173 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:18.177 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:18.187 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:18.192 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:41:18.192 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:41:18.193 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:41:31.582 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:41:31.583 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:41:31.584 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:41:31.584 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:41:31.585 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:31.590 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:41:31.650 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:41:31.662 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:41:31.662 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:41:31.664 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:41:31.663 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:41:31.665 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:41:31.665 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:41:31.666 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:41:31.666 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:41:31.669 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:41:31.669 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:41:31.671 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:31.672 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:31.696 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:41:31.697 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:41:31.697 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:41:31.698 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:31.698 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:41:31.698 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:41:31.698 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:41:31.698 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:41:31.699 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:41:31.765 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:41:31.769 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:41:31.775 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:31.792 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:31.793 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:41:31.794 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:41:31.796 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:31.797 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:41:31.799 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:31.803 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:31.806 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:31.814 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:31.840 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:41:31.841 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:41:31.842 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:41:58.729 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:41:58.732 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:58.733 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:41:58.733 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:41:58.734 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:41:58.752 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimarom@gmail.com', firstName='1234', lastName='1234', age=123}]
2025-02-16 03:41:58.761 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:41:58.765 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:41:58.767 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:41:58.769 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:41:58.769 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=14, email='dimarom@gmail.com', firstName='1234', lastName='1234', age=123}]
2025-02-16 03:41:58.771 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:41:58.824 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:41:58.835 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:41:58.836 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:41:58.836 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:41:58.836 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:41:58.861 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:41:58.865 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:58.867 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:58.868 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:58.870 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:58.871 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:58.873 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:58.875 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:41:58.878 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:41:58.878 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:41:58.879 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:42:31.551 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:42:31.554 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:42:31.554 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:42:31.555 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:42:31.556 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:42:31.562 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:42:31.601 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:42:31.639 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:42:31.639 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:42:31.651 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:42:31.651 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:42:31.654 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:42:31.654 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:42:31.656 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:42:31.656 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:42:31.663 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:42:31.663 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:42:31.664 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:42:31.664 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:42:31.671 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:42:31.671 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:42:31.672 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:42:31.672 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:42:31.672 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:42:31.672 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:42:31.672 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:42:31.673 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:42:31.674 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:42:31.688 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:42:31.688 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:42:31.693 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:42:31.696 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:42:31.696 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:42:31.698 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:42:31.698 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:42:31.698 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:42:31.700 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:42:31.701 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:42:31.702 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:42:31.702 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:42:31.704 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:42:31.706 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:42:31.706 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:42:31.707 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:42:41.428 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/14
2025-02-16 03:42:41.431 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/14
2025-02-16 03:42:41.432 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/14", parameters={}
2025-02-16 03:42:41.432 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:42:41.477 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:42:41.487 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:42:41.492 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 03:42:41.498 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:42:41.499 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:42:41.499 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:42:41.499 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:42:44.221 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users/14
2025-02-16 03:42:44.222 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users/14
2025-02-16 03:42:44.223 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users/14", parameters={}
2025-02-16 03:42:44.223 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getUserById(Long)
2025-02-16 03:42:44.230 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:42:44.240 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler ru.kata.spring.boot_security.demo.exception_handling.UserGlobalExceptionHandler#handleException(NoSuchUserException)
2025-02-16 03:42:44.243 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json]
2025-02-16 03:42:44.244 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ru.kata.spring.boot_security.demo.exception_handling.UserIncorrectData@6a25a9be]
2025-02-16 03:42:44.246 [http-nio-8081-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [ru.kata.spring.boot_security.demo.exception_handling.NoSuchUserException: User with id 14 not found]
2025-02-16 03:42:44.246 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-02-16 03:42:44.247 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:43:02.539 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/14
2025-02-16 03:43:02.562 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/14
2025-02-16 03:43:02.564 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/14", parameters={}
2025-02-16 03:43:02.573 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:43:02.608 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:43:02.614 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:43:02.614 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:43:02.616 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:43:02.617 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:43:28.902 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 03:43:28.911 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:43:28.912 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=8056FFCE1B1AD5E4323DEB39F757AC30], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:43:28.919 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 4EC34343FB07F3213E1C5627ACB7036F
2025-02-16 03:43:28.924 [http-nio-8081-exec-2] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 03:43:28.939 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 03:43:29.015 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 03:43:31.686 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 03:43:31.837 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 03:43:31.921 [http-nio-8081-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'dimarom@gmail.com'
2025-02-16 03:43:31.937 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 03:43:31.942 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 03:43:31.977 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 03:44:01.293 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 03:44:01.314 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 03:44:01.323 [http-nio-8081-exec-2] WARN  o.s.s.c.bcrypt.BCryptPasswordEncoder - Encoded password does not look like BCrypt
2025-02-16 03:44:01.323 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-02-16 03:44:01.325 [http-nio-8081-exec-2] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 03:44:01.335 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 03:44:01.369 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 03:44:16.642 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 03:44:16.657 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 03:44:16.665 [http-nio-8081-exec-7] WARN  o.s.s.c.bcrypt.BCryptPasswordEncoder - Encoded password does not look like BCrypt
2025-02-16 03:44:16.665 [http-nio-8081-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-02-16 03:44:16.667 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 03:44:16.673 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 03:44:16.703 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 03:48:22.281 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:48:22.291 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:48:22.305 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:48:22.327 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:48:22.330 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:48:24.905 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81549 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:48:24.906 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:48:24.907 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:48:24.943 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:48:24.943 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:48:25.330 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:48:25.362 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2025-02-16 03:48:25.682 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:48:25.689 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:48:25.690 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:48:25.712 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:48:25.712 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 768 ms
2025-02-16 03:48:25.810 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:48:25.839 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:48:25.855 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:48:26.000 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:48:26.017 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:48:26.124 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@50ad6852
2025-02-16 03:48:26.125 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:48:26.176 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:48:26.600 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:48:26.670 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:48:26.814 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:48:27.201 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:48:27.216 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:48:27.217 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:48:27.223 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:27.229 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:27.230 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:27.231 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:27.233 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:27.234 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:27.235 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:48:27.271 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:48:27.333 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:48:27.371 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:48:27.399 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:48:27.437 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:48:27.483 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:48:27.528 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:48:27.544 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:48:27.550 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.997 seconds (process running for 3.345)
2025-02-16 03:48:39.406 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:48:39.407 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:48:39.407 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:48:39.407 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:48:39.407 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:48:39.413 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@31384698
2025-02-16 03:48:39.414 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@58228938
2025-02-16 03:48:39.414 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:48:39.414 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2025-02-16 03:48:39.427 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 03:48:39.571 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 03:48:39.670 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 03:48:39.689 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 7AABE115B75D3DDC542E4B41FBCF78DC
2025-02-16 03:48:39.693 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1196bdce]
2025-02-16 03:48:39.693 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 03:48:39.708 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:48:39.711 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:48:39.713 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:48:39.714 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:48:39.732 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:39.744 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:48:39.925 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:48:39.980 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:48:39.980 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:48:39.981 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:48:39.982 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:48:39.981 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:48:39.982 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:48:39.982 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:48:39.986 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:48:40.041 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:48:40.041 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:48:40.057 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:40.058 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:40.062 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:48:40.064 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:40.063 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:48:40.064 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:48:40.064 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:48:40.065 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:48:40.065 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:48:40.065 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:48:40.065 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:48:40.082 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:48:40.082 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:48:40.092 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:40.099 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:40.102 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:40.106 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:40.111 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:40.113 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:40.116 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:48:40.117 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:48:40.118 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:48:40.118 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:48:40.169 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:48:40.169 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:40.175 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:48:45.251 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/13
2025-02-16 03:48:45.253 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/13
2025-02-16 03:48:45.254 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/13", parameters={}
2025-02-16 03:48:45.254 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:48:45.292 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:48:45.321 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:48:45.332 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 03:48:45.337 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:48:45.337 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:48:45.338 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:48:45.338 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:46.779 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/11
2025-02-16 03:48:46.781 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/11
2025-02-16 03:48:46.787 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/11", parameters={}
2025-02-16 03:48:46.790 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:48:46.794 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:48:46.800 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:48:46.805 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 03:48:46.808 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:48:46.808 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:48:46.809 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:48:46.810 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:48.343 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/10
2025-02-16 03:48:48.344 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/10
2025-02-16 03:48:48.344 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/10", parameters={}
2025-02-16 03:48:48.344 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:48:48.346 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:48:48.348 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:48:48.351 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 03:48:48.352 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:48:48.352 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:48:48.352 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:48:48.353 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:50.332 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/8
2025-02-16 03:48:50.333 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/8
2025-02-16 03:48:50.333 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/8", parameters={}
2025-02-16 03:48:50.334 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 03:48:50.352 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:48:50.358 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:48:50.361 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 03:48:50.365 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:48:50.366 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 03:48:50.366 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 03:48:50.367 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:51.453 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:48:51.454 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:48:51.454 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:48:51.454 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:48:51.454 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:51.456 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:48:51.501 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:48:51.514 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:48:51.514 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:48:51.515 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:48:51.515 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:48:51.515 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:48:51.515 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:48:51.516 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:48:51.516 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:48:51.517 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:48:51.517 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:48:51.518 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:51.518 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:51.533 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:48:51.533 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:48:51.534 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:48:51.534 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:48:51.534 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:51.534 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:48:51.534 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:48:51.534 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:48:51.534 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:48:51.542 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:48:51.542 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:48:51.547 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:51.551 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:48:51.556 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:48:51.557 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:48:51.560 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:48:51.560 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:48:51.560 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:48:51.560 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:48:51.561 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:01.177 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 03:49:01.179 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:01.179 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 03:49:01.180 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 03:49:01.180 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 03:49:01.256 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:49:01.341 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 03:49:01.352 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:49:01.353 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:49:01.356 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:49:01.357 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 03:49:01.357 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 03:49:01.384 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:49:01.384 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:01.384 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:49:01.384 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:49:01.384 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:49:01.392 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:49:01.395 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:01.397 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:01.398 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:01.399 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:49:01.399 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:49:01.400 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:04.488 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:49:04.489 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:49:04.489 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:49:04.489 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:49:04.490 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:04.492 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:49:04.519 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:04.545 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:49:04.545 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:49:04.545 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:49:04.545 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:49:04.545 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:49:04.545 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:49:04.546 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:49:04.546 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:49:04.547 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:04.547 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:04.547 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:04.548 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:04.552 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:49:04.553 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:04.553 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:49:04.552 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:49:04.553 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:49:04.553 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:49:04.554 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:49:04.554 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:49:04.554 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:49:04.555 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:49:04.555 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:49:04.557 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:04.558 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:49:04.558 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:49:04.558 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:04.558 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:04.559 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:04.560 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:04.563 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:49:04.563 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:49:04.563 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:19.361 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 03:49:19.367 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:19.367 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=7AABE115B75D3DDC542E4B41FBCF78DC], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:19.371 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 2570FADC1C33B10466B03012B80A2DF9
2025-02-16 03:49:19.374 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 03:49:19.382 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 03:49:19.434 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 03:49:23.989 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 03:49:24.009 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 03:49:24.125 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 03:49:24.126 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6a639f87]
2025-02-16 03:49:24.126 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 03:49:24.130 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:49:24.131 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:49:24.131 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:49:24.131 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:49:24.131 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:24.132 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:49:24.144 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:24.158 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:49:24.158 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:49:24.158 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:49:24.158 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:49:24.158 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:49:24.158 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:49:24.159 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:49:24.159 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:49:24.161 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:24.161 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:24.161 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:24.161 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:24.180 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:49:24.180 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:49:24.180 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:24.180 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:49:24.181 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:49:24.181 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:49:24.181 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:49:24.181 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:49:24.181 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:49:24.185 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:49:24.185 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:49:24.186 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:24.187 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:49:24.188 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:49:24.188 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:24.188 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:24.188 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:24.189 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:24.191 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:49:24.191 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:49:24.191 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:39.424 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/15
2025-02-16 03:49:39.428 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/15
2025-02-16 03:49:39.429 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/15", parameters={}
2025-02-16 03:49:39.430 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:49:39.442 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:49:39.472 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:49:39.489 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:49:39.507 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.model.User */update user 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=? 
    where
        id=?
2025-02-16 03:49:39.515 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:49:39.516 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:49:39.519 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:49:39.520 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:39.522 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:49:39.523 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:49:39.523 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:49:39.523 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:49:39.523 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:49:39.525 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:49:39.526 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:39.527 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:39.528 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:49:39.529 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:49:39.529 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:49:39.529 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:50:00.999 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/15
2025-02-16 03:50:01.004 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/15
2025-02-16 03:50:01.005 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/15", parameters={}
2025-02-16 03:50:01.006 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:50:01.013 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:50:01.025 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:50:01.039 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:50:01.043 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.model.User */update user 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=? 
    where
        id=?
2025-02-16 03:50:01.048 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:50:01.049 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:50:01.051 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:50:01.052 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:50:01.054 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:50:01.054 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:50:01.055 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:50:01.055 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:50:01.055 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:50:01.058 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:50:01.059 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:50:01.061 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:50:01.062 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:50:01.064 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:50:01.064 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:50:01.065 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:50:02.706 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:50:02.707 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:50:02.708 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:50:02.708 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:50:02.709 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:50:02.711 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:50:02.737 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:50:02.760 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:50:02.760 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:50:02.761 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:50:02.761 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:50:02.761 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:50:02.761 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:50:02.761 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:50:02.761 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:50:02.763 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:50:02.763 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:50:02.763 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:50:02.764 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:50:02.770 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:50:02.771 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:50:02.770 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:50:02.772 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:50:02.772 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:50:02.772 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:50:02.772 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:50:02.773 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:50:02.773 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:50:02.775 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:50:02.775 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:50:02.777 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:50:02.778 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:50:02.778 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:50:02.778 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:50:02.778 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:50:02.778 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:50:02.780 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:50:02.781 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:50:02.781 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:50:02.782 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:51:04.442 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:51:04.447 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:51:04.459 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:51:04.467 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:51:04.472 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:51:07.254 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81671 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:51:07.255 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:51:07.256 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:51:07.294 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:51:07.294 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:51:07.700 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:51:07.728 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 03:51:08.021 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:51:08.028 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:51:08.028 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:51:08.053 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:51:08.053 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 759 ms
2025-02-16 03:51:08.161 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:51:08.189 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:51:08.207 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:51:08.422 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:51:08.437 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:51:08.541 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@142c7c91
2025-02-16 03:51:08.542 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:51:08.596 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:51:09.017 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:51:09.079 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:51:09.196 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:51:09.613 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:51:09.626 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:51:09.628 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:51:09.632 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:09.636 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:09.637 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:09.639 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:51:09.674 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:51:09.735 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:51:09.769 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:51:09.789 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:51:09.832 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:51:09.877 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:51:09.920 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:51:09.937 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:51:09.943 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.066 seconds (process running for 3.411)
2025-02-16 03:51:26.460 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:51:26.468 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:51:26.475 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:51:26.480 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:51:26.495 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:51:28.622 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81690 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:51:28.623 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:51:28.624 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:51:28.649 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:51:28.649 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:51:29.005 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:51:29.039 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 2 JPA repository interfaces.
2025-02-16 03:51:29.331 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:51:29.338 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:51:29.338 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:51:29.358 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:51:29.358 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 709 ms
2025-02-16 03:51:29.462 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:51:29.485 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:51:29.500 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:51:29.654 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:51:29.667 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:51:29.746 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51a0b666
2025-02-16 03:51:29.746 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:51:29.788 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:51:30.220 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:51:30.272 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:51:30.414 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:51:30.828 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:51:30.840 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:51:30.842 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:51:30.847 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:30.850 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:30.851 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:30.853 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:51:30.888 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:51:30.943 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:51:30.979 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:51:31.010 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:51:31.047 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:51:31.099 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:51:31.145 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:51:31.159 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:51:31.165 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.889 seconds (process running for 3.181)
2025-02-16 03:51:46.514 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:51:46.515 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:51:46.515 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:51:46.515 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:51:46.515 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:51:46.519 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@657c4e8
2025-02-16 03:51:46.519 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1c0a52d4
2025-02-16 03:51:46.519 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:51:46.519 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 03:51:46.534 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/15
2025-02-16 03:51:46.541 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/15
2025-02-16 03:51:46.543 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/15", parameters={}
2025-02-16 03:51:46.546 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:51:46.624 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:51:46.634 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:51:46.644 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:51:46.674 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:51:46.674 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:51:46.683 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:51:46.684 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:51:46.689 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:51:46.689 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:51:46.689 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:51:46.689 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:51:46.690 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:51:46.692 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:51:46.694 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:46.695 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:46.695 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:46.697 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:51:46.697 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:51:46.701 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:51:47.681 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:51:47.683 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:51:47.683 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:51:47.683 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:51:47.689 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:51:47.702 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:51:47.885 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:51:47.928 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:51:47.928 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:51:47.928 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:51:47.928 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:51:47.929 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:51:47.929 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:51:47.929 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:51:47.930 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:51:47.933 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:51:47.933 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:51:47.934 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:51:47.934 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:51:47.943 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:51:47.943 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:51:47.943 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:51:47.944 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:51:47.944 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:51:47.945 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:51:47.945 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:51:47.945 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:51:47.945 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:51:47.949 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:51:47.950 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:51:47.957 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:47.959 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:51:47.960 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:51:47.961 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:51:47.962 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:51:47.963 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:47.964 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:51:47.968 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:51:47.969 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:51:47.971 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:52:02.866 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/15
2025-02-16 03:52:02.871 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/15
2025-02-16 03:52:02.872 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/15", parameters={}
2025-02-16 03:52:02.873 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:52:02.879 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:52:02.888 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:52:02.895 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:52:02.922 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.model.User */update user 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=? 
    where
        id=?
2025-02-16 03:52:02.936 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:52:02.937 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:52:02.938 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:52:02.939 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:52:02.943 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:52:02.943 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:52:02.943 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:52:02.943 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:52:02.943 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:52:02.946 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:52:02.948 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:52:02.949 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:52:02.951 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:52:02.952 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:52:02.953 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:52:02.953 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:02.096 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 03:56:02.110 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 03:56:02.117 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:56:02.125 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 03:56:02.126 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 03:56:04.419 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 81736 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 03:56:04.420 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 03:56:04.420 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 03:56:04.463 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 03:56:04.463 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 03:56:04.854 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 03:56:04.885 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-02-16 03:56:05.188 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 03:56:05.198 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 03:56:05.199 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 03:56:05.223 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 03:56:05.223 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 760 ms
2025-02-16 03:56:05.329 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 03:56:05.355 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 03:56:05.370 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 03:56:05.515 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 03:56:05.530 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 03:56:05.633 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@38cf783a
2025-02-16 03:56:05.634 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 03:56:05.689 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 03:56:06.112 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 03:56:06.172 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 03:56:06.288 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 03:56:06.686 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:56:06.702 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 03:56:06.703 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:56:06.708 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:06.711 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:06.712 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:06.713 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 03:56:06.748 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 03:56:06.805 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 03:56:06.845 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 03:56:06.865 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 03:56:06.894 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 03:56:06.933 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 03:56:06.978 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 03:56:06.996 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 03:56:07.002 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.949 seconds (process running for 3.285)
2025-02-16 03:56:20.504 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 03:56:20.505 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 03:56:20.505 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 03:56:20.506 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 03:56:20.506 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 03:56:20.514 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6ace9067
2025-02-16 03:56:20.515 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2036b987
2025-02-16 03:56:20.515 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 03:56:20.515 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2025-02-16 03:56:20.529 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:56:20.548 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:56:20.550 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:56:20.551 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:56:20.561 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:20.578 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:56:20.793 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:20.842 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:56:20.842 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:56:20.843 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:56:20.843 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:56:20.844 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:56:20.844 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:56:20.845 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:56:20.845 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:56:20.856 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:20.856 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:20.859 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:20.859 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:20.866 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:56:20.866 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:56:20.867 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:20.867 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:56:20.867 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:56:20.867 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:56:20.867 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:56:20.867 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:56:20.867 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:56:20.887 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:56:20.888 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:56:20.890 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:20.892 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:20.892 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:20.900 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:56:20.900 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:56:20.901 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:56:20.901 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:56:20.926 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:20.927 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:20.930 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:28.661 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/15
2025-02-16 03:56:28.664 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/15
2025-02-16 03:56:28.665 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/15", parameters={}
2025-02-16 03:56:28.667 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:56:28.750 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:56:28.761 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:56:28.767 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:56:28.885 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.model.User */update user 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=? 
    where
        id=?
2025-02-16 03:56:28.908 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:56:28.913 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:56:28.915 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:56:28.920 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:56:28.920 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 03:56:28.922 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:28.922 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:28.929 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:56:28.930 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:28.931 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:56:28.931 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:56:28.932 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:56:28.935 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:56:28.939 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:28.941 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:28.942 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:28.944 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:56:28.944 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:56:28.945 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:31.493 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 03:56:31.494 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 03:56:31.495 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 03:56:31.495 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 03:56:31.495 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:31.497 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 03:56:31.532 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:31.542 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 03:56:31.542 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 03:56:31.543 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 03:56:31.543 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 03:56:31.543 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 03:56:31.543 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 03:56:31.543 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:56:31.543 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 03:56:31.567 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:31.567 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:31.568 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:31.569 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:31.577 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:56:31.577 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 03:56:31.577 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:31.577 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:56:31.577 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:56:31.577 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:56:31.577 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 03:56:31.578 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 03:56:31.578 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 03:56:31.579 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:56:31.579 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 03:56:31.581 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:31.582 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:56:31.582 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 03:56:31.583 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:31.583 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:31.584 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:31.586 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:31.588 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:56:31.588 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:56:31.589 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:49.152 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/15
2025-02-16 03:56:49.155 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/15
2025-02-16 03:56:49.155 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/15", parameters={}
2025-02-16 03:56:49.156 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 03:56:49.160 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=36}]
2025-02-16 03:56:49.170 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:56:49.178 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 03:56:49.183 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.model.User */update user 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=? 
    where
        id=?
2025-02-16 03:56:49.190 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 03:56:49.195 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:56:49.198 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 03:56:49.202 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:56:49.202 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=36}]
2025-02-16 03:56:49.205 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 03:56:49.206 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:49.210 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 03:56:49.211 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=15, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 03:56:49.211 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 03:56:49.211 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 03:56:49.212 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 03:56:49.220 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 03:56:49.222 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:49.223 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:49.225 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 03:56:49.228 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 03:56:49.229 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 03:56:49.229 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 06:03:03.109 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2h27s284ms).
2025-02-16 07:04:12.100 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h30s392ms).
2025-02-16 08:04:59.311 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h47s211ms).
2025-02-16 09:05:47.872 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h48s562ms).
2025-02-16 10:07:06.616 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h48s736ms).
2025-02-16 11:04:06.344 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=56m59s729ms).
2025-02-16 12:08:59.802 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h4m23s269ms).
2025-02-16 13:09:47.452 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h47s650ms).
2025-02-16 14:11:01.497 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h44s14ms).
2025-02-16 15:11:50.255 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h48s758ms).
2025-02-16 16:13:07.902 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h47s658ms).
2025-02-16 17:13:53.066 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h45s164ms).
2025-02-16 17:14:22.832 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Retrograde clock change detected (housekeeper delta=29s765ms), soft-evicting connections from pool.
2025-02-16 18:15:10.390 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h47s558ms).
2025-02-16 19:15:35.073 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h24s678ms).
2025-02-16 20:29:04.999 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:29:05.006 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:29:05.006 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:29:05.007 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:29:05.009 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 20:29:05.025 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:29:05.051 [http-nio-8081-exec-1] ERROR org.thymeleaf.TemplateEngine - [THYMELEAF][http-nio-8081-exec-1] Exception processing template "users": An error happened during template parsing (template: "class path resource [templates/users.html]")
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 20:29:05.065 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Error rendering view [org.thymeleaf.spring6.view.ThymeleafView@1733d65f]
org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	... 100 common frames omitted
Caused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: "authUser.email" (template: "users" - line 21, col 12)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	... 102 common frames omitted
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	... 121 common frames omitted
2025-02-16 20:29:05.066 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Failed to complete request: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")
2025-02-16 20:29:05.067 [http-nio-8081-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: "class path resource [templates/users.html]")] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'email' cannot be found on null
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:225)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:112)
	at org.springframework.expression.spel.ast.PropertyOrFieldReference$AccessorValueRef.getValue(PropertyOrFieldReference.java:376)
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:97)
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:116)
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:338)
	at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:265)
	at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166)
	at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109)
	at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138)
	at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144)
	at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)
	at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)
	at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)
	at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)
	at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)
	at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)
	at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)
	at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)
	at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)
	at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)
	at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)
	at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)
	at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)
	at org.attoparser.MarkupParser.parse(MarkupParser.java:257)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)
	at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)
	at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103)
	at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077)
	at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372)
	at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192)
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1435)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1167)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1105)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:220)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:206)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.ui.DefaultResourcesFilter.doFilter(DefaultResourcesFilter.java:72)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-02-16 20:29:05.083 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 20:29:05.084 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 20:29:05.084 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 20:29:05.084 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#errorHtml(HttpServletRequest, HttpServletResponse)
2025-02-16 20:29:05.105 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, text/html;q=0.8]
2025-02-16 20:29:05.117 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 500
2025-02-16 20:29:05.117 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 20:29:07.843 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-02-16 20:29:07.846 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-02-16 20:29:07.850 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-02-16 20:29:07.852 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.LoginController#rootBoot()
2025-02-16 20:29:07.883 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.view.RedirectView - View name [redirect:], model {}
2025-02-16 20:29:07.887 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 302 FOUND
2025-02-16 20:29:07.887 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 20:29:07.895 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 20:29:08.326 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 20:29:12.240 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 20:29:12.458 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 20:29:12.575 [http-nio-8081-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-02-16 20:29:12.594 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 20:29:12.605 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 20:29:12.633 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 20:29:15.992 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 20:29:15.996 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 20:29:16.002 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 20:29:16.015 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 20:29:16.017 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 20:29:18.833 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 83251 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 20:29:18.834 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 20:29:18.834 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 20:29:18.869 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 20:29:18.869 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 20:29:19.244 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 20:29:19.273 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 20:29:19.556 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 20:29:19.563 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 20:29:19.563 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 20:29:19.583 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 20:29:19.583 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 713 ms
2025-02-16 20:29:19.677 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 20:29:19.707 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 20:29:19.722 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 20:29:19.861 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 20:29:19.875 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 20:29:19.960 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4f9d4acd
2025-02-16 20:29:19.961 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 20:29:20.020 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 20:29:20.473 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 20:29:20.546 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 20:29:20.669 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 20:29:21.091 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:29:21.106 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 20:29:21.107 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:29:21.113 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:29:21.116 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:29:21.117 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:29:21.119 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 20:29:21.153 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 20:29:21.211 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 20:29:21.247 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 20:29:21.268 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 20:29:21.298 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 20:29:21.353 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 20:29:21.393 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 20:29:21.411 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 20:29:21.418 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.937 seconds (process running for 3.338)
2025-02-16 20:29:34.682 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 20:29:34.683 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 20:29:34.683 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 20:29:34.683 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 20:29:34.683 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 20:29:34.686 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4cf7595b
2025-02-16 20:29:34.686 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@59e6c399
2025-02-16 20:29:34.686 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 20:29:34.686 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 20:29:34.702 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 20:29:34.808 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 20:29:34.888 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 20:29:34.900 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from A95372EE020A7572B9632C91DB853E74
2025-02-16 20:29:34.902 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=A95372EE020A7572B9632C91DB853E74], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@3431e68f]
2025-02-16 20:29:34.902 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=A95372EE020A7572B9632C91DB853E74], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 20:29:34.917 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:29:34.919 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:29:34.920 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:29:34.921 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:29:34.931 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=A95372EE020A7572B9632C91DB853E74], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:29:34.943 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:29:35.124 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:29:35.136 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:29:35.136 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:29:35.137 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:29:35.137 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:29:35.137 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:29:35.137 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:29:35.138 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:29:35.138 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:29:35.150 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:29:35.150 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:29:35.151 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=A95372EE020A7572B9632C91DB853E74], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:29:35.151 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=A95372EE020A7572B9632C91DB853E74], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:29:35.156 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:29:35.156 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:29:35.157 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:29:35.157 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=A95372EE020A7572B9632C91DB853E74], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:29:35.157 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:29:35.157 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:29:35.157 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:29:35.157 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:29:35.157 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:29:35.172 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:29:35.175 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:29:35.180 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:29:35.183 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:29:35.184 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:29:35.185 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:29:35.187 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:29:35.187 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:29:35.188 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 20:29:35.208 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:29:35.209 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=A95372EE020A7572B9632C91DB853E74], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:29:35.212 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:35:51.515 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 20:35:51.526 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=A95372EE020A7572B9632C91DB853E74], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:35:51.526 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=A95372EE020A7572B9632C91DB853E74], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:35:51.543 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session A0909A0F97057CA8986AC8BE9905287E
2025-02-16 20:35:51.551 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 20:35:51.559 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 20:35:51.648 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 20:35:58.529 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 20:35:58.601 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 20:35:58.717 [http-nio-8081-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 20:35:58.719 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@51e0e212]
2025-02-16 20:35:58.719 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:35:58.724 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:35:58.724 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:35:58.725 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:35:58.727 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:35:58.731 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:35:58.737 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:35:58.814 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:35:58.827 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:35:58.829 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:35:58.829 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:35:58.831 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:35:58.833 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:35:58.834 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:35:58.834 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:35:58.834 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:35:58.837 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:35:58.837 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:35:58.838 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:35:58.838 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:35:58.848 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:35:58.846 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:35:58.852 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:35:58.852 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:35:58.853 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:35:58.856 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:35:58.860 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 20:35:58.871 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:35:58.879 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:35:58.879 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:35:58.883 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:35:58.884 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:35:58.889 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 20:35:58.889 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 20:35:58.890 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 20:35:58.890 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 20:35:58.901 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:35:58.902 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 20:35:58 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 20:35:58.917 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 20:35:58.918 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:36:11.121 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 20:36:11.133 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:36:11.134 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 20:36:11.137 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-02-16 20:36:11.137 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-02-16 20:36:11.138 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-02-16 20:36:11.143 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 20:36:11.148 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:36:11.156 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 20:36:11 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 20:36:11.160 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 20:36:11.161 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:36:15.874 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:36:15.877 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:36:15.878 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:36:15.878 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:36:15.880 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:36:15.885 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:36:15.906 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:36:15.925 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:36:15.925 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:36:15.926 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:36:15.926 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:36:15.926 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:36:15.926 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:36:15.927 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:36:15.928 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:36:15.930 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:36:15.931 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:36:15.930 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:36:15.932 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:36:15.936 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:36:15.936 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:36:15.937 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:36:15.937 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:36:15.937 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:36:15.937 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:36:15.937 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 20:36:15.938 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 20:36:15.938 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 20:36:15.938 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 20:36:15.938 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 20:36:15.941 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:36:15.941 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 20:36:15 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 20:36:15.943 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 20:36:15.943 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:36:15.949 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:36:15.955 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:36:15.955 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:36:15.956 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:36:15.956 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:36:19.080 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 20:36:19.083 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:36:19.084 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 20:36:19.085 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 6E62E2C3B220E84FF0F20AE8D76E52E3
2025-02-16 20:36:19.085 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 20:36:19.093 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 20:36:19.126 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 20:36:23.212 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 20:36:23.233 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 20:36:23.329 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 20:36:23.329 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@54a22172]
2025-02-16 20:36:23.329 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 20:36:23.333 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:36:23.333 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:36:23.333 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:36:23.333 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:36:23.334 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:36:23.338 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:36:23.352 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:36:23.362 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:36:23.362 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:36:23.363 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:36:23.363 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:36:23.363 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:36:23.363 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:36:23.363 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:36:23.363 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:36:23.366 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:36:23.366 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:36:23.367 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:36:23.367 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:36:23.374 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:36:23.375 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:36:23.375 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:36:23.375 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:36:23.375 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:36:23.376 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:36:23.376 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:36:23.376 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:36:23.376 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:36:23.379 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:36:23.379 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:36:23.381 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:36:23.383 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:36:23.383 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:36:23.384 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:36:23.384 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:36:23.385 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:36:23.385 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:36:23.387 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:36:23.387 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 20:36:23.388 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:36:33.611 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/15
2025-02-16 20:36:33.616 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/15
2025-02-16 20:36:33.617 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/15", parameters={}
2025-02-16 20:36:33.618 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 20:36:33.670 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 20:36:33.712 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 20:36:33.734 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 20:36:33.744 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:36:33.746 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 20:36:33.747 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 20:36:33.747 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:37:52.938 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 20:37:52.944 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 20:37:52.975 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 20:37:52.989 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 20:37:52.991 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 20:37:56.845 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 83387 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 20:37:56.846 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 20:37:56.847 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 20:37:56.890 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 20:37:56.890 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 20:37:57.459 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 20:37:57.491 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-02-16 20:37:57.861 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 20:37:57.871 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 20:37:57.871 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 20:37:57.893 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 20:37:57.894 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1003 ms
2025-02-16 20:37:58.035 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 20:37:58.071 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 20:37:58.096 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 20:37:58.253 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 20:37:58.270 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 20:37:58.381 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@77864fee
2025-02-16 20:37:58.390 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 20:37:58.464 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 20:37:58.983 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 20:37:59.067 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 20:37:59.259 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 20:37:59.695 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:37:59.711 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 20:37:59.712 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:37:59.718 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:37:59.721 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:37:59.723 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 20:37:59.763 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 20:37:59.834 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 20:37:59.877 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 20:37:59.902 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 20:37:59.959 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 20:38:00.020 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 20:38:00.069 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 20:38:00.087 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 20:38:00.093 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 4.893 seconds (process running for 5.715)
2025-02-16 20:38:07.012 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 20:38:07.013 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 20:38:07.014 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 20:38:07.014 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 20:38:07.014 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 20:38:07.019 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2dc58b0
2025-02-16 20:38:07.021 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5c8cea77
2025-02-16 20:38:07.021 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 20:38:07.022 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-02-16 20:38:07.044 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:38:07.057 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:38:07.060 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:38:07.062 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:38:07.076 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:07.095 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:38:07.604 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:38:07.688 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:38:07.688 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:38:07.688 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:38:07.688 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:38:07.689 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:38:07.689 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:38:07.689 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:38:07.689 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:38:07.711 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:38:07.710 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:38:07.713 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:07.713 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:07.717 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:38:07.718 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:38:07.721 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:07.721 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:38:07.721 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:38:07.721 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:38:07.724 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:38:07.724 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:38:07.726 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:38:07.744 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:38:07.744 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:38:07.753 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:38:07.755 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:38:07.765 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:38:07.765 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:38:07.766 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:38:07.766 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=5, email='user@example.com', firstName='User', lastName='User', age=25}, User{id=6, email=' (truncated)...]
2025-02-16 20:38:07.811 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:38:07.812 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:07.819 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:38:17.507 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/5
2025-02-16 20:38:17.515 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/5
2025-02-16 20:38:17.516 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/5", parameters={}
2025-02-16 20:38:17.517 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 20:38:17.614 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 20:38:17.646 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 20:38:17.657 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 20:38:17.664 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:38:17.664 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 20:38:17.665 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 20:38:17.665 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:19.278 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:38:19.279 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:38:19.280 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:38:19.281 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:38:19.282 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:19.285 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:38:19.324 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:38:19.332 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:38:19.332 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:38:19.333 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:38:19.333 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:38:19.333 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:38:19.333 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:38:19.334 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:38:19.334 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:38:19.335 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:38:19.335 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:38:19.336 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:19.336 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:19.343 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:38:19.342 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:38:19.343 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:38:19.343 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:38:19.343 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:38:19.344 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:19.345 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:38:19.345 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:38:19.345 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:38:19.347 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:38:19.347 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:38:19.349 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:38:19.349 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:38:19.350 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:38:19.350 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:38:19.351 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:19.353 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:38:19.353 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 20:38:19.355 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:38:32.559 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 20:38:32.570 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:32.571 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 20:38:32.572 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 20:38:32.573 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 20:38:32.643 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:38:32.735 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 20:38:32.753 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:38:32.755 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:38:32.758 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:38:32.759 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=16, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:38:32.759 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 20:38:32.798 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:38:32.800 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:38:32.801 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:38:32.801 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:38:32.801 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:38:32.810 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:38:32.815 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:38:32.817 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:38:32.819 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:38:32.819 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=16, ema (truncated)...]
2025-02-16 20:38:32.820 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:40:03.009 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/16
2025-02-16 20:40:03.011 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/16
2025-02-16 20:40:03.013 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/16", parameters={}
2025-02-16 20:40:03.015 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 20:40:03.029 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 20:40:03.040 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 20:40:03.043 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 20:40:03.045 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:40:03.046 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 20:40:03.046 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 20:40:03.046 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:42:31.668 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 20:42:31.682 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 20:42:31.687 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 20:42:31.695 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 20:42:31.708 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 20:42:34.420 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 83452 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 20:42:34.421 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 20:42:34.421 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 20:42:34.450 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 20:42:34.450 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 20:42:34.848 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 20:42:34.878 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 20:42:35.179 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 20:42:35.186 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 20:42:35.186 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 20:42:35.206 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 20:42:35.206 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 756 ms
2025-02-16 20:42:35.311 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 20:42:35.339 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 20:42:35.355 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 20:42:35.493 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 20:42:35.508 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 20:42:35.595 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@272524ec
2025-02-16 20:42:35.596 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 20:42:35.646 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 20:42:36.115 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 20:42:36.176 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 20:42:36.368 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 20:42:36.732 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:42:36.747 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 20:42:36.749 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:42:36.754 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:42:36.759 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 20:42:36.791 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 20:42:36.850 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 20:42:36.892 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 20:42:36.915 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 20:42:36.954 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 20:42:36.999 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 20:42:37.043 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 20:42:37.059 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 20:42:37.067 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.61 seconds (process running for 4.251)
2025-02-16 20:42:59.512 [http-nio-8081-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 20:42:59.513 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 20:42:59.513 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 20:42:59.513 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 20:42:59.513 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 20:42:59.516 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@33fa9b83
2025-02-16 20:42:59.517 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@11a9bad5
2025-02-16 20:42:59.517 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 20:42:59.517 [http-nio-8081-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 20:42:59.533 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:42:59.539 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:42:59.540 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:42:59.541 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:42:59.552 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:42:59.566 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:42:59.811 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:42:59.833 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:42:59.834 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:42:59.834 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:42:59.834 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:42:59.834 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:42:59.839 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:42:59.841 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:42:59.841 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:42:59.859 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:42:59.859 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:42:59.865 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:42:59.868 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:42:59.872 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:42:59.872 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:42:59.873 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:42:59.874 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:42:59.874 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:42:59.874 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:42:59.874 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:42:59.875 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:42:59.876 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:42:59.886 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:42:59.886 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:42:59.892 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:42:59.926 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:42:59.927 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:42:59.931 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:42:59.931 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 20:42:59.998 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:42:59.999 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:00.050 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:07.534 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 20:43:07.537 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:07.538 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 20:43:07.539 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 20:43:07.540 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 20:43:07.617 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:43:07.725 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 20:43:07.752 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:43:07.754 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:43:07.769 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:07.769 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=17, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:43:07.772 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 20:43:07.781 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:43:07.782 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:07.782 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:43:07.782 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:43:07.783 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:43:07.786 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:43:07.788 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:43:07.789 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:43:07.791 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:07.791 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=17, ema (truncated)...]
2025-02-16 20:43:07.792 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:11.211 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/17
2025-02-16 20:43:11.212 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/17
2025-02-16 20:43:11.212 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/17", parameters={}
2025-02-16 20:43:11.212 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 20:43:11.234 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 20:43:11.243 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 20:43:11.249 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 20:43:11.258 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:11.258 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 20:43:11.258 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 20:43:11.258 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:18.691 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 20:43:18.699 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:18.700 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 20:43:18.701 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 20:43:18.702 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 20:43:18.708 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:43:18.822 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 20:43:18.828 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:43:18.830 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:43:18.833 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:18.834 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=18, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:43:18.835 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 20:43:18.840 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:43:18.840 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:18.840 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:43:18.840 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:43:18.840 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:43:18.845 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:43:18.847 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:43:18.850 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:43:18.863 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:18.863 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=18, ema (truncated)...]
2025-02-16 20:43:18.863 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:28.781 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:43:28.786 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:43:28.787 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:43:28.788 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:43:28.789 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:28.795 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:43:28.859 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:28.868 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:43:28.868 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:43:28.868 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:43:28.868 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:43:28.868 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:43:28.868 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:43:28.869 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:43:28.869 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:43:28.871 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:28.871 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:28.873 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:28.873 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:28.879 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:43:28.879 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:43:28.881 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:28.881 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:43:28.881 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:43:28.880 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:43:28.881 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:43:28.881 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:43:28.881 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:43:28.896 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:43:28.896 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:43:28.901 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:43:28.907 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:28.908 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:43:28.910 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:43:28.917 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:28.917 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:28.918 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:28.919 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=18, ema (truncated)...]
2025-02-16 20:43:28.919 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:39.055 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/18
2025-02-16 20:43:39.058 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/18
2025-02-16 20:43:39.059 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/18", parameters={}
2025-02-16 20:43:39.060 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 20:43:39.088 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 20:43:39.094 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 20:43:39.096 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 20:43:39.100 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:39.100 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 20:43:39.100 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 20:43:39.100 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:48.894 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:43:48.897 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:43:48.899 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:43:48.899 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:43:48.900 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:48.908 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:43:49.021 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:49.038 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:43:49.038 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:43:49.039 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:43:49.039 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:43:49.039 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:43:49.039 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:43:49.040 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:43:49.040 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:43:49.042 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:49.042 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:49.043 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:49.043 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:49.052 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:43:49.052 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:43:49.053 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:49.053 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:43:49.053 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:43:49.053 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:43:49.053 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:43:49.053 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:43:49.054 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:43:49.063 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:43:49.063 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:43:49.065 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:43:49.067 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:49.067 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:43:49.069 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:49.070 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:49.070 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:49.070 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 20:43:49.071 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:43:55.131 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 20:43:55.134 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:55.134 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 20:43:55.135 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 20:43:55.135 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 20:43:55.140 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:43:55.274 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 20:43:55.280 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:43:55.281 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:43:55.283 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:55.283 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=19, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:43:55.285 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 20:43:55.292 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:43:55.292 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:43:55.292 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:43:55.292 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:43:55.292 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:43:55.309 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:43:55.312 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:43:55.316 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:43:55.318 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:43:55.318 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=19, ema (truncated)...]
2025-02-16 20:43:55.319 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:47:57.277 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 20:47:57.317 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 20:47:57.331 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 20:47:57.344 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 20:47:57.350 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 20:47:59.430 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 83530 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 20:47:59.432 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 20:47:59.435 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 20:47:59.478 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 20:47:59.478 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 20:47:59.857 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 20:47:59.884 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 2 JPA repository interfaces.
2025-02-16 20:48:00.191 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 20:48:00.199 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 20:48:00.199 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 20:48:00.219 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 20:48:00.219 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 740 ms
2025-02-16 20:48:00.328 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 20:48:00.357 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 20:48:00.373 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 20:48:00.512 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 20:48:00.528 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 20:48:00.631 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@24c7a08f
2025-02-16 20:48:00.632 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 20:48:00.685 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 20:48:01.122 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 20:48:01.191 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 20:48:01.339 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 20:48:01.705 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:48:01.720 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 20:48:01.722 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:48:01.726 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:48:01.730 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:48:01.731 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 20:48:01.765 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 20:48:01.831 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 20:48:01.866 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 20:48:01.885 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 20:48:01.914 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 20:48:01.957 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 20:48:02.009 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 20:48:02.031 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 20:48:02.036 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.085 seconds (process running for 3.489)
2025-02-16 20:48:08.484 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 20:48:08.485 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 20:48:08.485 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 20:48:08.485 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 20:48:08.485 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 20:48:08.488 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@782fa5be
2025-02-16 20:48:08.488 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6543df04
2025-02-16 20:48:08.488 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 20:48:08.488 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 20:48:08.505 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:48:08.510 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:48:08.512 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:48:08.514 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:48:08.524 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:48:08.535 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:48:08.748 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:48:08.805 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:48:08.805 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:48:08.805 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:48:08.806 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:48:08.806 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:48:08.806 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:48:08.807 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:48:08.807 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:48:08.842 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:48:08.842 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:48:08.843 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:48:08.843 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:48:08.849 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:48:08.849 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:48:08.851 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:48:08.854 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:48:08.854 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:48:08.856 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:48:08.859 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:48:08.859 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:48:08.859 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:48:08.873 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:48:08.873 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:48:08.876 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:48:08.880 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:48:08.885 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:48:08.885 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:48:08.886 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=19, ema (truncated)...]
2025-02-16 20:48:08.886 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:48:08.917 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:48:08.917 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:48:08.921 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:48:25.332 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/19
2025-02-16 20:48:25.359 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/19
2025-02-16 20:48:25.360 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/19", parameters={}
2025-02-16 20:48:25.361 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 20:48:25.398 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 20:48:25.428 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 20:48:25.438 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 20:48:25.443 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:48:25.444 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 20:48:25.444 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 20:48:25.444 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:48:36.350 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/19
2025-02-16 20:48:36.363 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/19
2025-02-16 20:48:36.364 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/19", parameters={}
2025-02-16 20:48:36.364 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 20:48:36.375 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 20:48:36.386 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:48:36.387 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 20:48:36.387 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 20:48:36.387 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:51:07.098 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 20:51:07.105 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 20:51:07.110 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 20:51:07.115 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 20:51:07.118 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 20:51:08.787 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 83568 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 20:51:08.788 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 20:51:08.788 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 20:51:08.817 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 20:51:08.817 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 20:51:09.157 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 20:51:09.189 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 20:51:09.469 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 20:51:09.476 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 20:51:09.476 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 20:51:09.499 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 20:51:09.499 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 681 ms
2025-02-16 20:51:09.601 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 20:51:09.625 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 20:51:09.638 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 20:51:09.776 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 20:51:09.790 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 20:51:09.873 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1c94ef97
2025-02-16 20:51:09.874 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 20:51:09.921 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 20:51:10.330 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 20:51:10.389 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 20:51:10.499 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 20:51:10.900 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:51:10.912 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 20:51:10.914 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:51:10.918 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:51:10.921 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 20:51:10.954 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 20:51:11.011 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 20:51:11.047 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 20:51:11.066 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 20:51:11.094 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 20:51:11.130 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 20:51:11.176 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 20:51:11.195 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 20:51:11.201 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.867 seconds (process running for 3.194)
2025-02-16 20:51:17.716 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 20:51:17.717 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 20:51:17.718 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 20:51:17.718 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 20:51:17.718 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 20:51:17.720 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7a3f7464
2025-02-16 20:51:17.720 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1e73132b
2025-02-16 20:51:17.720 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 20:51:17.720 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 20:51:17.737 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:51:17.744 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:51:17.745 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:51:17.747 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:51:17.756 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:51:17.765 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:51:17.994 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:51:18.017 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:51:18.017 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:51:18.018 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:51:18.018 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:51:18.018 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:51:18.018 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:51:18.024 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:51:18.024 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:51:18.039 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:51:18.041 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:51:18.044 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:51:18.044 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:51:18.050 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:51:18.054 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:51:18.054 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:51:18.054 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:51:18.054 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:51:18.054 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:51:18.054 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:51:18.055 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:51:18.055 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:51:18.133 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:51:18.135 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:51:18.149 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:51:18.182 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:51:18.181 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:51:18.185 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 20:51:18.186 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:51:18.265 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:51:18.277 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:51:18.285 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:52:32.489 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 20:52:32.494 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:52:32.494 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 20:52:32.495 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 20:52:32.496 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 20:52:32.570 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:52:32.678 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 20:52:32.731 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:52:32.734 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:52:32.745 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:52:32.746 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=20, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:52:32.749 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 20:52:32.761 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:52:32.761 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:52:32.761 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:52:32.762 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:52:32.762 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:52:32.764 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:52:32.766 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:52:32.766 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:52:32.768 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:52:32.769 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=20, ema (truncated)...]
2025-02-16 20:52:32.769 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:52:36.658 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/20
2025-02-16 20:52:36.659 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/20
2025-02-16 20:52:36.660 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/20", parameters={}
2025-02-16 20:52:36.660 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 20:52:36.680 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 20:52:36.692 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 20:52:36.697 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 20:52:36.702 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:52:36.702 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 20:52:36.702 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 20:52:36.702 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:52:39.040 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/20
2025-02-16 20:52:39.048 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/20
2025-02-16 20:52:39.049 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/20", parameters={}
2025-02-16 20:52:39.051 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 20:52:39.065 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 20:52:39.077 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:52:39.078 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 20:52:39.078 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 20:52:39.078 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:52:43.519 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 20:52:43.524 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 20:52:43.525 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 20:52:43.525 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 20:52:43.526 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:52:43.531 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 20:52:43.573 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:52:43.600 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 20:52:43.601 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 20:52:43.601 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 20:52:43.602 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 20:52:43.602 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 20:52:43.602 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 20:52:43.602 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:52:43.603 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 20:52:43.608 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:52:43.608 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:52:43.609 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:52:43.609 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:52:43.617 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 20:52:43.621 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:52:43.621 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 20:52:43.622 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 20:52:43.622 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 20:52:43.622 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:52:43.623 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:52:43.623 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:52:43.623 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:52:43.649 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 20:52:43.649 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:52:43.676 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:52:43.682 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:52:43.683 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 20:52:43.687 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:52:43.687 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:52:43.692 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:52:43.692 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 20:52:43.693 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:52:56.382 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 20:52:56.389 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:52:56.389 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 20:52:56.389 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 20:52:56.390 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 20:52:56.399 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:52:56.498 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 20:52:56.511 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:52:56.512 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 20:52:56.515 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:52:56.516 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=21, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 20:52:56.523 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 20:52:56.528 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 20:52:56.529 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:52:56.529 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 20:52:56.529 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 20:52:56.529 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 20:52:56.550 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 20:52:56.554 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:52:56.557 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 20:52:56.566 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:52:56.567 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=21, ema (truncated)...]
2025-02-16 20:52:56.568 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 20:53:04.375 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/21
2025-02-16 20:53:04.380 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/21
2025-02-16 20:53:04.380 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/21", parameters={}
2025-02-16 20:53:04.381 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 20:53:04.401 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 20:53:04.411 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 20:53:04.413 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 20:53:04.416 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:53:04.416 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 20:53:04.417 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 20:53:04.417 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 20:53:16.826 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/21
2025-02-16 20:53:16.830 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/21
2025-02-16 20:53:16.831 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/21", parameters={}
2025-02-16 20:53:16.832 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 20:53:16.841 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 20:53:16.850 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 20:53:16.850 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 20:53:16.850 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 20:53:16.851 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:00:44.005 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:00:44.028 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:00:44.042 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:00:44.066 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:00:44.069 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:00:46.354 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 83777 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:00:46.356 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:00:46.356 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:00:46.399 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:00:46.399 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:00:46.796 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:00:46.830 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 2 JPA repository interfaces.
2025-02-16 21:00:47.128 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:00:47.136 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:00:47.136 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:00:47.156 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:00:47.156 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 757 ms
2025-02-16 21:00:47.264 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:00:47.294 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:00:47.310 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:00:47.458 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:00:47.473 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:00:47.573 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2ee61f75
2025-02-16 21:00:47.574 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:00:47.621 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:00:48.046 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:00:48.114 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:00:48.263 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:00:48.890 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:00:48.905 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:00:48.907 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:00:48.911 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:00:48.915 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:00:48.952 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:00:49.019 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:00:49.059 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:00:49.089 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:00:49.125 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:00:49.166 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:00:49.207 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:00:49.223 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:00:49.229 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.402 seconds (process running for 3.863)
2025-02-16 21:01:00.706 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:01:00.707 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:01:00.707 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:01:00.708 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:01:00.708 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:01:00.714 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7ee2c82f
2025-02-16 21:01:00.715 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@48113a5b
2025-02-16 21:01:00.715 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:01:00.715 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-02-16 21:01:00.728 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:01:00.738 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:01:00.739 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:01:00.741 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:01:00.753 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:00.763 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:01:00.989 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:01:01.050 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:01:01.051 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:01:01.051 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:01:01.051 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:01:01.052 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:01:01.053 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:01:01.054 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:01:01.054 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:01:01.081 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:01:01.081 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:01:01.083 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:01.083 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:01.089 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:01:01.089 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:01:01.090 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:01:01.090 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:01.090 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:01:01.090 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:01:01.090 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:01:01.091 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:01:01.091 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:01:01.142 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:01:01.142 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:01:01.152 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:01:01.249 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:01:01.249 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:01:01.254 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 21:01:01.254 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:01:01.358 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:01:01.359 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:01.364 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:01:10.560 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 21:01:10.568 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:10.569 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 21:01:10.570 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 21:01:10.571 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 21:01:10.646 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 21:01:10.758 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 21:01:10.788 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 21:01:10.789 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 21:01:10.797 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:01:10.797 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=22, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 21:01:10.802 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 21:01:10.818 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:01:10.818 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:10.818 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:01:10.818 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:01:10.818 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:01:10.820 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:01:10.822 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:01:10.826 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:01:10.830 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:01:10.830 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=22, ema (truncated)...]
2025-02-16 21:01:10.831 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:01:15.692 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/22
2025-02-16 21:01:15.694 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/22
2025-02-16 21:01:15.695 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/22", parameters={}
2025-02-16 21:01:15.695 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 21:01:15.722 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 21:01:15.732 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 21:01:15.737 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 21:01:15.742 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:01:15.742 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 21:01:15.743 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 21:01:15.743 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:15.748 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:01:15.749 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:15.749 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:01:15.749 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:01:15.750 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:01:15.752 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:01:15.755 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:01:15.758 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:01:15.758 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}]]
2025-02-16 21:01:15.759 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:01:32.032 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 21:01:32.037 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:32.037 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 21:01:32.037 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 21:01:32.038 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 21:01:32.043 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 21:01:32.160 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 21:01:32.175 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 21:01:32.176 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 21:01:32.178 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:01:32.179 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=32}]
2025-02-16 21:01:32.180 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 21:01:32.188 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:01:32.189 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:32.189 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:01:32.189 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:01:32.189 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:01:32.193 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:01:32.194 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:01:32.196 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:01:32.198 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:01:32.198 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:01:32.199 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:01:44.076 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/23
2025-02-16 21:01:44.077 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/23
2025-02-16 21:01:44.078 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/23", parameters={}
2025-02-16 21:01:44.078 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 21:01:44.083 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=36}]
2025-02-16 21:01:44.098 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 21:01:44.104 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 21:01:44.123 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.model.User */update user 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=? 
    where
        id=?
2025-02-16 21:01:44.127 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 21:01:44.128 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 21:01:44.129 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 21:01:44.133 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:01:44.133 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=36}]
2025-02-16 21:01:44.135 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:01:44.135 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:44.139 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:01:44.140 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:01:44.140 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:01:44.140 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:01:44.140 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:01:44.142 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:01:44.144 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:01:44.146 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:01:44.147 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:01:44.148 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:01:44.149 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:03:35.431 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:03:35.438 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:03:35.439 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:03:35.449 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session CB41622A835080BB5A3CB8298D9D654B
2025-02-16 21:03:35.459 [http-nio-8081-exec-10] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:03:35.465 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:03:35.517 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:04:56.462 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:04:56.502 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:04:56.514 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:04:56.525 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:04:56.531 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:04:59.028 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 83855 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:04:59.030 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:04:59.030 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:04:59.080 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:04:59.080 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:04:59.503 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:04:59.573 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 2 JPA repository interfaces.
2025-02-16 21:04:59.906 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:04:59.913 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:04:59.914 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:04:59.933 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:04:59.933 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 852 ms
2025-02-16 21:05:00.028 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:05:00.058 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:05:00.073 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:05:00.213 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:05:00.228 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:05:00.326 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6e10fe7f
2025-02-16 21:05:00.327 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:05:00.379 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:05:00.808 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:05:00.881 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:05:01.029 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:05:01.445 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:05:01.460 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:05:01.462 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:05:01.468 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:01.472 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:01.475 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:05:01.515 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:05:01.580 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:05:01.616 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:05:01.636 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:05:01.669 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:05:01.715 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:05:01.767 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:05:01.782 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:05:01.789 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.155 seconds (process running for 3.46)
2025-02-16 21:05:10.801 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:05:10.802 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:05:10.802 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:05:10.802 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:05:10.802 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:05:10.805 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2828dd45
2025-02-16 21:05:10.805 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3b812bcc
2025-02-16 21:05:10.805 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:05:10.806 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 21:05:10.819 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:05:10.930 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:05:11.011 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:05:11.026 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@536b134f]
2025-02-16 21:05:11.026 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 21:05:11.047 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:05:11.054 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:05:11.056 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:05:11.057 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:05:11.069 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:11.080 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:05:11.290 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:11.339 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:05:11.339 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:05:11.340 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:05:11.340 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:05:11.340 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:05:11.340 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:05:11.341 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:05:11.341 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:05:11.351 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:11.351 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:11.352 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:11.352 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:11.356 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:05:11.356 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:05:11.356 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:05:11.356 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:05:11.356 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:11.356 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:05:11.356 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:05:11.357 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:05:11.357 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:05:11.361 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:05:11.361 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:05:11.372 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:11.380 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:11.387 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:05:11.387 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:05:11.388 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:05:11.388 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:05:11.414 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:11.414 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:11.417 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:26.390 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/23
2025-02-16 21:05:26.392 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/23
2025-02-16 21:05:26.392 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/23", parameters={}
2025-02-16 21:05:26.393 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 21:05:26.448 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 21:05:26.465 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 21:05:26.472 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 21:05:26.553 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.model.User */update user 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=? 
    where
        id=?
2025-02-16 21:05:26.568 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:05:26.568 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]
2025-02-16 21:05:26.569 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:26.569 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:26.574 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:05:26.575 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:26.575 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:05:26.575 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:05:26.575 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:05:26.577 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:05:26.578 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:26.580 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:26.581 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:05:26.581 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:05:26.582 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:28.756 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:05:28.757 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:05:28.757 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:05:28.758 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:05:28.758 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:28.760 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:05:28.796 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:28.804 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:05:28.805 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:05:28.805 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:05:28.805 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:05:28.805 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:05:28.805 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:05:28.806 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:05:28.806 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:05:28.807 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:28.807 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:28.808 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:28.809 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:28.813 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:05:28.814 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:28.814 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:05:28.814 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:05:28.814 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:05:28.814 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:05:28.814 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:05:28.814 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:05:28.815 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:05:28.816 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:05:28.816 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:05:28.818 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:28.818 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:05:28.819 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:05:28.819 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:28.819 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:28.819 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:28.820 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:05:28.821 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:05:28.821 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:38.029 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:05:38.032 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:05:38.033 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:05:38.034 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:05:38.038 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:38.043 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:05:38.066 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:38.082 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:05:38.083 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:05:38.083 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:05:38.083 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:05:38.083 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:05:38.083 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:05:38.083 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:05:38.083 [http-nio-8081-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:05:38.085 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:38.085 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:38.086 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:38.086 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:38.095 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:05:38.095 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:05:38.095 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:05:38.095 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:38.095 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:05:38.095 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:05:38.095 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:05:38.095 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:05:38.096 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:05:38.103 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:05:38.103 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:05:38.107 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:38.109 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:38.109 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:05:38.109 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:05:38.110 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:38.111 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:38.112 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:05:38.113 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:05:38.113 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:45.110 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:05:45.117 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:45.118 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:45.118 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session E3C9DA9BAD65D30D648833454D23F3B0
2025-02-16 21:05:45.129 [http-nio-8081-exec-3] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:05:45.137 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:05:45.183 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:05:49.621 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:05:49.648 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:05:49.765 [http-nio-8081-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:05:49.767 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1abf9]
2025-02-16 21:05:49.767 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 21:05:49.771 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:05:49.771 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:05:49.772 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:05:49.772 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:05:49.772 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:49.777 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:05:49.795 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:49.806 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:05:49.806 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:05:49.806 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:05:49.806 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:05:49.806 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:05:49.806 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:05:49.806 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:05:49.806 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:05:49.813 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:49.813 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:49.814 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:49.814 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:49.823 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:05:49.823 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:05:49.823 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:05:49.823 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:05:49.823 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:05:49.823 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:49.823 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:05:49.824 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:05:49.824 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:05:49.826 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:05:49.826 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:05:49.828 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:49.830 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:05:49.830 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:05:49.830 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:05:49.831 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:05:49.832 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:05:49.835 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:05:49.835 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:05:49.837 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:06:17.960 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:06:17.962 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:06:17.963 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:06:17.963 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session D1C535FFF95D11AAFDEA5D0689A06AF6
2025-02-16 21:06:17.964 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:06:17.970 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:06:17.996 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:06:25.268 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:06:25.280 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:06:25.390 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:06:25.391 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1967f7b5]
2025-02-16 21:06:25.391 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 21:06:25.396 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:06:25.396 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:06:25.397 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:06:25.397 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:06:25.397 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:06:25.398 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:06:25.408 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:06:25.424 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:06:25.424 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:06:25.425 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:06:25.425 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:06:25.425 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:06:25.425 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:06:25.426 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:06:25.426 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:06:25.429 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:06:25.429 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:06:25.430 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:06:25.430 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:06:25.433 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:06:25.434 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:06:25.434 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:06:25.434 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:06:25.434 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:06:25.434 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:06:25.434 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:06:25.434 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:06:25.435 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:06:25.442 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:06:25.442 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:06:25.444 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:06:25.445 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:06:25.446 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:06:25.446 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:06:25.446 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:06:25.447 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:06:25.449 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:06:25.449 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:06:25.449 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:07:23.109 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 21:07:23.113 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:07:23.114 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 21:07:23.114 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 21:07:23.115 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 21:07:23.124 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='sapsan@mail.ru', firstName='Алексей', lastName='Сапсан', age=28}]
2025-02-16 21:07:23.248 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 21:07:23.265 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 21:07:23.266 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 21:07:23.270 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:07:23.271 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=24, email='sapsan@mail.ru', firstName='Алексей', lastName='Сапсан', age=28}]
2025-02-16 21:07:23.271 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 21:07:23.279 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:07:23.279 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:07:23.280 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:07:23.280 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:07:23.280 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:07:23.286 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:07:23.291 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:07:23.292 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:07:23.293 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:07:23.294 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:07:23.294 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:07:23.295 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:07:37.760 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /admin/users/24
2025-02-16 21:07:37.763 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /admin/users/24
2025-02-16 21:07:37.765 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/admin/users/24", parameters={}
2025-02-16 21:07:37.770 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#saveUser(Long, User)
2025-02-16 21:07:37.776 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=24, email='sapsan@mail.ru', firstName='Алексей', lastName='Сапсан', age=27}]
2025-02-16 21:07:37.793 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 21:07:37.804 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 21:07:37.808 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* update
        for ru.kata.spring.boot_security.demo.model.User */update user 
    set
        age=?,
        email=?,
        first_name=?,
        last_name=?,
        password=? 
    where
        id=?
2025-02-16 21:07:37.813 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:07:37.814 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=24, email='sapsan@mail.ru', firstName='Алексей', lastName='Сапсан', age=27}]
2025-02-16 21:07:37.816 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:07:37.816 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:07:37.822 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:07:37.822 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:07:37.823 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:07:37.823 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:07:37.837 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:07:37.841 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:07:37.843 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:07:37.845 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:07:37.846 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:07:37.849 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:07:37.849 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:07:37.850 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:08:09.022 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/24
2025-02-16 21:08:09.026 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/24
2025-02-16 21:08:09.027 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/24", parameters={}
2025-02-16 21:08:09.028 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 21:08:09.051 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 21:08:09.071 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 21:08:09.076 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 21:08:09.086 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:08:09.086 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 21:08:09.086 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 21:08:09.087 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:09.095 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:08:09.095 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:09.095 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:08:09.095 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:08:09.095 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:08:09.098 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:08:09.100 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:08:09.101 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:08:09.102 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:08:09.102 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:08:09.103 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:08:14.204 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:08:14.204 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:14.205 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:14.205 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 64D584337842E907926DB28441A7B7D1
2025-02-16 21:08:14.206 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:08:14.224 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:08:14.263 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:08:25.077 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:08:25.094 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:08:25.203 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user@example.com'
2025-02-16 21:08:25.213 [http-nio-8081-exec-3] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 21:08:25.223 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 21:08:25.243 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:08:35.181 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:08:35.201 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:08:35.315 [http-nio-8081-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:08:35.316 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 28B27492EF34FB1762E98A36BAB18A8C
2025-02-16 21:08:35.317 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28B27492EF34FB1762E98A36BAB18A8C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@7e46303f]
2025-02-16 21:08:35.317 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28B27492EF34FB1762E98A36BAB18A8C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 21:08:35.320 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:08:35.321 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:08:35.321 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:08:35.321 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:08:35.321 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28B27492EF34FB1762E98A36BAB18A8C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:35.324 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:08:35.341 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:08:35.356 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:08:35.356 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:08:35.357 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:08:35.357 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:08:35.357 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:08:35.358 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:08:35.357 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:08:35.358 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:08:35.360 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:08:35.360 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:08:35.361 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28B27492EF34FB1762E98A36BAB18A8C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:35.361 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28B27492EF34FB1762E98A36BAB18A8C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:35.369 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:08:35.369 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:08:35.370 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:08:35.370 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:08:35.375 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28B27492EF34FB1762E98A36BAB18A8C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:35.375 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:08:35.375 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:08:35.376 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:08:35.376 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:08:35.378 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:08:35.378 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:08:35.380 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:08:35.381 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:08:35.381 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:08:35.381 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:08:35.381 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:08:35.382 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28B27492EF34FB1762E98A36BAB18A8C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:35.384 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:08:35.384 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:08:35.384 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:08:57.203 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 21:08:57.210 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28B27492EF34FB1762E98A36BAB18A8C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:57.210 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 21:08:57.211 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 21:08:57.211 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 21:08:57.220 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='user@example.com', firstName='user', lastName='user', age=30}]
2025-02-16 21:08:57.331 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 21:08:57.342 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 21:08:57.345 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:08:57.345 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}]
2025-02-16 21:08:57.346 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 21:08:57.351 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:08:57.352 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28B27492EF34FB1762E98A36BAB18A8C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:57.352 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:08:57.352 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:08:57.352 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:08:57.357 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:08:57.359 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:08:57.360 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:08:57.361 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:08:57.362 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:08:57.362 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:08:57.363 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:08:59.364 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:08:59.369 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28B27492EF34FB1762E98A36BAB18A8C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:59.369 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=28B27492EF34FB1762E98A36BAB18A8C], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:08:59.369 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session B297F6147D44F85FB08D0D15FAA68408
2025-02-16 21:08:59.370 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:08:59.375 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:08:59.405 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:09:04.086 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:09:04.105 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:09:04.226 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:09:04.227 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6a6a07aa]
2025-02-16 21:09:04.227 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:09:04.230 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:09:04.231 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:09:04.231 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:09:04.231 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:09:04.231 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:09:04.233 [http-nio-8081-exec-8] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:09:04.245 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:09:04.253 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:09:04.253 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:09:04.253 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:09:04.254 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:09:04.254 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:09:04.254 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:09:04.254 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:09:04.254 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:09:04.255 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:09:04.255 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:09:04.256 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:09:04.256 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:09:04.263 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:09:04.264 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:09:04.265 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:09:04.265 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:09:04.263 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:09:04.267 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:09:04.268 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 21:09:04.270 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:09:04.273 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:09:04.273 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:09:04.274 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:09:04.274 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:09:04.280 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 21:09:04.280 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 21:09:04.280 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 21:09:04.281 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 21:09:04.287 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:09:04.287 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 21:09:04 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 21:09:04.294 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 21:09:04.294 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:09:24.190 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 21:09:24.194 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:09:24.195 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 21:09:24.197 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-02-16 21:09:24.198 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-02-16 21:09:24.200 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={}
2025-02-16 21:09:24.202 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 21:09:24.210 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:09:24.211 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 21:09:24 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 21:09:24.212 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 21:09:24.213 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:09:30.597 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:09:30.598 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:09:30.598 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:09:30.598 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 6DA8A900F2DE8B4A32FE1864EFF7132E
2025-02-16 21:09:30.599 [http-nio-8081-exec-3] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:09:30.604 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:09:30.632 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:09:37.300 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:09:37.322 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:09:37.423 [http-nio-8081-exec-7] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:09:37.424 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@6cf27c35]
2025-02-16 21:09:37.424 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 21:09:37.427 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:09:37.427 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:09:37.427 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:09:37.428 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:09:37.437 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:09:37.440 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:09:37.450 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:09:37.472 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:09:37.472 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:09:37.473 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:09:37.473 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:09:37.473 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:09:37.473 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:09:37.474 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:09:37.474 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:09:37.478 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:09:37.478 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:09:37.478 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:09:37.478 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:09:37.483 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:09:37.483 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:09:37.484 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:09:37.484 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:09:37.484 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:09:37.485 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:09:37.485 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:09:37.487 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:09:37.488 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:09:37.499 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:09:37.500 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:09:37.501 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:09:37.502 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:09:37.502 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:09:37.504 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:09:37.504 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:09:37.505 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:09:37.507 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:09:37.511 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:09:37.511 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:09:37.512 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:15:32.957 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:15:32.980 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:15:33.050 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:15:33.076 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:15:33.081 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:15:35.384 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 83975 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:15:35.385 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:15:35.385 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:15:35.427 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:15:35.428 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:15:35.864 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:15:35.893 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 21:15:36.212 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:15:36.224 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:15:36.224 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:15:36.248 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:15:36.249 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 820 ms
2025-02-16 21:15:36.359 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:15:36.393 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:15:36.410 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:15:36.559 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:15:36.576 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:15:36.659 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@66fbfd7a
2025-02-16 21:15:36.660 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:15:36.733 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:15:37.162 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:15:37.233 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:15:37.384 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:15:37.741 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:15:37.760 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:15:37.761 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:15:37.766 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:15:37.770 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:15:37.771 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:15:37.773 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:15:37.814 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:15:37.891 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:15:37.942 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:15:37.973 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:15:38.020 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:15:38.066 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:15:38.113 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:15:38.134 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:15:38.147 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.193 seconds (process running for 3.714)
2025-02-16 21:15:45.409 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:15:45.410 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:15:45.410 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:15:45.410 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:15:45.411 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:15:45.419 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1430da66
2025-02-16 21:15:45.419 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@172577e6
2025-02-16 21:15:45.420 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:15:45.420 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2025-02-16 21:15:45.442 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:15:45.448 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:15:45.448 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:15:45.449 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session CF3D7416D228A16089CF51476A3941DF
2025-02-16 21:15:45.452 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:15:45.460 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:15:45.499 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:15:50.251 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:15:50.424 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:15:50.523 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:15:50.533 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@197bb95b]
2025-02-16 21:15:50.533 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:15:50.546 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:15:50.549 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:15:50.550 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:15:50.551 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:15:50.561 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:15:50.575 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:15:50.747 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:15:50.762 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:15:50.762 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:15:50.762 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:15:50.762 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:15:50.763 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:15:50.763 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:15:50.763 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:15:50.764 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:15:50.773 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:15:50.774 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:15:50.774 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:15:50.774 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:15:50.779 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:15:50.779 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:15:50.779 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:15:50.779 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:15:50.779 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:15:50.779 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:15:50.780 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 21:15:50.786 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:15:50.787 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 21:15:50.787 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 21:15:50.788 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 21:15:50.788 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 21:15:50.797 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:15:50.798 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:15:50.798 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:15:50.798 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 21:15:50 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 21:15:50.820 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 21:15:50.821 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:15:50.823 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:15:50.823 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:15:57.619 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:15:57.624 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:15:57.624 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:15:57.625 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 7CE9FD2E3FEFB95C676A95F5CF82926A
2025-02-16 21:15:57.626 [http-nio-8081-exec-4] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:15:57.632 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:15:57.660 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:19:02.045 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2025-02-16 21:19:02.098 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:19:08.707 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:19:08.793 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:19:08.922 [http-nio-8081-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:19:08.923 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@942416d]
2025-02-16 21:19:08.923 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:19:08.929 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:19:08.932 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:19:08.933 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:19:08.933 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:19:08.935 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:19:08.946 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:19:08.971 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:19:08.978 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:19:08.979 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:19:08.979 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:19:08.980 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:19:08.980 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:19:08.981 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:19:08.982 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:19:08.982 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:19:08.986 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:19:08.986 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:19:08.986 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:19:08.986 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:19:09.247 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:19:09.247 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:19:09.252 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:19:09.251 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:19:09.252 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 21:19:09.252 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:19:09.252 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:19:09.254 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 21:19:09.254 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 21:19:09.254 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 21:19:09.255 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 21:19:09.263 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:19:09.264 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 21:19:09 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 21:19:09.270 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 21:19:09.272 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:19:09.272 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:19:09.280 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:19:09.281 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:19:09.285 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:19:09.286 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:19:34.602 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:19:34.618 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:19:34.646 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:19:34.661 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:19:34.682 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:19:37.267 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84020 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:19:37.269 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:19:37.269 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:19:37.311 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:19:37.311 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:19:37.706 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:19:37.736 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 2 JPA repository interfaces.
2025-02-16 21:19:38.101 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:19:38.108 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:19:38.108 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:19:38.130 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:19:38.131 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 819 ms
2025-02-16 21:19:38.251 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:19:38.280 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:19:38.316 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:19:38.474 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:19:38.489 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:19:38.584 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2ef81c0f
2025-02-16 21:19:38.585 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:19:38.640 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:19:39.074 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:19:39.139 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:19:39.287 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:19:39.795 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:19:39.809 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:19:39.811 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:19:39.816 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:19:39.820 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:19:39.821 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:19:39.823 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:19:39.858 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:19:39.941 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:19:39.989 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:19:40.015 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:19:40.063 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:19:40.109 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:19:40.153 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:19:40.180 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:19:40.191 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.315 seconds (process running for 3.678)
2025-02-16 21:19:52.865 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:19:52.866 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:19:52.867 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:19:52.867 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:19:52.867 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:19:52.871 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@b8bd092
2025-02-16 21:19:52.871 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@28a453c
2025-02-16 21:19:52.872 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:19:52.872 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-02-16 21:19:52.886 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:19:53.011 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:19:53.103 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:19:53.116 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@2208f460]
2025-02-16 21:19:53.116 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:19:53.126 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:19:53.128 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:19:53.129 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:19:53.131 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:19:53.143 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:19:53.154 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:19:53.333 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:19:53.354 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:19:53.355 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:19:53.355 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:19:53.355 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:19:53.355 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:19:53.355 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:19:53.355 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:19:53.356 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:19:53.370 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:19:53.371 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:19:53.371 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:19:53.373 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:19:53.381 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:19:53.381 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:19:53.383 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:19:53.384 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:19:53.385 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:19:53.385 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:19:53.385 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:19:53.385 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:19:53.385 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:19:53.390 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:19:53.392 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:19:53.394 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:19:53.396 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:19:53.397 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:19:53.400 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:19:53.400 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:19:53.401 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:19:53.401 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=6, email='admin@example.com', firstName='Admin', lastName='Admin', age=32}, User{id=23, ema (truncated)...]
2025-02-16 21:19:53.426 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:19:53.427 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:19:53.430 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:20:07.745 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/6
2025-02-16 21:20:07.749 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/6
2025-02-16 21:20:07.750 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/6", parameters={}
2025-02-16 21:20:07.752 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 21:20:07.797 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 21:20:07.824 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 21:20:07.837 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 21:20:07.845 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:20:07.845 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 21:20:07.846 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 21:20:07.846 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:20:07.848 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:20:07.849 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:20:07.849 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:20:07.849 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:20:07.849 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:20:07.851 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:20:07.852 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:20:07.852 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:20:07.854 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:20:07.854 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:20:07.855 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:20:42.516 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:20:42.528 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:20:42.543 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:20:42.552 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:20:42.568 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:20:44.455 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84030 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:20:44.456 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:20:44.457 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:20:44.487 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:20:44.487 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:20:44.881 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:20:44.910 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 21:20:45.226 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:20:45.235 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:20:45.235 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:20:45.263 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:20:45.263 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 776 ms
2025-02-16 21:20:45.386 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:20:45.415 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:20:45.431 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:20:45.576 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:20:45.594 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:20:45.678 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32b54ca7
2025-02-16 21:20:45.679 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:20:45.734 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:20:46.161 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:20:46.209 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:20:46.328 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:20:46.736 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:20:46.749 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:20:46.751 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:20:46.756 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:20:46.759 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:20:46.761 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:20:46.794 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:20:46.875 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:20:46.912 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:20:46.934 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:20:46.973 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:20:47.011 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:20:47.053 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:20:47.068 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:20:47.074 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.108 seconds (process running for 3.482)
2025-02-16 21:21:13.787 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:21:13.795 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:21:13.801 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:21:13.806 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:21:13.816 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:21:15.654 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84051 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:21:15.656 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:21:15.657 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:21:15.702 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:21:15.702 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:21:16.075 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:21:16.108 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 2 JPA repository interfaces.
2025-02-16 21:21:16.408 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:21:16.418 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:21:16.418 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:21:16.451 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:21:16.452 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 750 ms
2025-02-16 21:21:16.562 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:21:16.587 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:21:16.603 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:21:16.757 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:21:16.770 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:21:17.057 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6e3022af
2025-02-16 21:21:17.058 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:21:17.105 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:21:17.752 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:21:17.812 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:21:18.055 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:21:18.458 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:21:18.475 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:21:18.477 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:21:18.484 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:21:18.489 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:21:18.492 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:21:18.538 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:21:18.605 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:21:18.646 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:21:18.676 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:21:18.722 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:21:18.762 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:21:18.800 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:21:18.816 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:21:18.822 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.824 seconds (process running for 4.126)
2025-02-16 21:21:20.416 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:21:20.416 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:21:20.416 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:21:20.416 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:21:20.416 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:21:20.417 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@39722af4
2025-02-16 21:21:20.417 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@69c2bb34
2025-02-16 21:21:20.417 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:21:20.418 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-16 21:21:20.430 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:21:20.435 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:21:20.436 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:21:20.437 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:21:20.446 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:20.454 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:21:20.618 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:21:20.637 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:21:20.638 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:21:20.637 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:21:20.638 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:21:20.639 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:21:20.639 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:21:20.639 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:21:20.639 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:21:20.645 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:21:20.645 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:21:20.646 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:20.646 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:20.652 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:21:20.653 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:21:20.653 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:21:20.653 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:21:20.654 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:21:20.653 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:20.655 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:21:20.655 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:21:20.656 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:21:20.659 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:21:20.659 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:21:20.662 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:21:20.663 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:21:20.668 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:21:20.668 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:21:20.669 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:21:20.669 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:21:20.697 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:21:20.697 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:20.701 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:21:24.206 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:21:24.208 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:24.209 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:24.212 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session E6BA145C4E0AAB8F9952BD501895FB71
2025-02-16 21:21:24.224 [http-nio-8081-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:21:24.232 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:21:24.271 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:21:28.447 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:21:28.610 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:21:28.698 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:21:28.708 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@1eeed068]
2025-02-16 21:21:28.709 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:21:28.716 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:21:28.717 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:21:28.717 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:21:28.717 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:21:28.717 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:28.719 [http-nio-8081-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:21:28.744 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:21:28.760 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:21:28.760 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:21:28.760 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:21:28.760 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:21:28.761 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:21:28.761 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:21:28.761 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:21:28.761 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:21:28.769 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:21:28.769 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:28.769 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:21:28.772 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:28.776 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:21:28.777 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:21:28.776 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:21:28.777 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:21:28.777 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:21:28.777 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:28.777 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:21:28.777 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:21:28.778 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:21:28.782 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:21:28.782 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:21:28.783 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:21:28.784 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:21:28.785 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:21:28.785 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:21:28.786 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:21:28.786 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:28.788 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:21:28.788 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:21:28.789 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:21:35.025 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/25
2025-02-16 21:21:35.029 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/25
2025-02-16 21:21:35.030 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/25", parameters={}
2025-02-16 21:21:35.032 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 21:21:35.088 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 21:21:35.114 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 21:21:35.121 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 21:21:35.126 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:21:35.126 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 21:21:35.126 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 21:21:35.126 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:35.131 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:21:35.131 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:35.131 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:21:35.131 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:21:35.132 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:21:35.134 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:21:35.135 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:21:35.138 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:21:35.138 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]]
2025-02-16 21:21:35.139 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:21:36.291 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:21:36.292 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:36.292 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=25, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:21:36.293 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 3940D11D3D29E492D599B2A02421ABDC
2025-02-16 21:21:36.294 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:21:36.301 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:21:36.326 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:21:51.078 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:21:51.083 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:21:51.090 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:21:51.100 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:21:51.107 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:21:52.765 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84056 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:21:52.765 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:21:52.766 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:21:52.794 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:21:52.795 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:21:53.148 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:21:53.175 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 21:21:53.470 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:21:53.478 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:21:53.478 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:21:53.498 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:21:53.498 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 703 ms
2025-02-16 21:21:53.597 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:21:53.619 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:21:53.633 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:21:53.761 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:21:53.774 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:21:53.848 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32c08dc4
2025-02-16 21:21:53.849 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:21:53.891 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:21:54.314 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:21:54.360 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:21:54.495 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:21:54.917 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:21:54.931 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:21:54.932 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:21:54.937 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:21:54.941 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:21:54.976 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:21:55.045 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:21:55.085 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:21:55.106 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:21:55.148 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:21:55.202 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:21:55.260 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:21:55.277 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:21:55.282 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.901 seconds (process running for 3.268)
2025-02-16 21:22:06.246 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:22:06.247 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:22:06.247 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:22:06.247 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:22:06.247 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:22:06.256 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6fb5cd50
2025-02-16 21:22:06.256 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5bdfaeae
2025-02-16 21:22:06.256 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:22:06.256 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2025-02-16 21:22:06.267 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:22:06.393 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:22:06.496 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'user@example.com'
2025-02-16 21:22:06.509 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 21:22:06.515 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 21:22:06.554 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:22:10.631 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:22:10.653 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:22:10.766 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 21:22:10.767 [http-nio-8081-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 21:22:10.771 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 21:22:10.784 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:22:16.734 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:22:16.762 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:22:16.869 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin@example.com'
2025-02-16 21:22:16.870 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 21:22:16.874 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 21:22:16.895 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:22:21.441 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:22:21.448 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:22:21.575 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:22:21.580 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from 749FDC047926410998D1D454DA5A430F
2025-02-16 21:22:21.581 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5b415192]
2025-02-16 21:22:21.581 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 21:22:21.591 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:22:21.594 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:22:21.595 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:22:21.596 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:22:21.606 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:22:21.620 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:22:21.908 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:22:21.910 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:22:21.913 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:22:21.915 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:22:21.916 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:22:21.916 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:22:21.916 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:22:21.916 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:22:21.916 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:22:21.931 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:22:21.931 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:22:21.931 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:22:21.931 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:22:21.945 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:22:21.945 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:22:21.945 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:22:21.946 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:22:21.946 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:22:21.946 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:22:21.946 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:22:21.946 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:22:21.948 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:22:21.959 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:22:21.959 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:22:21.961 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:22:21.973 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:22:21.973 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:22:21.976 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:22:21.976 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}]]
2025-02-16 21:22:22.022 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:22:22.023 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:22:22.032 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:22:43.220 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 21:22:43.224 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:22:43.225 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 21:22:43.228 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 21:22:43.230 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 21:22:43.306 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='admin@example.com', firstName='admin', lastName='admin', age=30}]
2025-02-16 21:22:43.404 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 21:22:43.420 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 21:22:43.432 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:22:43.433 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}]
2025-02-16 21:22:43.434 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 21:22:43.445 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:22:43.445 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:22:43.446 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:22:43.446 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:22:43.446 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:22:43.459 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:22:43.467 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:22:43.470 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:22:43.473 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:22:43.473 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:22:43.475 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:23:47.974 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:23:47.982 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:23:47.998 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:23:48.007 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:23:48.015 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:23:49.903 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84095 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:23:49.903 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:23:49.904 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:23:49.951 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:23:49.952 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:23:50.377 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:23:50.406 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 21:23:50.718 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:23:50.726 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:23:50.726 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:23:50.746 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:23:50.746 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 794 ms
2025-02-16 21:23:50.855 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:23:50.883 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:23:50.898 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:23:51.040 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:23:51.055 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:23:51.134 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@33c694a0
2025-02-16 21:23:51.135 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:23:51.181 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:23:51.660 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:23:51.706 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:23:51.854 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:23:52.211 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:23:52.223 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:23:52.224 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:23:52.229 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:23:52.231 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:23:52.233 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:23:52.267 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:23:52.329 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:23:52.365 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:23:52.386 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:23:52.414 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:23:52.453 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:23:52.495 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:23:52.521 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:23:52.533 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.079 seconds (process running for 3.521)
2025-02-16 21:23:56.395 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:23:56.400 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:23:56.402 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:23:56.402 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:23:56.402 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:23:56.405 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@400068bc
2025-02-16 21:23:56.405 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@25def65b
2025-02-16 21:23:56.406 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:23:56.406 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-02-16 21:23:56.419 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:23:56.426 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:23:56.427 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:23:56.429 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:23:56.441 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:23:56.461 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:23:56.690 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:23:56.719 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:23:56.719 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:23:56.719 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:23:56.719 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:23:56.720 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:23:56.720 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:23:56.720 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:23:56.720 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:23:56.726 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:23:56.726 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:23:56.727 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:23:56.727 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:23:56.732 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:23:56.732 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:23:56.733 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:23:56.733 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:23:56.733 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:23:56.733 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:23:56.733 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:23:56.733 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:23:56.734 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:23:56.752 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:23:56.752 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:23:56.756 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:23:56.759 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:23:56.764 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:23:56.764 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:23:56.765 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:23:56.765 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:23:56.791 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:23:56.792 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:23:56.795 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:17.132 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /admin/users
2025-02-16 21:24:17.141 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:24:17.142 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /admin/users
2025-02-16 21:24:17.142 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/admin/users", parameters={}
2025-02-16 21:24:17.143 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#createUser(User)
2025-02-16 21:24:17.238 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [User{id=null, email='user@example.com', firstName='user', lastName='user', age=30}]
2025-02-16 21:24:17.377 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User */insert 
    into
        user (age, email, first_name, last_name, password) 
    values
        (?, ?, ?, ?, ?)
2025-02-16 21:24:17.413 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* insert for
        ru.kata.spring.boot_security.demo.model.User.roles */insert 
    into
        user_role (user_id, role_id) 
    values
        (?, ?)
2025-02-16 21:24:17.420 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:24:17.420 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}]
2025-02-16 21:24:17.421 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-02-16 21:24:17.428 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:24:17.430 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:24:17.430 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:24:17.430 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:24:17.431 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:24:17.437 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:24:17.438 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:17.439 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:17.440 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:17.442 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:24:17.442 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:24:17.443 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:20.011 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:24:20.012 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:24:20.014 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=749FDC047926410998D1D454DA5A430F], Granted Authorities=[Role{id=2, name='ROLE_USER'}, Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:24:20.017 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 68D6B74E172F66EF2840337021659C81
2025-02-16 21:24:20.020 [http-nio-8081-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:24:20.027 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:24:20.064 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:24:25.979 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:24:26.124 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:24:26.215 [http-nio-8081-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:24:26.239 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@61fe2800]
2025-02-16 21:24:26.239 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:24:26.244 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:24:26.244 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:24:26.245 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:24:26.245 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:24:26.245 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:26.246 [http-nio-8081-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:24:26.272 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:26.285 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:24:26.284 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:24:26.285 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:24:26.285 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:24:26.285 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:24:26.285 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:24:26.286 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:24:26.286 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:24:26.287 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:26.287 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:26.288 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:26.290 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:26.296 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:24:26.297 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:26.297 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:24:26.297 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:24:26.298 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:24:26.301 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:24:26.302 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:24:26.302 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:24:26.302 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:24:26.304 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:24:26.305 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:24:26.306 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:26.307 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:24:26.307 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:26.307 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:24:26.307 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:26.308 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:26.308 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:26.310 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:24:26.310 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:24:26.311 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:36.125 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:24:36.134 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:24:36.138 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:24:36.144 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:24:36.158 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:24:38.171 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84107 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:24:38.173 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:24:38.173 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:24:38.200 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:24:38.200 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:24:38.564 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:24:38.592 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 21:24:38.873 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:24:38.879 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:24:38.879 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:24:38.899 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:24:38.900 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 699 ms
2025-02-16 21:24:39.007 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:24:39.031 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:24:39.045 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:24:39.185 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:24:39.200 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:24:39.295 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5617144c
2025-02-16 21:24:39.296 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:24:39.341 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:24:39.759 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:24:39.802 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:24:39.912 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:24:40.324 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:24:40.340 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:24:40.342 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:24:40.346 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:40.348 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:40.350 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:40.352 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:24:40.384 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:24:40.448 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:24:40.485 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:24:40.507 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:24:40.540 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:24:40.581 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:24:40.624 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:24:40.647 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:24:40.659 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 2.841 seconds (process running for 3.628)
2025-02-16 21:24:44.922 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:24:44.923 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:24:44.923 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:24:44.923 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:24:44.923 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:24:44.925 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3aa488c2
2025-02-16 21:24:44.926 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@21ba9023
2025-02-16 21:24:44.926 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:24:44.927 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 21:24:44.938 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:24:44.943 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:24:44.944 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:24:44.946 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:24:44.956 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:44.971 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:24:45.181 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:45.188 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:24:45.188 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:24:45.189 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:24:45.189 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:24:45.189 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:24:45.189 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:24:45.190 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:24:45.190 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:24:45.199 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:45.199 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:45.201 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:45.201 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:45.205 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:24:45.206 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:24:45.206 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:24:45.207 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:24:45.207 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:45.207 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:24:45.207 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:24:45.207 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:24:45.207 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:24:45.219 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:24:45.219 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:24:45.223 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:45.227 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:45.229 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:24:45.236 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:24:45.236 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:24:45.237 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:24:45.237 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:24:45.268 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:45.268 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:45.272 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:24:50.123 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:24:50.125 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:50.125 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:24:50.129 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session C2C0E606680941D627176203C16E970F
2025-02-16 21:24:50.133 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:24:50.139 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:24:50.177 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:26:11.732 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:26:11.740 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:26:11.749 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:26:11.754 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:26:11.756 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:26:13.680 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84131 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:26:13.682 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:26:13.687 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:26:13.784 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:26:13.784 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:26:14.590 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:26:14.664 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 58 ms. Found 2 JPA repository interfaces.
2025-02-16 21:26:15.060 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:26:15.068 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:26:15.068 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:26:15.092 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:26:15.092 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1307 ms
2025-02-16 21:26:15.203 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:26:15.227 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:26:15.241 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:26:15.382 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:26:15.396 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:26:15.471 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3f7e98be
2025-02-16 21:26:15.472 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:26:15.513 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:26:16.385 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:26:16.462 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:26:16.626 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:26:17.051 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:26:17.067 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:26:17.068 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:26:17.073 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:26:17.079 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:26:17.080 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:26:17.085 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:26:17.131 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:26:17.199 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:26:17.241 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:26:17.271 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:26:17.319 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:26:17.364 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:26:17.401 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:26:17.417 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:26:17.423 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 4.501 seconds (process running for 4.807)
2025-02-16 21:26:29.590 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:26:29.591 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:26:29.592 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:26:29.592 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:26:29.592 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:26:29.595 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@4e4f9af1
2025-02-16 21:26:29.595 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1f6f6a8d
2025-02-16 21:26:29.595 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:26:29.595 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 21:26:29.611 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:26:29.660 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:26:34.540 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:26:34.687 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:26:34.785 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:26:34.802 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@5adb82d9]
2025-02-16 21:26:34.802 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:26:34.812 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:26:34.814 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:26:34.815 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:26:34.816 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:26:34.827 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:26:34.837 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:26:35.010 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:26:35.020 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:26:35.020 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:26:35.021 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:26:35.021 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:26:35.021 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:26:35.021 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:26:35.022 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:26:35.022 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:26:35.033 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:26:35.034 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:26:35.034 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:26:35.034 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:26:35.037 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:26:35.037 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:26:35.038 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:26:35.038 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:26:35.038 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:26:35.038 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:26:35.038 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:26:35.038 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:26:35.038 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:26:35.046 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:26:35.046 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:26:35.048 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:26:35.050 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:26:35.052 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:26:35.057 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:26:35.057 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:26:35.058 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:26:35.058 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:26:35.086 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:26:35.086 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:26:35.089 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:29:32.349 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:29:32.358 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:29:32.363 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:29:32.375 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:29:32.384 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:29:34.634 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84158 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:29:34.636 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:29:34.637 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:29:34.682 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:29:34.683 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:29:35.089 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:29:35.117 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 2 JPA repository interfaces.
2025-02-16 21:29:35.422 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:29:35.429 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:29:35.430 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:29:35.453 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:29:35.454 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 770 ms
2025-02-16 21:29:35.558 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:29:35.584 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:29:35.599 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:29:35.741 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:29:35.755 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:29:35.832 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2964445d
2025-02-16 21:29:35.833 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:29:35.877 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:29:36.324 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:29:36.370 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:29:36.517 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:29:36.917 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:29:36.929 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:29:36.930 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:29:36.935 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:29:36.938 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:29:36.938 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:29:36.940 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:29:36.976 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:29:37.035 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:29:37.070 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:29:37.090 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:29:37.121 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:29:37.161 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:29:37.209 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:29:37.230 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:29:37.236 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.066 seconds (process running for 3.388)
2025-02-16 21:29:48.121 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:29:48.126 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:29:48.127 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:29:48.128 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:29:48.128 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:29:48.137 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@77694cd5
2025-02-16 21:29:48.139 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@66c3a0ab
2025-02-16 21:29:48.141 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:29:48.141 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 14 ms
2025-02-16 21:29:48.171 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:29:48.190 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:29:48.191 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:29:48.193 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:29:48.194 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:29:48.247 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:29:48.677 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:29:48.694 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:29:48.694 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:29:48.694 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:29:48.694 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:29:48.695 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:29:48.695 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:29:48.695 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:29:48.695 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:29:48.707 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:29:48.708 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:29:48.707 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:29:48.708 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:29:48.725 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:29:48.725 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:29:48.726 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:29:48.725 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:29:48.726 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:29:48.726 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:29:48.726 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:29:48.726 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:29:48.743 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:29:48.743 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:29:48.748 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:29:48.751 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:29:48.756 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:29:48.770 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:29:48.770 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:29:48.773 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:29:48.774 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:29:48.850 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:29:48.851 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:29:48.871 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:29:48.872 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:30:26.857 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:30:26.864 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:30:26.870 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:30:26.880 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:30:26.888 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:30:29.105 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84170 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:30:29.106 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:30:29.106 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:30:29.137 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:30:29.137 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:30:29.606 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:30:29.635 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 21:30:29.968 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:30:29.976 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:30:29.977 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:30:30.002 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:30:30.002 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 865 ms
2025-02-16 21:30:30.125 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:30:30.149 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:30:30.163 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:30:30.344 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:30:30.360 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:30:30.437 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7887ac75
2025-02-16 21:30:30.438 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:30:30.483 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:30:30.938 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:30:31.017 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:30:31.165 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:30:31.579 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:30:31.592 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:30:31.594 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:30:31.600 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:30:31.603 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:30:31.604 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:30:31.606 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:30:31.646 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:30:31.708 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:30:31.751 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:30:31.777 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:30:31.818 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:30:31.863 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:30:31.916 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:30:31.934 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:30:31.940 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.249 seconds (process running for 3.594)
2025-02-16 21:30:37.889 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:30:37.891 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:30:37.891 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:30:37.891 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:30:37.891 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:30:37.894 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@23848c27
2025-02-16 21:30:37.894 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@30df98bb
2025-02-16 21:30:37.894 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:30:37.894 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 21:30:37.906 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:30:37.911 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:30:37.912 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:30:37.913 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:30:37.924 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:30:37.935 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:30:38.160 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:30:38.170 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:30:38.170 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:30:38.170 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:30:38.171 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:30:38.171 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:30:38.171 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:30:38.172 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:30:38.172 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:30:38.179 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:30:38.179 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:30:38.180 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:30:38.180 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:30:38.186 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:30:38.187 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:30:38.187 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:30:38.188 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:30:38.188 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:30:38.188 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:30:38.188 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 21:30:38.194 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 21:30:38.194 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 21:30:38.195 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 21:30:38.195 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 21:30:38.199 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:30:38.214 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:30:38.214 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:30:38.219 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 21:30:38 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 21:30:38.219 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:30:38.250 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 21:30:38.251 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:30:38.253 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:30:38.254 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:31:39.911 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:31:39.926 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:31:39.934 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:31:39.942 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:31:39.951 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:31:41.600 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84191 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:31:41.601 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:31:41.601 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:31:41.629 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:31:41.629 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:31:42.004 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:31:42.037 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 2 JPA repository interfaces.
2025-02-16 21:31:42.364 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:31:42.371 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:31:42.371 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:31:42.392 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:31:42.392 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 762 ms
2025-02-16 21:31:42.505 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:31:42.528 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:31:42.544 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:31:42.687 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:31:42.700 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:31:42.772 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@75067235
2025-02-16 21:31:42.773 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:31:42.818 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:31:43.258 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:31:43.320 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:31:43.475 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:31:43.865 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:31:43.877 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:31:43.878 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:31:43.882 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:31:43.885 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:31:43.886 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:31:43.888 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:31:43.924 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:31:43.992 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:31:44.031 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:31:44.053 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:31:44.090 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:31:44.130 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:31:44.179 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:31:44.206 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:31:44.215 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.058 seconds (process running for 3.35)
2025-02-16 21:31:55.204 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:31:55.205 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:31:55.205 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:31:55.205 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:31:55.205 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:31:55.207 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@17443de6
2025-02-16 21:31:55.208 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@74767b78
2025-02-16 21:31:55.208 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:31:55.208 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 21:31:55.224 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:31:55.230 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:31:55.231 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:31:55.233 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:31:55.242 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:31:55.254 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:31:55.476 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:31:55.489 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:31:55.490 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:31:55.491 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:31:55.492 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:31:55.492 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:31:55.492 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:31:55.493 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:31:55.493 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:31:55.511 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:31:55.511 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:31:55.512 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:31:55.512 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:31:55.519 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:31:55.519 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:31:55.519 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:31:55.520 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:31:55.520 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:31:55.520 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:31:55.520 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 21:31:55.528 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 21:31:55.529 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 21:31:55.529 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 21:31:55.530 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 21:31:55.534 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:31:55.542 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:31:55.542 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:31:55.543 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 21:31:55 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 21:31:55.543 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:31:55.565 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 21:31:55.565 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:31:55.567 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:31:55.567 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:32:13.874 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:32:13.874 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:32:13.877 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:32:13.878 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:32:13.878 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:32:13.878 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 21:32:13.896 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:32:13.906 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:32:13.907 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:32:13.912 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:32:13.913 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-02-16 21:32:13.927 [http-nio-8081-exec-10] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/admin/users?continue to session
2025-02-16 21:32:13.928 [http-nio-8081-exec-10] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8081/login
2025-02-16 21:32:35.069 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:32:35.074 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:32:35.079 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:32:35.093 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:32:35.107 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:32:36.890 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84216 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:32:36.891 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:32:36.892 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:32:36.935 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:32:36.935 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:32:37.315 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:32:37.345 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 2 JPA repository interfaces.
2025-02-16 21:32:37.639 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:32:37.647 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:32:37.648 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:32:37.669 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:32:37.669 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 734 ms
2025-02-16 21:32:37.780 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:32:37.807 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:32:37.822 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:32:37.964 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:32:37.981 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:32:38.068 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@664e9533
2025-02-16 21:32:38.069 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:32:38.117 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:32:38.585 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:32:38.648 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:32:38.809 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:32:39.186 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:32:39.200 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:32:39.202 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:32:39.206 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:32:39.209 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:32:39.210 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:32:39.211 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:32:39.248 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:32:39.307 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:32:39.346 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:32:39.369 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:32:39.415 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:32:39.454 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:32:39.498 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:32:39.513 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:32:39.518 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.037 seconds (process running for 3.404)
2025-02-16 21:32:42.633 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:32:42.634 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:32:42.634 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:32:42.634 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:32:42.634 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:32:42.637 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@39da99c
2025-02-16 21:32:42.637 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3cc8bea
2025-02-16 21:32:42.638 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:32:42.638 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-02-16 21:32:42.648 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:32:42.657 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:32:42.659 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:32:42.661 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:32:42.678 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:32:42.699 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:32:42.937 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:32:42.969 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:32:42.969 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:32:42.970 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:32:42.970 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:32:42.970 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:32:42.970 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:32:42.971 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:32:42.971 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:32:42.979 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:32:42.979 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:32:42.980 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:32:42.980 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:32:42.984 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:32:42.985 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:32:42.985 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:32:42.985 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 21:32:42.986 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:32:42.986 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:32:42.987 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:32:42.998 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 21:32:42.999 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 21:32:42.999 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 21:32:43.000 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 21:32:43.003 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:32:43.016 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:32:43.016 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:32:43.017 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 21:32:43 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 21:32:43.017 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:32:43.038 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 21:32:43.039 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:32:43.040 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:32:43.041 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:47:11.410 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:47:11.445 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:47:11.458 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:47:11.481 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:47:11.484 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:47:14.372 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84375 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:47:14.373 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:47:14.374 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:47:14.462 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:47:14.463 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:47:14.956 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:47:14.992 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 2 JPA repository interfaces.
2025-02-16 21:47:15.337 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:47:15.346 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:47:15.346 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:47:15.368 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:47:15.368 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 905 ms
2025-02-16 21:47:15.491 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:47:15.526 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:47:15.541 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:47:15.701 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:47:15.717 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:47:15.834 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1f588aef
2025-02-16 21:47:15.835 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:47:15.895 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:47:16.462 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:47:16.614 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:47:16.893 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:47:17.379 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:47:17.392 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:47:17.394 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:47:17.398 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:47:17.401 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:47:17.403 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:47:17.406 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:47:17.447 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:47:17.509 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:47:17.553 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:47:17.579 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:47:17.623 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:47:17.668 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:47:17.713 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:47:17.729 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:47:17.735 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.897 seconds (process running for 4.928)
2025-02-16 21:47:26.569 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:47:26.569 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:47:26.570 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:47:26.570 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:47:26.570 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:47:26.572 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@64225731
2025-02-16 21:47:26.572 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7307acb
2025-02-16 21:47:26.572 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:47:26.572 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-02-16 21:47:26.589 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:47:26.595 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:47:26.597 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:47:26.598 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:47:26.608 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:47:26.620 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:47:26.807 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:47:26.880 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:47:26.880 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:47:26.882 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:47:26.882 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:47:26.882 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:47:26.882 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:47:26.883 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:47:26.883 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:47:26.896 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:47:26.896 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:47:26.897 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:47:26.897 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:47:26.931 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:47:26.931 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:47:26.931 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:47:26.931 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:47:26.931 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:47:26.931 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:47:26.932 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 21:47:26.953 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 21:47:26.954 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 21:47:26.955 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 21:47:26.957 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 21:47:26.958 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:47:26.973 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:47:26.974 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:47:26.975 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:47:26.975 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 21:47:26 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 21:47:27.019 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 21:47:27.020 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:47:27.023 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:47:27.025 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:47:35.171 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:47:35.174 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:47:35.174 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:47:35.178 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 7004129AB8F8147209029E5BF8364203
2025-02-16 21:47:35.180 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:47:35.190 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:47:35.244 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:47:39.038 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:47:39.195 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:47:39.291 [http-nio-8081-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:47:39.311 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@2be13d74]
2025-02-16 21:47:39.312 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 21:47:39.318 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:47:39.319 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:47:39.319 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:47:39.319 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:47:39.320 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:47:39.323 [http-nio-8081-exec-5] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:47:39.348 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:47:39.363 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:47:39.363 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:47:39.364 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:47:39.364 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:47:39.364 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:47:39.364 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:47:39.364 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:47:39.364 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:47:39.373 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:47:39.373 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:47:39.373 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:47:39.373 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:47:39.377 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:47:39.377 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:47:39.377 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:47:39.377 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:47:39.377 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:47:39.377 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:47:39.377 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:47:39.377 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:47:39.377 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:47:39.381 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:47:39.382 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:47:39.385 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:47:39.387 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:47:39.387 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:47:39.387 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:47:39.388 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:47:39.389 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:47:39.390 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:47:39.393 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:47:39.393 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:47:39.400 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:36.086 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:50:36.092 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:50:36.114 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:50:36.119 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:50:36.127 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:50:38.270 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84417 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:50:38.271 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:50:38.272 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:50:38.438 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:50:38.439 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:50:39.093 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:50:39.126 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 2 JPA repository interfaces.
2025-02-16 21:50:39.458 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:50:39.466 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:50:39.466 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:50:39.485 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:50:39.485 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1046 ms
2025-02-16 21:50:39.591 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:50:39.619 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:50:39.634 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:50:39.782 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:50:39.796 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:50:39.884 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@49a7d178
2025-02-16 21:50:39.885 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:50:39.944 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:50:40.376 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:50:40.445 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:50:40.608 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:50:41.002 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:50:41.015 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:50:41.016 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:50:41.021 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:41.024 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:41.025 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:41.027 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:50:41.065 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:50:41.134 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:50:41.173 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:50:41.195 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:50:41.251 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:50:41.321 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:50:41.357 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:50:41.378 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:50:41.385 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.806 seconds (process running for 4.298)
2025-02-16 21:50:46.566 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:50:46.567 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:50:46.567 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:50:46.567 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:50:46.567 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:50:46.570 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@31bff70a
2025-02-16 21:50:46.570 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1711595a
2025-02-16 21:50:46.570 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:50:46.570 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-02-16 21:50:46.584 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:50:46.592 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:50:46.594 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:50:46.596 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:50:46.607 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:46.618 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:50:46.820 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:46.839 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:50:46.839 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:50:46.839 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:50:46.839 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:50:46.840 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:50:46.840 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:50:46.842 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:50:46.842 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:50:46.853 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:46.854 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:46.856 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:46.856 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:46.861 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:50:46.861 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:50:46.862 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:50:46.862 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:50:46.862 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:46.863 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:50:46.863 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:50:46.863 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:50:46.863 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:50:46.879 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:50:46.879 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:50:46.881 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:46.883 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:46.885 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:46.894 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:50:46.894 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:50:46.895 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:50:46.895 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:50:46.922 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:46.923 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:46.926 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:49.345 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:50:49.346 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:50:49.347 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:50:49.347 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:50:49.348 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:49.351 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:50:49.379 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:49.395 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:50:49.395 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:50:49.395 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:50:49.395 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:50:49.396 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:50:49.396 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:50:49.396 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:50:49.396 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:50:49.397 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:49.397 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:49.397 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:49.397 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:49.402 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:50:49.402 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:50:49.403 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:50:49.403 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:50:49.404 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:50:49.404 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:49.404 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:50:49.404 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:50:49.404 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:50:49.406 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:50:49.406 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:50:49.409 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:49.410 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:50:49.410 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:50:49.411 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:49.411 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:49.412 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:49.414 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:49.416 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:50:49.416 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:50:49.417 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:52.565 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:50:52.566 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:50:52.566 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:50:52.566 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:50:52.567 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:52.568 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:50:52.590 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:52.599 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:50:52.600 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:50:52.600 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:50:52.600 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:50:52.600 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:50:52.600 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:50:52.601 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:50:52.601 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:50:52.602 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:52.602 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:52.602 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:52.602 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:52.607 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:50:52.607 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:50:52.608 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:50:52.608 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:50:52.608 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:50:52.608 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:52.608 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:50:52.608 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:50:52.609 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:50:52.612 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:50:52.612 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:50:52.618 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:52.620 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:50:52.620 [http-nio-8081-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:50:52.620 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:52.621 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:50:52.621 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:50:52.623 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:50:52.625 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:50:52.626 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:50:52.626 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:52:53.493 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:52:53.515 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:52:53.520 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:52:53.530 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:52:53.533 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:52:55.687 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84479 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:52:55.688 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:52:55.689 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:52:55.741 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:52:55.741 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:52:56.255 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:52:56.288 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 2 JPA repository interfaces.
2025-02-16 21:52:56.648 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:52:56.658 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:52:56.659 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:52:56.680 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:52:56.681 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 939 ms
2025-02-16 21:52:56.836 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:52:56.868 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:52:56.891 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:52:57.028 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:52:57.042 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:52:57.158 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7e2abf21
2025-02-16 21:52:57.160 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:52:57.221 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:52:57.667 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:52:57.731 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:52:57.849 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:52:58.273 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:52:58.286 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:52:58.287 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:52:58.292 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:52:58.295 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:52:58.296 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:52:58.298 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:52:58.335 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:52:58.403 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:52:58.446 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:52:58.469 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:52:58.504 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:52:58.542 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:52:58.584 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:52:58.604 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:52:58.609 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.474 seconds (process running for 3.869)
2025-02-16 21:53:08.159 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:53:08.161 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:53:08.163 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:53:08.163 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:53:08.163 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:53:08.167 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@43e9e58e
2025-02-16 21:53:08.168 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@4f6e2042
2025-02-16 21:53:08.168 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:53:08.169 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2025-02-16 21:53:08.193 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:53:08.199 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:53:08.200 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:53:08.201 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:53:08.212 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:08.224 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:53:08.412 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:08.449 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:53:08.450 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:53:08.450 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:53:08.449 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:53:08.450 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:53:08.450 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:53:08.450 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:53:08.450 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:53:08.457 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:08.458 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:08.459 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:08.459 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:08.464 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:53:08.464 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:53:08.465 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:53:08.465 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:08.465 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:53:08.465 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:53:08.465 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:53:08.465 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:53:08.465 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:53:08.490 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:53:08.490 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:53:08.495 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:08.497 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:08.498 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:08.507 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:53:08.507 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:53:08.508 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:53:08.508 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:53:08.534 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:08.535 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:08.539 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:09.562 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:53:09.563 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:53:09.564 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:53:09.564 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:53:09.565 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:09.567 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:53:09.597 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:09.610 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:53:09.610 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:53:09.610 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:53:09.610 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:53:09.611 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:53:09.611 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:53:09.611 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:53:09.611 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:53:09.612 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:09.613 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:09.613 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:09.614 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:09.620 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:53:09.621 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:53:09.621 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:53:09.622 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:53:09.622 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:53:09.622 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:09.623 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:53:09.623 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:53:09.623 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:53:09.625 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:53:09.626 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:53:09.628 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:53:09.628 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:53:09.629 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:09.629 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:09.629 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:09.631 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:09.632 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:09.634 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:53:09.635 [http-nio-8081-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:53:09.635 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:11.206 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:53:11.209 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:53:11.209 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:53:11.210 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:53:11.211 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:11.219 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:53:11.241 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:11.259 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:53:11.259 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:53:11.259 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:53:11.259 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:53:11.259 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:53:11.259 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:53:11.259 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:53:11.259 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:53:11.262 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:11.262 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:11.264 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:11.264 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:11.272 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:53:11.272 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:53:11.273 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:53:11.273 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:11.273 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:53:11.273 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:53:11.274 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:53:11.274 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:53:11.274 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:53:11.287 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:53:11.287 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:53:11.291 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:11.293 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:53:11.294 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:53:11.294 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:11.295 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:11.296 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:11.297 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:11.300 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:53:11.301 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:53:11.302 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:12.812 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:53:12.814 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:12.814 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:12.820 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session CDBA1E96B5DF948384539266772644FD
2025-02-16 21:53:12.823 [http-nio-8081-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:53:12.827 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:53:12.860 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:53:16.543 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:53:16.698 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:53:16.808 [http-nio-8081-exec-10] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:53:16.827 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@774434d6]
2025-02-16 21:53:16.827 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 21:53:16.836 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:53:16.837 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:53:16.837 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:53:16.837 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:53:16.837 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:16.839 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:53:16.851 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:16.872 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:53:16.873 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:53:16.874 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:53:16.874 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:53:16.875 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:53:16.876 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:53:16.876 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:53:16.876 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:53:16.877 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:16.878 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:16.879 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:16.878 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:16.883 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:53:16.883 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:53:16.884 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:53:16.884 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:16.884 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:53:16.884 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:53:16.885 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:53:16.890 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:53:16.892 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:53:16.895 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:53:16.896 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:53:16.897 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:16.898 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:53:16.898 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:53:16.898 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:16.900 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:16.900 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:16.901 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:16.903 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:53:16.903 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:53:16.903 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:44.780 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:53:44.784 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:53:44.791 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:53:44.798 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:53:44.815 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:53:46.524 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84551 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:53:46.525 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:53:46.525 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:53:46.559 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:53:46.559 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:53:46.940 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:53:46.969 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 2 JPA repository interfaces.
2025-02-16 21:53:47.279 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:53:47.288 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:53:47.288 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:53:47.309 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:53:47.309 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 749 ms
2025-02-16 21:53:47.431 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:53:47.460 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:53:47.477 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:53:47.643 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:53:47.659 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:53:47.758 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2cd20b2f
2025-02-16 21:53:47.759 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:53:47.810 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:53:48.252 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:53:48.313 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:53:48.466 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:53:48.855 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:53:48.870 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:53:48.872 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:53:48.877 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:48.881 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:48.882 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:48.883 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:53:48.919 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:53:48.993 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:53:49.037 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:53:49.061 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:53:49.099 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:53:49.139 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:53:49.189 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:53:49.206 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:53:49.213 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.106 seconds (process running for 3.484)
2025-02-16 21:53:54.504 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:53:54.508 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:53:54.509 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:53:54.510 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:53:54.510 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:53:54.514 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@75710ad8
2025-02-16 21:53:54.514 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@72db162d
2025-02-16 21:53:54.514 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:53:54.514 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-02-16 21:53:54.526 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:53:54.533 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:53:54.534 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:53:54.536 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:53:54.556 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:54.567 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:53:54.864 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:54.884 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:53:54.885 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:53:54.885 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:53:54.886 [http-nio-8081-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:53:54.887 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:53:54.887 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:53:54.887 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:53:54.888 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:53:54.901 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:54.902 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:54.902 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:54.902 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:54.908 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:53:54.909 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:53:54.909 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:53:54.909 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:53:54.909 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:54.910 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:53:54.910 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:53:54.911 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:53:54.912 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:53:54.936 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:53:54.936 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:53:54.942 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:54.951 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:54.953 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:53:54.961 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:53:54.962 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:53:54.963 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:53:54.963 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:53:55.043 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:55.044 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:55.051 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:53:57.384 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:53:57.387 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:57.388 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:53:57.397 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session A29D346C947B5F73E6FD8E1DFCFD4587
2025-02-16 21:53:57.400 [http-nio-8081-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:53:57.410 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:53:57.453 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:54:02.378 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:54:02.528 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:54:02.625 [http-nio-8081-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:54:02.642 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@72dc101e]
2025-02-16 21:54:02.642 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:54:02.650 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:54:02.651 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:54:02.651 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:54:02.651 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:54:02.652 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:54:02.653 [http-nio-8081-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:54:02.695 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:02.701 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:54:02.701 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:54:02.701 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:54:02.701 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:54:02.701 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:54:02.701 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:54:02.704 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:54:02.704 [http-nio-8081-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:54:02.709 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:02.710 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:54:02.711 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:02.715 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:54:02.717 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:54:02.716 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:54:02.719 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:54:02.719 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:54:02.719 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:54:02.720 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:54:02.723 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 21:54:02.730 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:54:02.732 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 21:54:02.732 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 21:54:02.732 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 21:54:02.732 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 21:54:02.733 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:54:02.733 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:54:02.734 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:02.735 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:54:02.738 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:54:02.738 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 21:54:02 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 21:54:02.749 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 21:54:02.749 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:54:15.448 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:54:15.451 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:54:15.452 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:54:15.452 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session D5439314785F7ED5794683D0E1E70792
2025-02-16 21:54:15.456 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:54:15.463 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:54:15.496 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:54:18.547 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:54:18.562 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:54:18.690 [http-nio-8081-exec-3] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-02-16 21:54:18.696 [http-nio-8081-exec-3] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2025-02-16 21:54:18.699 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2025-02-16 21:54:18.721 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:54:26.052 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:54:26.062 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:54:26.172 [http-nio-8081-exec-9] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:54:26.173 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.s.ChangeSessionIdAuthenticationStrategy - Changed session id from FB71F90219EC617EB35E784F10EC4775
2025-02-16 21:54:26.174 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@40f4ab09]
2025-02-16 21:54:26.174 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]
2025-02-16 21:54:26.177 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:54:26.178 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:54:26.178 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:54:26.178 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:54:26.178 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:26.179 [http-nio-8081-exec-10] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:54:26.201 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:26.205 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:54:26.205 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:54:26.205 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:54:26.205 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:54:26.205 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:54:26.205 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:54:26.206 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:54:26.206 [http-nio-8081-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:54:26.208 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:26.208 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:26.208 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:26.208 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:26.215 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:54:26.217 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:54:26.218 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:26.219 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:54:26.219 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:54:26.219 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:54:26.218 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:54:26.221 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:54:26.222 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:54:26.225 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:54:26.225 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:54:26.227 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:54:26.228 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:54:26.228 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:54:26.228 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:54:26.229 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:26.229 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:54:26.229 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:26.231 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:54:26.231 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:54:26.232 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:51.895 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:54:51.896 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:54:51.897 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:54:51.897 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:54:51.898 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:51.901 [http-nio-8081-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:54:51.930 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:51.942 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:54:51.942 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:54:51.943 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:54:51.943 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:54:51.943 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:54:51.943 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:54:51.944 [http-nio-8081-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:54:51.944 [http-nio-8081-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:54:51.945 [http-nio-8081-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:51.945 [http-nio-8081-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:51.946 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:51.946 [http-nio-8081-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:51.956 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:54:51.956 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:54:51.956 [http-nio-8081-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:51.956 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:54:51.957 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:54:51.957 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:54:51.957 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:54:51.957 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:54:51.957 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:54:51.963 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:54:51.963 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:54:51.965 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:54:51.966 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:54:51.967 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:54:51.967 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:54:51.967 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:51.968 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:51.968 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:54:51.970 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:54:51.970 [http-nio-8081-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=23, email='dimaromanov06@gmail.com', firstName='Дмитрий', lastName='Еронин', age=35}, User{ (truncated)...]
2025-02-16 21:54:51.971 [http-nio-8081-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:54:56.704 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /admin/users/23
2025-02-16 21:54:56.707 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /admin/users/23
2025-02-16 21:54:56.709 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - DELETE "/admin/users/23", parameters={}
2025-02-16 21:54:56.715 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#deleteUser(Long)
2025-02-16 21:54:56.740 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password,
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user u1_0 
    left join
        user_role r1_0 
            on u1_0.id=r1_0.user_id 
    left join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        u1_0.id=?
2025-02-16 21:54:56.772 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* one-shot delete for ru.kata.spring.boot_security.demo.model.User.roles */delete 
    from
        user_role 
    where
        user_id=?
2025-02-16 21:54:56.789 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* delete for ru.kata.spring.boot_security.demo.model.User */delete 
    from
        user 
    where
        id=?
2025-02-16 21:54:56.796 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:54:56.797 [http-nio-8081-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Nothing to write: null body
2025-02-16 21:54:56.797 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 204 NO_CONTENT
2025-02-16 21:54:56.797 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:56.801 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:54:56.801 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:54:56.801 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:54:56.801 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:54:56.802 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:54:56.803 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:54:56.805 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:54:56.806 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:54:56.807 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:54:56.808 [http-nio-8081-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, User{id=27, em (truncated)...]
2025-02-16 21:54:56.808 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:57:56.802 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 21:57:56.809 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 21:57:56.832 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:57:56.850 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 21:57:56.853 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-02-16 21:57:59.738 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Starting SpringBootSecurityDemoApplication using Java 23.0.1 with PID 84650 (/Users/dimaeronin/Desktop/Гиты/3.1.4/target/classes started by dimaeronin in /Users/dimaeronin/Desktop/Гиты/3.1.4)
2025-02-16 21:57:59.740 [restartedMain] DEBUG r.k.s.b.d.SpringBootSecurityDemoApplication - Running with Spring Boot v3.4.2, Spring v6.2.2
2025-02-16 21:57:59.741 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - No active profile set, falling back to 1 default profile: "default"
2025-02-16 21:57:59.780 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-02-16 21:57:59.780 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-02-16 21:58:00.211 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-02-16 21:58:00.244 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 2 JPA repository interfaces.
2025-02-16 21:58:00.569 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-02-16 21:58:00.577 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-02-16 21:58:00.578 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-02-16 21:58:00.600 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-02-16 21:58:00.600 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 820 ms
2025-02-16 21:58:00.726 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-02-16 21:58:00.753 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.5.Final
2025-02-16 21:58:00.769 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-02-16 21:58:00.922 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-02-16 21:58:00.936 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-02-16 21:58:01.018 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@563384cb
2025-02-16 21:58:01.019 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-02-16 21:58:01.070 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 9.1
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-02-16 21:58:01.522 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-02-16 21:58:01.585 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 21:58:01.706 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-02-16 21:58:02.123 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:58:02.136 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Roles already exist in the database.
2025-02-16 21:58:02.137 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:58:02.142 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:58:02.145 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:58:02.146 [restartedMain] INFO  r.k.s.b.demo.initialization.InitDB - Users already exist in the database.
2025-02-16 21:58:02.185 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name userDetailServiceImpl
2025-02-16 21:58:02.248 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 11 mappings in 'requestMappingHandlerMapping'
2025-02-16 21:58:02.289 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-02-16 21:58:02.314 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-02-16 21:58:02.352 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-02-16 21:58:02.403 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-02-16 21:58:02.449 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-02-16 21:58:02.470 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-02-16 21:58:02.479 [restartedMain] INFO  r.k.s.b.d.SpringBootSecurityDemoApplication - Started SpringBootSecurityDemoApplication in 3.398 seconds (process running for 4.28)
2025-02-16 21:58:09.632 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-02-16 21:58:09.633 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-02-16 21:58:09.633 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-02-16 21:58:09.633 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-02-16 21:58:09.633 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-02-16 21:58:09.641 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@790cd05c
2025-02-16 21:58:09.641 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@2a51e966
2025-02-16 21:58:09.641 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-02-16 21:58:09.641 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 8 ms
2025-02-16 21:58:09.655 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:58:09.660 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:58:09.662 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:58:09.663 [http-nio-8081-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:58:09.674 [http-nio-8081-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:58:09.684 [http-nio-8081-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:58:09.890 [http-nio-8081-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:58:09.899 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:58:09.899 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:58:09.900 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:58:09.900 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:58:09.900 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:58:09.900 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:58:09.901 [http-nio-8081-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:58:09.901 [http-nio-8081-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:58:09.910 [http-nio-8081-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:58:09.910 [http-nio-8081-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:58:09.912 [http-nio-8081-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:58:09.912 [http-nio-8081-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:58:09.916 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:58:09.917 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:58:09.917 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:58:09.918 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:58:09.918 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:58:09.918 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/users
2025-02-16 21:58:09.918 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:58:09.918 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/users", parameters={}
2025-02-16 21:58:09.918 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllUsers()
2025-02-16 21:58:09.928 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.age,
        u1_0.email,
        u1_0.first_name,
        u1_0.last_name,
        u1_0.password 
    from
        user u1_0
2025-02-16 21:58:09.928 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:58:09.930 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:58:09.931 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_role r1_0 
    join
        role r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-02-16 21:58:09.938 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:58:09.938 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:58:09.941 [http-nio-8081-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:58:09.941 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, User{id=27, em (truncated)...]
2025-02-16 21:58:09.969 [http-nio-8081-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:58:09.970 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:58:09.973 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:58:40.845 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /logout
2025-02-16 21:58:40.850 [http-nio-8081-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:58:40.851 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.logout.LogoutFilter - Logging out [UsernamePasswordAuthenticationToken [Principal=User{id=26, email='admin@example.com', firstName='admin', lastName='admin', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=FB71F90219EC617EB35E784F10EC4775], Granted Authorities=[Role{id=1, name='ROLE_ADMIN'}]]]
2025-02-16 21:58:40.865 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.l.SecurityContextLogoutHandler - Invalidated session 9764256BA6876D548AFEBC9082F1EA80
2025-02-16 21:58:40.871 [http-nio-8081-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?logout
2025-02-16 21:58:40.880 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?logout
2025-02-16 21:58:40.924 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /default-ui.css
2025-02-16 21:58:45.467 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-02-16 21:58:45.625 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* select
        u 
    from
        User u 
    join
        
    fetch
        u.roles 
    where
        u.email = :email */ select
            u1_0.id,
            u1_0.age,
            u1_0.email,
            u1_0.first_name,
            u1_0.last_name,
            u1_0.password,
            r1_0.user_id,
            r1_1.id,
            r1_1.name 
        from
            user u1_0 
        join
            user_role r1_0 
                on u1_0.id=r1_0.user_id 
        join
            role r1_1 
                on r1_1.id=r1_0.role_id 
        where
            u1_0.email=?
2025-02-16 21:58:45.715 [http-nio-8081-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-02-16 21:58:45.733 [http-nio-8081-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@e3dfc50]
2025-02-16 21:58:45.734 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:58:45.740 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /users
2025-02-16 21:58:45.740 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /users
2025-02-16 21:58:45.740 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/users", parameters={}
2025-02-16 21:58:45.740 [http-nio-8081-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.UserController#getSinglePage(User, Model)
2025-02-16 21:58:45.741 [http-nio-8081-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:58:45.742 [http-nio-8081-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-02-16 21:58:45.755 [http-nio-8081-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:58:45.772 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin.js
2025-02-16 21:58:45.772 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin.js
2025-02-16 21:58:45.773 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin.js", parameters={}
2025-02-16 21:58:45.774 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /active_button.js
2025-02-16 21:58:45.774 [http-nio-8081-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:58:45.776 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /active_button.js
2025-02-16 21:58:45.776 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/active_button.js", parameters={}
2025-02-16 21:58:45.776 [http-nio-8081-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-02-16 21:58:45.778 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:58:45.781 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:58:45.784 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:58:45.784 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:58:45.787 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/roles
2025-02-16 21:58:45.790 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/roles
2025-02-16 21:58:45.790 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/roles", parameters={}
2025-02-16 21:58:45.790 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/users
2025-02-16 21:58:45.790 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to ru.kata.spring.boot_security.demo.controller.AdminController#getAllRoles()
2025-02-16 21:58:45.791 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:58:45.793 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-02-16 21:58:45.796 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.name 
    from
        role r1_0
2025-02-16 21:58:45.800 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:58:45.801 [http-nio-8081-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[Role{id=1, name='ROLE_ADMIN'}, Role{id=2, name='ROLE_USER'}]]
2025-02-16 21:58:45.801 [http-nio-8081-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-02-16 21:58:45.802 [http-nio-8081-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 21:58:45.804 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-02-16 21:58:45.805 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-02-16 21:58:45.805 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-02-16 21:58:45.805 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-02-16 21:58:45.809 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-02-16 21:58:45.810 [http-nio-8081-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Sun Feb 16 21:58:45 MSK 2025, status=403, error=Forbidden, message=Forbidden, path=/admin (truncated)...]
2025-02-16 21:58:45.815 [http-nio-8081-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-02-16 21:58:45.815 [http-nio-8081-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=User{id=27, email='user@example.com', firstName='user', lastName='user', age=30}, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[Role{id=2, name='ROLE_USER'}]]]
2025-02-16 22:03:17.525 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-02-16 22:03:17.540 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-02-16 22:03:17.549 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-02-16 22:03:17.563 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-02-16 22:03:17.566 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
